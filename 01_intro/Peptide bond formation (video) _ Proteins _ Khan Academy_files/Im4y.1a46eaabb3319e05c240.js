(window.webpackJsonp=window.webpackJsonp||[]).push([["Im4y","1ARw"],{"3To5":function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a("mR6N"),r=g(a("q1tI")),i=n(a("i8i4")),s=n(a("O+Xk")),l=g(a("4PhQ")),u=n(a("Q8Wn")),d=a("LrfN"),c=n(a("wINb")),p=a("H4Y1"),h=g(a("ZpD3")),f=a("LLsW"),y=g(a("HEOz"));function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(m=function(e){return e?a:t})(e)}function g(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=m(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var i=o?Object.getOwnPropertyDescriptor(e,r):null;i&&(i.get||i.set)?Object.defineProperty(n,r,i):n[r]=e[r]}return n.default=e,a&&a.set(e,n),n}class b extends r.Component{constructor(e){super(e),this.handleDurationChange=({target:e})=>{e instanceof HTMLVideoElement&&this.props.onDurationChange(e.duration)},this.handleEnded=()=>{this.props.onStateChange(d.VideoPlayerState.ENDED)},this.handlePlay=()=>{this.props.onStateChange(d.VideoPlayerState.PLAYING)},this.handlePause=()=>{this.props.onStateChange(d.VideoPlayerState.PAUSED)},this.handleTimeUpdate=({target:e})=>{e instanceof HTMLVideoElement&&this.props.onTimeUpdate(e.currentTime)},this.handleVolumeChange=({target:e})=>{if(e instanceof HTMLVideoElement){const{muteVideos:t,updateMuteVideosSetting:a}=this.props;e.muted!==t&&a(e.muted)}},this.seekTo=e=>{this._videoElement&&(this._videoElement.currentTime=e)},this.play=()=>{this._videoElement&&this._videoElement.play()},this.toggle=()=>{this._videoElement&&(this._videoElement.paused?this._videoElement.play():this._videoElement.pause())},this._vttCaptionsSrc=null}componentDidMount(){const{playbackRate:e}=this.props;this.maybeFetchCaptions(),this._videoElement.playbackRate=(0,f.getPlaybackRateNumber)(e),this.props.onStateChange(d.VideoPlayerState.UNSTARTED),this.props.onPlayerReady(this.toggle),this._videoElement.onerror=()=>{if(this._videoElement.error){const e=this._videoElement.error,t=e.message||"fallback_player_error",a={errorCode:e.code.toString(),errorMsg:t,youtubeId:this.props.translatedYoutubeId||"no youtube id found",title:this.props.title||"no title found"};l.default.error(t,l.Errors.Internal,{sentryData:{tags:{p1:"true"},contexts:{extras:a}}}),h.markMinorConversions([{id:"fallback_player_error",extra:a}])}}}UNSAFE_componentWillReceiveProps({playbackRate:e}){e!==this.props.playbackRate&&(this._videoElement.playbackRate=(0,f.getPlaybackRateNumber)(e))}componentDidUpdate(e){!1===this.props.muteVideos&&null===e.muteVideos&&!0===this._videoElement.muted&&(this._videoElement.muted=!1)}async maybeFetchCaptions(){null!=this.props.translatedYoutubeId&&(this._vttCaptionsSrc=await(0,p.fetchFallbackPlayerCaptions)(this.props.gqlClient,this.props.translatedYoutubeId))}render(){const{autoplay:e,poster:t,src:a,startTime:n,tabAccessible:s,title:l,muteVideos:d,showCaptions:p}=this.props,h=!0===d||null===d;return r.createElement("video",{autoPlay:e,muted:h,className:"player ka-player-iframe centered-when-windowed "+o.css.apply(void 0,this.props.styles),controls:!0,onDurationChange:this.handleDurationChange,onTimeUpdate:this.handleTimeUpdate,onEnded:this.handleEnded,onPause:this.handlePause,onPlay:this.handlePlay,onVolumeChange:this.handleVolumeChange,poster:(0,c.default)(t),ref:e=>{let t=i.default.findDOMNode(e);t instanceof Element||(t=null),this._videoElement=t},src:(0,c.default)(a&&`${a}#t=${n}`),tabIndex:s?0:-1,title:l},r.createElement("style",null,"::cue(.caption){ color: white; font-size: 19pt; }"),this._vttCaptionsSrc&&r.createElement("track",{src:(0,c.default)(this._vttCaptionsSrc),kind:"captions",srcLang:u.default.kaLocale,label:y._("Closed Captions"),default:p}),r.createElement("p",null,y._("It looks like your browser doesn't support embedded videos. Don't worry, you can still download it and watch it with your favorite video player!")),r.createElement("a",{href:a},y.$_("Download %(title)s",{title:l})))}}b.defaultProps={playbackRate:"RATE_100_PERCENT",styles:[]};var v=(0,s.default)(b);t.default=v},"47Cx":function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=l(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var i=o?Object.getOwnPropertyDescriptor(e,r):null;i&&(i.get||i.set)?Object.defineProperty(n,r,i):n[r]=e[r]}n.default=e,a&&a.set(e,n);return n}(a("q1tI")),r=a("LrfN"),i=n(a("3To5")),s=n(a("wINb"));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(l=function(e){return e?a:t})(e)}const u=["downloadUrls"];class d extends o.Component{constructor(...e){super(...e),this.forceUpdateIgnoreArgs=()=>{this.forceUpdate()},this.getPublicAPI=()=>{var e,t;const{model:a}=this.props;return{getCurrentTime:()=>0,getDuration:()=>0,getPlaybackRate:()=>a.get("playbackRate"),getPlayerState:()=>a.get("playerState"),playVideo:(null==(e=this._playerNode)?void 0:e.play)||(()=>{}),seekTo:(null==(t=this._playerNode)?void 0:t.seekTo)||(()=>{})}},this.handleStateChange=e=>{const{model:t,onStateChange:a}=this.props;t.setPlayerState(e),a({data:e})},this.onDurationChange=e=>{const{model:t}=this.props;t&&t.player&&(t.player.getDuration=()=>e)},this.onTimeUpdate=e=>{const{model:t}=this.props;t&&t.player&&(t.player.getCurrentTime=()=>e)}}componentDidMount(){const{model:e}=this.props;e.player=this.getPublicAPI(),u.map((e=>`change:${e}`)).forEach((t=>e.on(t,this.forceUpdateIgnoreArgs,this)))}componentWillUnmount(){const{model:e}=this.props;e.setPlayerState(r.VideoPlayerState.PAUSED),e.off(null,this.forceUpdateIgnoreArgs)}render(){const{autoplay:e,model:t,onPlayerReady:a,startTime:n,styles:r,tabAccessible:l,title:u,muteVideos:d,showCaptions:c,updateMuteVideosSetting:p}=this.props,h=t.get("downloadUrls")||{},f=t.get("translatedYoutubeId");return o.createElement(i.default,{autoplay:e,muteVideos:d,showCaptions:c,onDurationChange:this.onDurationChange,onPlayerReady:a,onStateChange:this.handleStateChange,onTimeUpdate:this.onTimeUpdate,playbackRate:t.get("playbackRate"),poster:(0,s.default)(h.png),ref:e=>this._playerNode=e,src:(0,s.default)(h.mp4),translatedYoutubeId:f,startTime:n,styles:r,tabAccessible:l,title:u,updateMuteVideosSetting:p})}}t.default=d},"71Tp":function(e,t,a){"use strict";function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(n=function(e){return e?a:t})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={unmuteButton:function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=n(t);if(a&&a.has(e))return a.get(e);var o={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=r?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(o,i,s):o[i]=e[i]}o.default=e,a&&a.set(e,o);return o}(a("HEOz"))._("Unmute video")};t.default=o},HbDC:function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=p(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var i=o?Object.getOwnPropertyDescriptor(e,r):null;i&&(i.get||i.set)?Object.defineProperty(n,r,i):n[r]=e[r]}n.default=e,a&&a.set(e,n);return n}(a("q1tI")),r=a("mR6N"),i=n(a("Pwnf")),s=n(a("gE8/")),l=a("JimW"),u=a("g8Be"),d=n(a("6cSF")),c=n(a("MYIS"));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(p=function(e){return e?a:t})(e)}class h extends o.Component{componentDidMount(){const{schedule:e}=this.props;e.interval((()=>this.forceUpdate()),500)}renderClarifications(e){const{videoModel:t}=this.props,a=t.getVideoPosition(),n=e.filter((e=>a>=e.openTimestamp&&a<=e.closeTimestamp));return 0===n.length?null:o.createElement(l.View,{style:f.clarification},n.map(((e,t)=>o.createElement(l.View,{key:e.id},o.createElement("span",{dangerouslySetInnerHTML:{__html:e.text}}),t<n.length-1&&o.createElement("hr",{className:(0,r.css)(f.splitter)})))))}render(){const{cached:e,videoModel:t}=this.props,a=t.get("translatedYoutubeId");return o.createElement(c.default,{cacheWithoutReporters:e,youtubeId:a},(({data:e,loading:t})=>{if(t||!e||!e.officialClarifications||0===e.officialClarifications.length)return null;const a=this.renderClarifications(e.officialClarifications);return o.createElement(d.default,{transitionStyle:{enter:f.popupEnter,enterActive:f.popupEnterActive,leave:f.popupLeave,leaveActive:f.popupLeaveActive},transitionEnterTimeout:400,transitionLeaveTimeout:400},a)}))}}const f=r.StyleSheet.create({clarification:{position:"absolute",bottom:s.default.xxLarge_48,right:s.default.xxSmall_6,padding:s.default.small_12,maxWidth:400,backgroundColor:i.default.offBlack64,border:`1px solid ${i.default.white}`,color:i.default.white},splitter:{margin:0},popupEnter:{transition:"400ms cubic-bezier(0.250, 0.250, 0.750, 0.750) all",opacity:0},popupEnterActive:{opacity:1},popupLeave:{transition:"400ms cubic-bezier(0.250, 0.250, 0.750, 0.750) all",opacity:1},popupLeaveActive:{opacity:0}});var y=(0,u.withActionScheduler)(h);t.default=y},LLsW:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validatePlaybackRate=t.getPlaybackRateNumber=t.getPlaybackRateEnum=void 0;t.getPlaybackRateNumber=e=>{switch(e){case"RATE_25_PERCENT":return.25;case"RATE_50_PERCENT":return.5;case"RATE_75_PERCENT":return.75;case"RATE_100_PERCENT":return 1;case"RATE_125_PERCENT":return 1.25;case"RATE_150_PERCENT":return 1.5;case"RATE_175_PERCENT":return 1.75;case"RATE_200_PERCENT":return 2;default:return 1}};t.getPlaybackRateEnum=e=>{switch(e){case.25:return"RATE_25_PERCENT";case.5:return"RATE_50_PERCENT";case.75:return"RATE_75_PERCENT";case 1:return"RATE_100_PERCENT";case 1.25:return"RATE_125_PERCENT";case 1.5:return"RATE_150_PERCENT";case 1.75:return"RATE_175_PERCENT";case 2:return"RATE_200_PERCENT";default:return null}};t.validatePlaybackRate=e=>"RATE_25_PERCENT"===e||"RATE_50_PERCENT"===e||"RATE_75_PERCENT"===e||"RATE_100_PERCENT"===e||"RATE_125_PERCENT"===e||"RATE_150_PERCENT"===e||"RATE_175_PERCENT"===e||"RATE_200_PERCENT"===e?e:null},Ll2p:function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a("pVnL")),r=a("Pk2J"),i=a("mR6N"),s=v(a("q1tI")),l=n(a("nSHN")),u=a("LrfN"),d=n(a("n+md")),c=v(a("HEOz")),p=v(a("zbaY")),h=a("YssU"),f=n(a("UGk7")),y=n(a("mXPZ")),m=n(a("cfQQ")),g=n(a("duQp"));function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(b=function(e){return e?a:t})(e)}function v(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=b(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var i=o?Object.getOwnPropertyDescriptor(e,r):null;i&&(i.get||i.set)?Object.defineProperty(n,r,i):n[r]=e[r]}return n.default=e,a&&a.set(e,n),n}class C extends s.Component{constructor(...e){super(...e),this.state={currentTask:this.props&&this.props.task,isFocusingPlayer:!1,isHoveringPlayer:!1,playerState:u.VideoPlayerState.UNSTARTED,pointsEarned:0},this.updateTaskIfNecessary=e=>{const{video:t}=this.props,{currentTask:a}=this.state;if(!(null===a||e.content&&void 0!==a&&a.content))return;const n=a&&a.content&&a.content.id?a.content.id:null,o=e&&e.content&&e.content.id?e.content.id:null;(null==a||o!==n)&&o===t.id&&this._isMounted&&this.setState({currentTask:e})},this.updatePointsEarned=()=>{this.setState({pointsEarned:this.props.playerModel.get("points")||0})},this.handleNextButtonClick=()=>{const{navigateToNextItem:e,nextContentItem:t,playerModel:a}=this.props;t&&e?e():a.player&&a.player.seekTo(0)},this.handleViewAllClick=()=>{const e=document.querySelector("[data-notifications-dropdown-trigger]");e&&e.click()},this.handleStateChange=e=>{const{onStateChanged:t}=this.props,a=e.data;this.updatePointsEarned(),this.setState({playerState:a},(()=>{t&&t(a)}))},this.handlePlayerFocus=()=>{this._isMounted&&this.setState({isFocusingPlayer:!0})},this.handlePlayerBlur=()=>{this.setState({isFocusingPlayer:!1})},this.handlePlayerMouseEnter=()=>{this.setState({isHoveringPlayer:!0})},this.handlePlayerMouseLeave=()=>{this.setState({isHoveringPlayer:!1})},this.getAutoplaySetting=()=>{const{embedded:e,profile:t,prefersReducedMotion:a,shouldAutoplay:n}=this.props,o=!(!t||!t.get("autocontinueOn"));return!a&&!e&&("boolean"==typeof n?n:o)}}componentDidMount(){this._isMounted=!0,this.unsubscribes=[l.default.register("current_task",this.updateTaskIfNecessary)],this.pointsInterval=setInterval(this.updatePointsEarned,5e3)}UNSAFE_componentWillUpdate(e){e.video.translatedYoutubeId!==this.props.video.translatedYoutubeId&&this.setState({playerState:u.VideoPlayerState.UNSTARTED,pointsEarned:0})}componentWillUnmount(){this.pointsInterval&&clearInterval(this.pointsInterval),this.unsubscribes.forEach((e=>e()))}getCurrentTask(){const{currentTask:e}=this.state;return e&&e.content&&e.content.id===this.props.video.id?e:null}render(){const{attribution:e,embedded:t,hideOverlays:a,nextContentItem:n,onComponentInteractive:o,playerModel:r,size:l,video:p,inModal:h}=this.props,{isFocusingPlayer:m,isHoveringPlayer:g,playerState:b,pointsEarned:v}=this.state,C=b===u.VideoPlayerState.PLAYING,P=b===u.VideoPlayerState.ENDED,k=b===u.VideoPlayerState.PAUSED;let _=v;const T=this.getCurrentTask();P&&T&&(_+=T.pointBounty);const w=(C||k)&&(g||m)&&!a;return s.createElement("div",{className:(0,i.css)(E.videoBackdrop)},s.createElement("div",{className:(0,i.css)(E.videoContainer)},s.createElement(f.default,{autoplay:this.getAutoplaySetting(),hidePlayButton:a,embedded:t,iframeId:"video_"+p.youtubeId,inModal:h,key:p.youtubeId,model:r,onComponentInteractive:o,onPlayerMouseEnter:this.handlePlayerMouseEnter,onPlayerMouseLeave:this.handlePlayerMouseLeave,onStateChange:this.handleStateChange,playerState:b,size:l,title:p.translatedTitle}),s.createElement("div",{"aria-hidden":!w,className:(0,i.css)(E.pointsContainer,w&&E.pointsContainerVisible),onFocus:this.handlePlayerFocus,onBlur:this.handlePlayerBlur,tabIndex:"0"},s.createElement("div",{className:(0,i.css)(E.points)},c.ngettext("%(num)s energy point","%(num)s energy points",_))),P&&null!==T&&s.createElement("div",{className:(0,i.css)(E.endOfVideoCardContainer)},s.createElement(d.default,{pointsEarned:_,nextContentItem:n,onButtonClick:this.handleNextButtonClick,onViewAllClick:this.handleViewAllClick,isLoggedIn:y.default.isLoggedIn,url:p.kaUrl,attribution:e}))))}}C.defaultProps={hideOverlays:!1,onComponentInteractive:()=>{},inModal:!1};const P=p.mixins.position("absolute",0,0,h.heightOfVideoplayerControls,0),E=i.StyleSheet.create({videoBackdrop:{background:"#000",boxSizing:"border-box",display:"flex",width:"100%",justifyContent:"center"},videoContainer:{position:"relative",width:"100%"},pointsContainer:(0,o.default)({alignItems:"flex-start",display:"flex",justifyContent:"center",opacity:0,pointerEvents:"none",transition:`opacity ${p.standardTransition}`,[p.queries.small]:{display:"none"}},P),pointsContainerVisible:{opacity:1},endOfVideoCardContainer:(0,o.default)({},P),points:(0,o.default)({},p.typography.bodySmall,{backgroundColor:"rgba(0, 0, 0, 0.7)",border:"1px solid rgba(255, 255, 255, 0.5)",borderBottomLeftRadius:4,borderBottomRightRadius:4,borderTop:"none",color:p.colors.white,padding:"16px 32px"})});var k=(0,r.compose)(m.default,g.default)(C);t.default=k},MYIS:function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=l(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var i=o?Object.getOwnPropertyDescriptor(e,r):null;i&&(i.get||i.set)?Object.defineProperty(n,r,i):n[r]=e[r]}n.default=e,a&&a.set(e,n);return n}(a("q1tI")),r=n(a("RNsf")),i=n(a("HAtO")),s=a("R0mg");function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(l=function(e){return e?a:t})(e)}var u=function({youtubeId:e,cacheWithoutReporters:t,children:a}){return t?o.createElement(r.default,{query:s.GET_OFFICIAL_CLARIFICATIONS_WITHOUT_REPORTER_QUERY,variables:{youtubeId:e}},a):o.createElement(i.default,{query:s.GET_OFFICIAL_CLARIFICATIONS_WITH_REPORTER_QUERY,variables:{youtubeId:e},fetchPolicy:"cache-first"},a)};t.default=u},UGk7:function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.VIDEO_SETTINGS_QUERY=void 0;var o=n(a("pVnL")),r=n(a("TSYQ")),i=a("Pk2J"),s=B(a("q1tI")),l=n(a("i8i4")),u=a("mR6N"),d=n(a("lTCR")),c=n(a("Pwnf")),p=a("JimW"),h=n(a("dFiz")),f=B(a("6OHE")),y=n(a("uEGL")),m=n(a("47Cx")),g=n(a("C7Yw")),b=a("8r+/"),v=n(a("HAtO")),C=n(a("mXPZ")),P=a("k818"),E=n(a("bhKz")),k=a("Lrab"),_=a("LrfN"),T=n(a("nVHT")),w=n(a("Jayu")),S=n(a("cfQQ")),O=n(a("4Du/")),R=a("SjSX"),I=a("Y8R6"),M=n(a("zWvX")),N=n(a("HbDC")),A=a("bHum"),x=a("cojK"),V=n(a("O+Xk")),j=B(a("HEOz"));let D,W,L,U=e=>e;function F(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(F=function(e){return e?a:t})(e)}function B(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=F(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var i=o?Object.getOwnPropertyDescriptor(e,r):null;i&&(i.get||i.set)?Object.defineProperty(n,r,i):n[r]=e[r]}return n.default=e,a&&a.set(e,n),n}const Y=121,z=Math.floor(60.5),q=(0,b.gqlOp)((0,d.default)(D||(D=U`
        query getLastSecond($readableVideoId: String!) {
            user {
                id
                contentItemProgresses(queryBy: {videoSlug: $readableVideoId}) {
                    ... on VideoItemProgress {
                        lastSecondWatched
                    }
                }
            }
        }
    `))),H=(0,b.gqlOp)((0,d.default)(W||(W=U`
    query getVideoPlayerSettings {
        user {
            id
            hasClasses
            hasPermission(name: "can_moderate_users")
            muteVideos
            noColorInVideos
            showCaptions
        }
    }
`)));t.VIDEO_SETTINGS_QUERY=H;const $=(0,b.gqlOp)((0,d.default)(L||(L=U`
        mutation updateMuteVideosSetting($muteVideos: Boolean!) {
            setSettings(muteVideos: $muteVideos) {
                user {
                    id
                    muteVideos
                }
            }
        }
    `))),G=()=>s.createElement("div",{className:`ka-video-player ${(0,u.css)(J.root)}`},s.createElement("div",{className:"video-spacer-container"},s.createElement("div",{className:"ka-video-player-container "+(0,u.css)(J.container,J.centeredWhenWindowed)},s.createElement("div",{"data-test-id":"video-player-placeholder",className:(0,u.css)(J.playButtonContainer)},s.createElement(T.default,null)))));class Q extends s.Component{constructor(e){super(e),this.fetchVideoSettings=()=>{this.props.gqlClient.query(H,{fetchPolicy:"cache-first"}).then((e=>{var t;null!=(t=e.data)&&t.user&&this.setState({hasClasses:e.data.user.hasClasses,isModerator:e.data.user.hasPermission,noColorInVideos:e.data.user.noColorInVideos,muteVideos:e.data.user.muteVideos,showCaptions:e.data.user.showCaptions})}))},this.updateMuteVideosSetting=e=>{C.default.hasProfile&&this.props.gqlClient.mutate($,{variables:{muteVideos:e}}).then((e=>{var t,a;const n=null==(t=e.data)||null==(a=t.setSettings)?void 0:a.user.muteVideos;!0!==n&&!1!==n||this.setState({muteVideos:n})}))},this.switchToFallbackPlayer=({fallbackPlayerIsTemporary:e,forceAutoplay:t}={})=>{this._mounted&&(this.setState({useFallbackPlayer:!0,forceAutoplay:t}),e||this.setFallbackFlags())},this.switchToYouTubePlayer=()=>{(0,P.markFallbackPlayerOptional)(),(0,I.reload)()},this.handleStateChange=e=>{const{data:t}=e,{onStateChange:a,model:n}=this.props,{isFullScreen:o}=this.state;a&&a(e),t===_.VideoPlayerState.ENDED&&o&&(0,P.exitFullscreen)(),n.setPlayerState(t)},this.handlePlayerReady=e=>{const{onComponentInteractive:t}=this.props,a={playerReady:!0};a.togglePlayback=e,t();const n=this._spacerContainer;var o,r;n&&(a.spacerContainerHeight=n.clientHeight,a.videoOffsetBottom=a.spacerContainerHeight+n.getBoundingClientRect().top+(null!=(o=null==(r=document.body)?void 0:r.scrollTop)?o:0));this._mounted&&this.setState(a)},this.handlePlayButtonClick=e=>{if(e.preventDefault(),this.props.model.player&&this.props.model.player.playVideo(),this._player){const e=l.default.findDOMNode(this._player);e&&e.focus&&e.focus()}},this.handleFullScreenChange=()=>{this._mounted&&this.setState({isFullScreen:!this.state.isFullScreen})},this.handleKeyDown=e=>{32===e.keyCode&&(e.preventDefault(),this.state.togglePlayback&&this.state.togglePlayback())},this.handleBlur=()=>{this._mounted&&this.setState({isFocusable:!1})},this.updateUserInfoStore=e=>{const t={type:"UPDATE_LAST_SECOND_WATCHED",readableId:this.getReadableId(),lastSecondWatched:this.getStartTime(e)};w.default.dispatch(t)};const{profile:t,location:a}=e;this._mounted=!1,this.state={isFocusable:!0,isFullScreen:!1,playerReady:!1,supportsTouchEvents:!1,togglePlayback:null,forceAutoplay:!1,spacerContainerHeight:0,useFallbackPlayer:(0,P.isYouTubeBlocked)(a),youTubeIsAvailable:!1,startTime:(0,R.getKaid)(t)?w.default.getState().lastSecondWatchedMap[e.model.get("readbleId")]:w.default.getState().lastSecondWatchedMap[e.model.get("readbleId")]||0,hasClasses:!1,isModerator:!1,noColorInVideos:!1,muteVideos:!0,showCaptions:!0}}componentDidMount(){this._mounted=!0;const{autoplay:e,markConversion:t,model:n,location:o}=this.props;t({id:"video_player_mounted",extra:{youtubeId:n.get("youtubeId")}}),(0,P.shouldUseFallbackPlayer)(o)&&this.setFallbackFlags(),(0,P.addFullscreenChangeHandler)(this.handleFullScreenChange),this.setState({supportsTouchEvents:g.default.touchevents}),a.e("3eD4").then(a.t.bind(null,"z782",7)).then((()=>{e&&this._root&&this._root.focus&&this._root.focus()})),this.fetchVideoSettings()}componentWillUnmount(){const{model:e}=this.props;e.setPlayerState(_.VideoPlayerState.PAUSED),(0,P.removeFullscreenChangeHandler)(this.handleFullScreenChange),this._mounted=!1}setFallbackFlags(){const{model:e,location:t}=this.props;e.set("playerType","html"),(0,P.markFallbackPlayerRequired)(),this.setState({useFallbackPlayer:!0}),(0,P.isYouTubeBlocked)(t)||(0,P.requireYouTubeAPI)((()=>this._mounted&&this.setState({youTubeIsAvailable:!0})),(()=>this._mounted&&this.setState({youTubeIsAvailable:!1})))}getStartTime(e){const t=e&&e.user&&e.user.contentItemProgresses||[];return 1===t.length&&t[0].lastSecondWatched||0}renderPlayButton(e){const{inModal:t}=this.props;return s.createElement("div",{className:(0,u.css)(J.playButtonContainer,t&&e&&J.playButtonContainerYouTubeLinkShowing),onClick:this.handlePlayButtonClick},s.createElement("button",{"aria-label":j._("Play video"),className:(0,u.css)(J.playButton),onClick:this.handlePlayButtonClick,"data-test-id":"video-play-button"},s.createElement("svg",{height:Y,width:Y},s.createElement("circle",{cx:z,cy:z,r:z,stroke:c.default.white,strokeWidth:"1",fill:c.default.blue}),s.createElement("path",{d:"M1.6,9.9C1.5,10,1.3,10,1.2,10C1.1,10,1,10,0.9,9.9C0.7,9.8,0.6,9.6,\n    0.6,9.4V0.6c0-0.2,0.2-0.4,0.4-0.5C1.1,0,1.4,0,1.6,0.1l7.6,4.5c0.2,0.1,\n    0.3,0.3,0.3,0.5c0,0.2-0.1,0.4-0.3,0.5L1.6,9.9z",fill:c.default.white,transform:" scale(4.375, 4.375) translate(9.75, 8.25) "}))))}renderPlayer(e){const{isFocusable:t,playerReady:a,supportsTouchEvents:n,useFallbackPlayer:r,youTubeIsAvailable:i,forceAutoplay:l,hasClasses:d,isModerator:c,noColorInVideos:h,muteVideos:f,showCaptions:y}=this.state,{autoplay:g,embedded:b,hidePlayButton:v,iframeId:C,inModal:_,model:T,onPlayerMouseEnter:w,onPlayerMouseLeave:S,playerState:O,size:R,title:I}=this.props,A={onMouseEnter:w,onMouseLeave:S},x=a&&(0,P.isUnstartedOrCued)(O)&&!(v||n),V=r&&i,D=(0,P.isIpadOldVersion)(navigator)&&f&&!(0,P.isUnstartedOrCued)(O)&&!r,W={autoplay:g,model:T,muteVideos:(!0!==b||!(0,P.isInApp)())&&f,showCaptions:y,onPlayerReady:this.handlePlayerReady,onStateChange:this.handleStateChange,ref:e=>this._player=e,startTime:Math.round(e),styles:Z,tabAccessible:!x,title:j._("Video: %(title)s",{title:I}),updateMuteVideosSetting:this.updateMuteVideosSetting};l&&(W.autoplay=!0);const L=!c;return s.createElement("div",{className:this.playerRootClasses(d),tabIndex:t&&"-1",onKeyDown:this.handleKeyDown,ref:e=>this._root=e},s.createElement("span",{className:"sr-only","data-test-id":"video-time-hidden"},j._("Current time:"),(0,k.formatTimeDisplay)(T.getVideoPosition(0,!0)),j._("Total duration:"),(0,k.formatTimeDisplay)(T.getDuration())),s.createElement("div",{className:"video-spacer-container "+(0,u.css)(J.spacerContainer),ref:e=>this._spacerContainer=e,style:this.getSpacerContainerStyle(R)},s.createElement("div",(0,o.default)({className:"ka-video-player-container "+(0,u.css)(J.container,J.centeredWhenWindowed,h&&J.noColorInVideos)},A),r?s.createElement(m.default,W):s.createElement(E.default,(0,o.default)({id:C,onError:this.switchToFallbackPlayer,size:R},W))),s.createElement("div",{className:(0,u.css)(J.clarifications)},s.createElement(N.default,{cached:L,videoModel:T})),D&&s.createElement(p.View,{style:J.unmuteButton},s.createElement(M.default,{onClick:()=>this.updateMuteVideosSetting(!1)})),x&&this.renderPlayButton(V)),V&&s.createElement("div",{className:(0,u.css)(J.switchToYouTubePlayerBanner,_&&J.switchToYouTubePlayerBannerModal)},s.createElement("a",{href:"javascript:void 0",onClick:this.switchToYouTubePlayer,className:(0,u.css)(J.switchToYouTubePlayerLink)},j._("Switch to full player"))))}getReadableId(){return this.props.model.get("readableId")||this.props.model.get("slug")}playerRootClasses(e){const{isFullScreen:t}=this.state,{embedded:a,inModal:n,playerState:o,size:i}=this.props,s=o===_.VideoPlayerState.ENDED;return(0,r.default)({fullscreen:t,"video-ended":s,"ka-video-player":!i},(0,u.css)(!i&&J.root,!i&&a&&J.embedRoot,!i&&n&&J.modalRoot,!i&&n&&e&&J.modalRootWithAssignments,s&&J.rootWhenVideoEnded,J.noOutline))}getSpacerContainerStyle(e){const{spacerContainerHeight:t}=this.state;return e?{width:e.width,height:e.height}:{height:t}}render(){const{startTime:e}=this.state;if("number"==typeof e)return this.renderPlayer(e);const t=this.getReadableId();return s.createElement(v.default,{query:q,variables:{readableVideoId:t},fetchPolicy:"cache-and-network",skip:!C.default.hasProfile,onCompleted:this.updateUserInfoStore},(({data:e,loading:t})=>{if(t)return s.createElement(G,null);const a=this.getStartTime(e);return this.renderPlayer(a)}))}}Q.defaultProps={startTime:0,hidePlayButton:!1,onPlayerMouseEnter:()=>{},onPlayerMouseLeave:()=>{},onComponentInteractive:()=>{}};const X=16/9,K=e=>"calc(160vh - "+X*e+"px)",J=u.StyleSheet.create({root:{margin:"auto",maxWidth:"100%",position:"relative",width:60*X+"vh"},embedRoot:{width:"177.77777777777777vh"},modalRoot:{width:K(120),[f.queries.small]:{width:"100%"}},modalRootWithAssignments:{width:K(120+f.constants.topBarHeightDesktop),[f.queries.small]:{width:"100%"}},rootWhenVideoEnded:{paddingBottom:0},container:{paddingBottom:"56.25%",position:"relative",width:"100%"},spacerContainer:{height:"auto !important"},playButtonContainer:{alignItems:"center",bottom:0,cursor:"pointer",display:"flex",justifyContent:"center",left:0,position:"absolute",right:0,top:0},playButtonContainerYouTubeLinkShowing:{[y.default.mdOrLarger]:{bottom:38}},playButton:{border:"1px solid white",borderRadius:"50%",boxShadow:"0 0 1px 1px white",cursor:"pointer",height:Y,width:Y,padding:0},video:{height:"100%",left:0,position:"absolute",top:0,width:"100%"},noColorInVideos:{filter:"grayscale()"},centeredWhenWindowed:{display:"block",margin:"auto",maxWidth:"none"},clarifications:{margin:"0 auto"},switchToYouTubePlayerBanner:{bottom:-28,fontSize:16,position:"absolute",right:8,textAlign:"right",zIndex:1},switchToYouTubePlayerBannerModal:{[y.default.mdOrLarger]:{position:"static",paddingRight:16,paddingBottom:8,paddingTop:8,background:c.default.white}},switchToYouTubePlayerLink:{textDecoration:"none",color:c.default.blue,":hover":{textDecoration:"underline"}},noOutline:{outline:"none"},unmuteButton:{position:"absolute",top:24,right:24}}),Z=[J.video,J.centeredWhenWindowed];var ee=(0,i.compose)(S.default,O.default,(0,A.withConversionContext)((e=>{const{model:t,title:a}=e,n=t.get("contentId")?{contentId:t.get("contentId")}:null;return{product:A.enums.Product.OTHER_PRODUCT,activity:A.enums.Activity.WATCHING,content:(0,o.default)({kind:A.enums.ContentKind.Video},n,{contentTitle:a})}})),x.withMarkConversion,(0,h.default)((({model:e})=>[e])),V.default)(Q);t.default=ee},"Vad+":function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.getYoutubeLanguage=t.YOUTUBE_LOCALES=void 0;var o=n(a("Q8Wn")),r=a("CR5c");const i=["aa","ab","af","am","ar","arc","as","ase","ay","az","ba","be","bg","bh","bi","bn","bo","br","bs","ca","cho","chr","co","cs","cy","da","de","de-AT","de-CH","de-DE","dz","el","en","en-CA","en-GB","en-IE","en-US","eo","es","es-419","es-ES","es-MX","es-US","et","eu","fa","fa-AF","fa-IR","ff","fi","fil","fj","fo","fr","fr-BE","fr-CA","fr-CH","fr-FR","fy","ga","gd","gl","gn","gu","ha","hak","hak-TW","hi","hi-Latn","hr","hu","hy","ia","id","ie","ig","ik","is","it","iu","iw","ja","jv","ka","kk","kl","km","kn","ko","ks","ku","ky","la","lb","ln","lo","lt","lus","lv","mas","mg","mi","mk","ml","mn","mo","mr","ms","mt","my","na","nan","nan-TW","ne","nl","nl-BE","nl-NL","no","nv","oc","om","or","pa","pl","ps","pt","pt-BR","pt-PT","qu","rm","rn","ro","ru","ru-Latn","rw","sa","scn","sd","sdp","sg","sh","si","sk","sl","sm","sn","so","sq","sr","sr-Cyrl","sr-Latn","ss","st","su","sv","sw","ta","te","tg","th","ti","tk","tl","tlh","tn","to","tr","ts","tt","tw","ug","uk","ur","uz","vi","vo","wo","xh","yi","yo","yue","yue-HK","zh-CN","zh-Hans","zh-Hant","zh-HK","zh-SG","zh-TW","zu"];t.YOUTUBE_LOCALES=i;t.getYoutubeLanguage=()=>{let e={he:"iw",nb:"no","zh-hans":"zh-CN","zh-hant":"zh-TW"}[o.default.kaLocale]||o.default.kaLocale;return e=e.replace(/-[^-]+$/,(e=>e.toUpperCase())),(0,r.bestMatchLocale)(i,e)}},Xj6v:function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a("mXPZ")),r=n(a("Q8Wn")),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=s(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var i=o?Object.getOwnPropertyDescriptor(e,r):null;i&&(i.get||i.set)?Object.defineProperty(n,r,i):n[r]=e[r]}n.default=e,a&&a.set(e,n);return n}(a("t1sY"));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(s=function(e){return e?a:t})(e)}const l="growth_teacher_content_upsell_dismissed";var u={dismiss:()=>i.createCookie(l,1),shouldShowPopup:e=>!(e=>!e&&!!i.readCookie(l))(e)&&!o.default.isLoggedIn&&!r.default.isMobile};t.default=u},YoHN:function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=d(a("q1tI")),r=a("mR6N"),i=d(a("6OHE")),s=n(a("wINb")),l=a("YssU");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(u=function(e){return e?a:t})(e)}function d(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=u(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var i=o?Object.getOwnPropertyDescriptor(e,r):null;i&&(i.get||i.set)?Object.defineProperty(n,r,i):n[r]=e[r]}return n.default=e,a&&a.set(e,n),n}class c extends o.Component{componentDidMount(){setTimeout(this.props.onComplete,this.props.duration)}render(){const{logoCaption:e,logoUrl:t}=this.props;return o.createElement("div",{className:(0,r.css)(p.root)},o.createElement("div",{className:(0,r.css)(p.centered)},o.createElement("img",{className:(0,r.css)(p.partnerLogo),alt:e,src:(0,s.default)(t)})))}}t.default=c;const p=r.StyleSheet.create({root:{backgroundColor:i.colors.black,display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:0,bottom:-l.heightOfVideoplayerControls,left:0,right:0},centered:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},partnerLogo:{maxHeight:"100%"}})},YssU:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.heightOfVideoplayerControls=void 0;t.heightOfVideoplayerControls=40},arXb:function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a("mR6N"),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=s(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var i=o?Object.getOwnPropertyDescriptor(e,r):null;i&&(i.get||i.set)?Object.defineProperty(n,r,i):n[r]=e[r]}n.default=e,a&&a.set(e,n);return n}(a("q1tI")),i=n(a("6wxr"));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(s=function(e){return e?a:t})(e)}class l extends r.Component{constructor(e){super(e),this.startCountdown=(e=performance.now())=>{this.setState({startTime:e},this.step)},this.handleComplete=(e,t={})=>{const{onComplete:a}=this.props;this.setState({offset:0}),cancelAnimationFrame(this._currentAnimationFrame),t.blockCompletionCallback||a(e,t.triggeredByTimer)},this.step=(e=0)=>{const{duration:t}=this.props,{startTime:a}=this.state;(e=Math.max(0,e-a))>=t?this.handleComplete(null,{triggeredByTimer:!0}):(this.setState({offset:e/t-1}),this._currentAnimationFrame=requestAnimationFrame(this.step))},this.state={initialStartTime:performance.now(),offset:0,startTime:0}}componentDidMount(){this.props.cancelled||this.startCountdown(this.state.initialStartTime)}UNSAFE_componentWillReceiveProps({cancelled:e}){const{cancelled:t}=this.props;t!==e&&(e?this.handleComplete(null,{blockCompletionCallback:!0}):this.startCountdown())}componentWillUnmount(){cancelAnimationFrame(this._currentAnimationFrame)}render(){const{background:e,cancelled:t,foreground:a,icon:n,iconSize:s,ringWeight:l,size:d,ariaLabel:c}=this.props,{offset:p}=this.state,h=50*(1-l/2),f=2*Math.PI*h,y=100*s+"%",m=50*(1-s)+"%";return r.createElement("svg",{className:(0,o.css)(u.container),height:d,onClick:this.handleComplete,version:"1.1",width:d,"aria-label":c},r.createElement("circle",{cx:"50%",cy:"50%",fill:e,r:"50%"}),!t&&r.createElement("circle",{className:(0,o.css)(u.ring),cx:"50%",cy:"50%",fill:"transparent",r:`${h}%`,stroke:a,strokeDasharray:`${f}%`,strokeWidth:53*l+"%",style:{strokeDashoffset:-f*p+"%"}}),r.createElement("svg",{height:y,version:"1.1",viewBox:"0 0 1 1",width:y,x:m,y:m},r.createElement(i.default,{icon:n,size:1,color:a})))}}l.defaultProps={background:"#000",cancelled:!1,duration:1e4,foreground:"#fff",iconSize:.3,ringWeight:.1,size:"100%"};const u=o.StyleSheet.create({container:{cursor:"pointer",display:"block",margin:"auto"},ring:{transform:"rotate(-90deg)",transformOrigin:"50% 50%"}});var d=l;t.default=d},bhKz:function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=y(a("q1tI")),r=a("mR6N"),i=y(a("4PhQ")),s=a("skGw"),l=n(a("8Kom")),u=a("k818"),d=a("LrfN"),c=y(a("whzC")),p=a("Vad+"),h=a("g8Be");function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(f=function(e){return e?a:t})(e)}function y(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=f(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var i=o?Object.getOwnPropertyDescriptor(e,r):null;i&&(i.get||i.set)?Object.defineProperty(n,r,i):n[r]=e[r]}return n.default=e,a&&a.set(e,n),n}class m extends o.Component{constructor(e){super(e),this._cancelTriggers=()=>{},this.initializePlayer=()=>{const{model:e,size:t,schedule:a}=this.props;a.timeout((()=>{this.fallbackIfPlayerNotReady()}),5e3),e.player=new window.YT.Player(this.props.id,{width:t?t.width:800,height:t?t.height:480,videoId:e.get("translatedYoutubeId"),playerVars:this.getPlayerVars(),events:{onReady:()=>{const{muteVideos:t,autoplay:a,onPlayerReady:n,onStateChange:o}=this.props;this.setState({playerReady:!0});const r=e.player;!0!==t&&null!==t||r.mute(),a&&r.playVideo();const s=r.getPlayerState()||d.VideoPlayerState.UNSTARTED;o({data:s}),n((()=>r.getPlayerState()===d.VideoPlayerState.PLAYING?r.pauseVideo():r.playVideo())),e.set("playerType","iframe"),e.setInitialPlayerState(s,r.getPlaybackRate()),r.addEventListener("captionschanged",(t=>{try{const a=t.data.languageCode;null!=a&&e.set({captionsLocale:a,useCaptionsDetectionFallback:!1})}catch(e){i.default.error("languageCode not set for captions.",i.Errors.Internal,e)}})),(0,u.linkTimestampsToModel)(r)},onStateChange:this.props.onStateChange,onPlaybackRateChange:t=>{e.setPlaybackRate(t.data)},onError:({data:e})=>{5===e?this.switchToFallback(!1,e):this.switchToFallback(!0,e)}}})},this.maybeUpdateUserMuteSetting=()=>{const{muteVideos:e,updateMuteVideosSetting:t}=this.props;if(null===e)return;const a=this.props.model.player;if(!a||!a.isMuted)return;const n=a.isMuted();n!==e&&t(n)},this.fallbackIfPlayerNotReady=()=>{this.state.playerReady||this.switchToFallback(!0,void 0,"Player did not initialize")},this.switchToFallback=(e=!0,t,a)=>{e?this.props.onError({fallbackPlayerIsTemporary:!0,forceAutoplay:!0}):this.props.onError(),(0,u.logYoutubeError)(this.props.title,this.youtubeIframeUrl(),t,a)},this.state={playerReady:!1}}componentDidMount(){this._cancelTriggers=(0,u.requireYouTubeAPI)(this.initializePlayer,this.props.onError),this.props.schedule.interval((()=>{this.maybeUpdateUserMuteSetting()}),500)}componentDidUpdate(e){const{player:t}=this.props.model;!1===this.props.muteVideos&&!1!==e.muteVideos&&t&&t.isMuted&&t.isMuted()&&t.unMute(),!1===this.props.showCaptions&&!1!==e.showCaptions&&t&&t.unloadModule&&t.unloadModule("captions")}componentWillUnmount(){this._cancelTriggers&&this._cancelTriggers()}getPlayerVars(){const{startTime:e,showCaptions:t}=this.props,a=(0,p.getYoutubeLanguage)()||"en",n=!1===t?0:1;return{controls:"1",enablejsapi:"1",modestbranding:"1",showinfo:"0",origin:l.default.origin,iv_load_policy:"3",html5:"1",fs:"1",rel:"0",hl:a,cc_lang_pref:a,cc_load_policy:n,start:e}}youtubeIframeUrl(){const{model:e}=this.props,t=e.get("translatedYoutubeId"),a=(0,s.encodeParams)(this.getPlayerVars());return c.safeLinkTo(`https://www.youtube-nocookie.com/embed/${t}/?${a}`)}render(){const{model:e,title:t,size:a,styles:n=[]}=this.props;return o.createElement("iframe",{className:"player ka-player-iframe centered-when-windowed "+r.css.apply(void 0,n),name:"ka-player-iframe",id:this.props.id,title:t,type:"text/html",frameBorder:0,onError:e=>{this.switchToFallback(!0,void 0,`iframe received an error: ${e.message}`)},allowFullScreen:!0,src:this.youtubeIframeUrl(),width:a?a.width:800,height:a?a.height:480,"data-youtubeid":e.get("youtubeId"),"data-translatedyoutubeid":e.get("translatedYoutubeId"),"data-translatedyoutubelang":e.get("translatedYoutubeLang"),"data-topicid":e.get("topicId"),tabIndex:this.props.tabAccessible?0:-1,allow:"autoplay"})}}m.defaultProps={styles:[]};var g=(0,h.withActionScheduler)(m);t.default=g},"n+md":function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a("pVnL")),r=a("mR6N"),i=w(a("q1tI")),s=n(a("lTCR")),l=a("Pk2J"),u=n(a("Pwnf")),d=n(a("wa3X")),c=a("Y8R6"),p=n(a("arXb")),h=n(a("YoHN")),f=w(a("zbaY")),y=w(a("hDgO")),m=n(a("Xj6v")),g=a("bHum"),b=a("cojK"),v=n(a("4Du/")),C=n(a("cfQQ")),P=n(a("O+Xk")),E=a("8r+/"),k=w(a("HEOz"));let _;function T(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(T=function(e){return e?a:t})(e)}function w(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=T(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var i=o?Object.getOwnPropertyDescriptor(e,r):null;i&&(i.get||i.set)?Object.defineProperty(n,r,i):n[r]=e[r]}return n.default=e,a&&a.set(e,n),n}const{pureXsMax:S}=y,O=(0,E.gqlOp)((0,s.default)(_||(_=(e=>e)`
    mutation UpdateAutocontinueSetting($autocontinueOn: Boolean!) {
        setSettings(autocontinueOn: $autocontinueOn) {
            user {
                id
                autocontinueOn
            }
        }
    }
`)));class R extends i.Component{constructor(...e){super(...e),this.state={cancelAutoContinue:!(this.props.profile&&this.props.profile.get("autocontinueOn")),showSponsorRecognition:!!this.props.attribution},this.handleButtonClick=e=>{e&&e.preventDefault(),this.props.onButtonClick(),this.props.markConversion({id:"video_end_card_cta",extra:{isPhantom:!this.props.isLoggedIn,type:this.props.nextContentItem?"next":"replay"}})},this.handleViewAllClick=e=>{e.preventDefault(),this.props.onViewAllClick()},this.logSignInClicked=e=>{this.props.markConversion({id:"video_end_card_signin_clicked"})},this.updateAutoplaySetting=e=>{this.props.gqlClient.mutate(O,{variables:{autocontinueOn:e}}),this.setState({cancelAutoContinue:!e})}}componentDidMount(){this.props.markConversion({id:"video_end_card_seen"}),this.props.isLoggedIn||this.props.markConversion({id:"video_end_card_signin_seen"})}renderEarnings(){const{pointsEarned:e}=this.props;if(!e)return null;const t=i.createElement("span",{className:(0,r.css)(x.earned)},k.$_("%(numPoints)s energy points",{numPoints:e}));return k.$_("You earned %(pointsPart)s!",{pointsPart:t})}renderIcon(e,t){const{isLoggedIn:a,nextContentItem:n,profile:o}=this.props,{cancelAutoContinue:s}=this.state,l=(0,r.css)(x.icon,!a&&x.iconTiny,!(o&&o.get("autocontinueOn"))&&x.pulse);return i.createElement("div",{className:l},i.createElement(p.default,{ariaLabel:e,background:u.default.blue,cancelled:s||!n,icon:t,onComplete:this.handleButtonClick}))}renderUpNext(){const{nextContentItem:e}=this.props,{cancelAutoContinue:t}=this.state;return e?i.createElement("div",{className:(0,r.css)(x.upNext)},i.createElement("button",{className:(0,r.css)(x.iconLabel,x.upNextLabel),onClick:this.handleButtonClick},k._("Up next")),i.createElement("div",{className:(0,r.css)(x.upNextTitle)},e.translatedTitle),this.renderIcon(k._("Play the next video"),"M7.7,1.3c0-0.7,0.6-1.2,1.2-1.2c0.7,0,1.2,0.6,1.2,1.2v7.3c0,0.7-0.6,\n    1.2-1.2,1.2c-0.7,0-1.2-0.6-1.2-1.2V1.3z M0.2,0.9c0-0.4,0.3-0.6,0.6-0.3\n    l5.5,4c0.3,0.2,0.3,0.6,0,0.9l-5.5,4C0.5,9.7,0.2,9.6,0.2,9.1V0.9z"),t?i.createElement("button",{className:(0,r.css)(x.iconLabel),onClick:()=>this.updateAutoplaySetting(!0)},k._("Turn on autoplay")):i.createElement("button",{className:(0,r.css)(x.iconLabel),onClick:()=>this.updateAutoplaySetting(!1)},k._("Cancel"))):i.createElement("div",{className:(0,r.css)(x.upNext)},this.renderIcon(k._("Replay this video"),"M9.8,1v2.8c0,0.1,0,0.2-0.1,0.3C9.6,4.2,9.5,4.2,9.4,4.2H6.6c-0.2,\n    0-0.3-0.1-0.4-0.2c-0.1-0.2,0-0.3,0.1-0.4l0.9-0.9C6.6,2.1,5.8,1.8,5,1.8\n    C4.6,1.8,4.2,1.9,3.8,2C3.4,2.2,3,2.4,2.7,2.7C2.4,3,2.2,3.4,2,3.8C1.9,\n    4.2,1.8,4.6,1.8,5c0,0.4,0.1,0.8,0.3,1.2c0.2,0.4,0.4,0.7,0.7,1C3,7.6,\n    3.4,7.8,3.8,8C4.2,8.1,4.6,8.2,5,8.2c0.5,0,1-0.1,1.4-0.3C6.9,7.7,7.2,\n    7.4,7.5,7c0,0,0.1-0.1,0.1-0.1c0.1,0,0.1,0,0.2,0.1l0.9,0.9c0,0,0.1,0.1,\n    0.1,0.1c0,0.1,0,0.1,0,0.1c-0.5,0.6-1,1-1.7,1.3C6.4,9.7,5.7,9.8,5,\n    9.8c-0.7,0-1.3-0.1-1.9-0.4C2.5,9.2,2,8.8,1.6,8.4C1.2,8,0.8,7.5,0.6,\n    6.9C0.3,6.3,0.2,5.7,0.2,5c0-0.7,0.1-1.3,0.4-1.9c0.3-0.6,0.6-1.1,1-1.5s\n    0.9-0.8,1.5-1C3.7,0.3,4.3,0.2,5,0.2c0.6,0,1.2,0.1,1.8,0.3c0.6,0.2,1.1,\n    0.6,1.5,1l0.8-0.8c0.1-0.1,0.3-0.2,0.4-0.1C9.7,0.7,9.8,0.8,9.8,1"),i.createElement("button",{className:(0,r.css)(x.iconLabel),onClick:this.handleButtonClick},k._("Replay this video")))}renderMain(){return i.createElement("div",{className:(0,r.css)(x.main)},this.renderUpNext())}render(){const{isLoggedIn:e,location:{queryParams:{forceContentUpsellPopup:t}}}=this.props,a=m.default.shouldShowPopup(t),n=k._("Sign in to save your progress"),s=i.createElement(d.default,{id:"signin-button",style:x.signup,href:"/signup",onClick:this.logSignInClicked},n);return this.state.showSponsorRecognition?i.createElement("div",{className:(0,r.css)(x.container)},i.createElement(h.default,(0,o.default)({},this.props.attribution,{duration:4e3,onComplete:()=>{this.setState({showSponsorRecognition:!1})}}))):i.createElement("div",{className:(0,r.css)(x.container)},i.createElement("div",{className:(0,r.css)(x.top)},!a&&this.renderEarnings(),!a&&!(0,c.isInIframe)()&&!e&&s),this.renderMain())}}var I=(0,l.compose)(v.default,C.default,(0,g.withConversionContext)({activity:g.enums.Activity.WATCHING}),b.withMarkConversion,P.default)(R);t.default=I;const M=parseInt(S),N=`@media (max-width: ${M}px), (max-height: ${Math.floor(M/(16/9)/.6)}px)`,A="@media (max-width: 374px), (max-height: 351px)",x=r.StyleSheet.create({container:(0,o.default)({},f.typography.bodySmall,{alignItems:"center",background:"rgba(17, 17, 17, 0.8)",color:f.colors.white,display:"flex",flexDirection:"column",height:"100%",justifyContent:"flex-start",position:"relative",textAlign:"center",WebkitFontSmoothing:"antialiased"}),main:{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"},earned:{fontFamily:"inherit",fontWeight:"bold",textDecoration:"underline"},top:{paddingTop:16,[N]:(0,o.default)({},f.typography.labelSmall,{paddingTop:10})},signup:{display:"flex",marginTop:18,[N]:{marginTop:6}},icon:{alignItems:"center",borderRadius:"50%",display:"flex",flexShrink:0,height:78,justifyContent:"center",margin:"18px auto 9px",width:78,[N]:{height:46,margin:"8px auto 0",width:46}},iconTiny:{[A]:{height:30,margin:"4px auto 0",width:30}},pulse:{animationDirection:"alternate",animationDuration:"1.5s",animationIterationCount:"infinite",animationName:{from:{transform:"scale(1)"},to:{transform:"scale(1.1)"}},animationTimingFunction:"ease-in"},upNext:(0,o.default)({},f.typography.labelMedium,{display:"flex",flexDirection:"column",flexGrow:1,fontFamily:f.fonts.regular,justifyContent:"center",[N]:(0,o.default)({},f.typography.labelSmall)}),upNextLabel:{[`@media (max-width: ${S}), (max-height: 351px)`]:{display:"none"}},iconLabel:{background:"none",border:0,color:"inherit",cursor:"pointer",display:"inline-block",fontSize:"inherit",margin:"0 auto",padding:"6px 10px",":hover":{background:"rgba(255, 255, 255, 0.25)"}},upNextTitle:(0,o.default)({},f.typography.labelLarge,{marginBottom:12,marginTop:4,[N]:(0,o.default)({},f.typography.labelMedium,{marginBottom:0,marginTop:0}),[A]:(0,o.default)({},f.typography.labelSmall)})})},zWvX:function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=u(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var i=o?Object.getOwnPropertyDescriptor(e,r):null;i&&(i.get||i.set)?Object.defineProperty(n,r,i):n[r]=e[r]}n.default=e,a&&a.set(e,n);return n}(a("q1tI")),r=a("mR6N"),i=n(a("wa3X")),s=a("JimW"),l=n(a("71Tp"));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(u=function(e){return e?a:t})(e)}const d={medium:"M12 2L6 8H2V16H6L12 22V2ZM14 16C16.2091 16 18 14.2091 18 12C18 9.79086 16.2091 8 14 8V16ZM22 12C22 16.838 18.5645 20.8735 14 21.8V20.777C18.008 19.8676 21 16.2832 21 12C21 7.71686 18.008 4.13251 14 3.22305V2.20007C18.5645 3.12661 22 7.16212 22 12Z"},c=r.StyleSheet.create({inline:{display:"inline-block"}});var p=e=>o.createElement(s.View,{style:c.inline},o.createElement(i.default,{icon:d,onClick:e.onClick,light:!0,style:c.inline},l.default.unmuteButton));t.default=p}}]);
//# sourceMappingURL=../../sourcemaps/en/Im4y.1a46eaabb3319e05c240.js.map