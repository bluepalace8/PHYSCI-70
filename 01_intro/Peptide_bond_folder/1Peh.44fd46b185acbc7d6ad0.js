(window.webpackJsonp=window.webpackJsonp||[]).push([["1Peh"],{"+lle":function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n("pVnL")),o=d(n("q1tI")),i=s(n("17x9")),a=s(n("wk+a")),l=s(n("5pch")),u=d(n("HEOz"));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function d(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(s,o,i):s[o]=e[o]}return s.default=e,n&&n.set(e,s),s}const c="start-ref-",h="end-ref-",f={display:"inline-block",width:0,visibility:"hidden"},g={display:"inline",whiteSpace:"nowrap"},m={display:"inline-block",color:"rgb(255, 255, 255)",backgroundColor:"rgb(90, 90, 90)",paddingLeft:10,paddingRight:10,userSelect:"none",WebkitUserSelect:"none"},y={display:"inline-block",color:"rgb(255, 255, 255)",backgroundColor:"rgb(90, 90, 90)",userSelect:"none",WebkitUserSelect:"none",width:22,height:22,borderRadius:"50%",textAlign:"center"};class v extends o.Component{constructor(...e){super(...e),this.getRefContent=()=>this.props.refContent}render(){return o.createElement("span",{style:f},u.doNotTranslate("_"))}}v.propTypes={refContent:i.default.node.isRequired};class b extends o.Component{render(){return o.createElement("span",{style:f},u.doNotTranslate("_"))}}const w={newline:a.default.defaultRules.newline,paragraph:a.default.defaultRules.paragraph,escape:a.default.defaultRules.escape,passageFootnote:{order:a.default.defaultRules.escape.order+.1,match:a.default.inlineRegex(/^\^/),parse:(e,t,n)=>{const s=n.lastFootnote.id+1,r={id:s,text:1===s?"*":""+s};return"*"===n.lastFootnote.text&&(n.lastFootnote.text=""+n.lastFootnote.id),n.lastFootnote=r,r},react:(e,t,n)=>o.createElement("sup",{key:n.key},e.text)},refStart:{order:a.default.defaultRules.escape.order+.2,match:function(e,t){const n=/^\{\{/.exec(e);if(n){let t=2,s=0;for(;t<e.length;){const n=e.slice(t,t+2);if("{{"===n)s++,t++;else if("}}"===n){if(!(s>0))break;s--,t++}t++}const r=e.slice(2,t);return[n[0],r]}return null},parse:(e,t,n)=>{if(!n.useRefs)return{ref:null,refContent:null};const s=n.lastRef+1;n.lastRef=s,n.currentRef.push(s);return{ref:s,refContent:t("(“"+e[1]+"”)\n\n",l.default.defaults({useRefs:!1},k))}},react:(e,t,n)=>{if(null==e.ref)return null;const s=t(e.refContent,{});return o.createElement(v,{ref:c+e.ref,key:c+e.ref,refContent:s})}},refEnd:{order:a.default.defaultRules.escape.order+.3,match:a.default.inlineRegex(/^\}\}/),parse:(e,t,n)=>{if(!n.useRefs)return{ref:null};return{ref:n.currentRef.pop()||null}},react:(e,t,n)=>null!=e.ref?o.createElement(b,{ref:h+e.ref,key:h+e.ref}):null},squareLabel:{order:a.default.defaultRules.escape.order+.4,match:a.default.inlineRegex(/^\[\[(\w+)\]\]( *)/),parse:(e,t,n)=>(n.firstQuestionRef||(n.firstQuestionRef=e[1]),{content:e[1],space:e[2].length>0}),react:(e,t,n)=>[o.createElement("span",{key:"visual-square",className:"perseus-passage-square-label",style:g,"aria-hidden":"true"},o.createElement("span",{style:m},e.content)),o.createElement("span",{key:"alt-text",className:"perseus-sr-only"},u.$_("[Marker for question %(number)s]",{number:e.content})),e.space?" ":null]},circleLabel:{order:a.default.defaultRules.escape.order+.5,match:a.default.inlineRegex(/^\(\((\w+)\)\)( *)/),parse:(e,t,n)=>({content:e[1],space:e[2].length>0}),react:(e,t,n)=>[o.createElement("span",{key:"visual-circle",className:"perseus-passage-circle-label",style:g,"aria-hidden":!0},o.createElement("span",{style:y},e.content)),o.createElement("span",{key:"alt-text",className:"perseus-sr-only"},u.$_("[Circle marker %(number)s]",{number:e.content})),e.space?" ":null]},squareBracketRef:{order:a.default.defaultRules.escape.order+.6,match:a.default.inlineRegex(/^\[(\d+)\]( *)/),parse:(e,t,n)=>(n.firstSentenceRef||(n.firstSentenceRef=e[1]),{content:e[1],space:e[2].length>0}),react:(e,t,n)=>[o.createElement("span",{key:"visual-brackets",className:"perseus-passage-bracket-label","aria-hidden":"true"},"[",e.content,"]"),o.createElement("span",{key:"alt-text",className:"perseus-sr-only"},u.$_("[Sentence %(number)s]",{number:e.content})),e.space?" ":null]},highlight:{order:a.default.defaultRules.escape.order+.7,match:a.default.inlineRegex(/^{highlighting.start}(.+?){highlighting.end}/),parse:(e,t,n)=>({content:e[1]}),react:(e,t,n)=>[o.createElement("span",{key:0,className:"perseus-highlight"},e.content)]},reviewHighlight:{order:a.default.defaultRules.escape.order+.7,match:a.default.inlineRegex(/^{review-highlighting.start}(.+?){review-highlighting.end}/),parse:(e,t,n)=>({content:e[1]}),react:(e,t,n)=>[o.createElement("span",{key:0,className:"perseus-review-highlight"},e.content)]},strong:a.default.defaultRules.strong,u:a.default.defaultRules.u,em:a.default.defaultRules.em,del:a.default.defaultRules.del,text:(0,r.default)({},a.default.defaultRules.text,{react:(e,t,n)=>o.createElement("span",{key:n.key},e.content)})},k={currentRef:[],useRefs:!0,lastRef:0,lastFootnote:{id:0,text:""}},M=a.default.parserFor(w);var x={parse:(e,t)=>{t=t||{};return M(e+"\n\n",l.default.extend(t,k))},output:a.default.reactFor(a.default.ruleOutput(w,"react")),START_REF_PREFIX:c,END_REF_PREFIX:h,_rulesForTesting:w};t.default=x},"/Qgg":function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n("pVnL")),o=s(n("TSYQ")),i=h(n("q1tI")),a=s(n("5pch")),l=n("j8wP"),u=h(n("+jAD")),p=s(n("Atlv")),d=n("zahm");function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function h(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(s,o,i):s[o]=e[o]}return s.default=e,n&&n.set(e,s),s}class f extends i.Component{constructor(...e){super(...e),this.change=(...e)=>u.change.apply(this,e),this.getUserInput=()=>this.refs.renderer.getUserInput(),this.getSerializedState=()=>this.refs.renderer.getSerializedState(),this.restoreSerializedState=(e,t)=>(this.refs.renderer.restoreSerializedState(e,t),null),this.simpleValidate=e=>this.refs.renderer.score(),this.getInputPaths=()=>this.refs.renderer.getInputPaths(),this.setInputValue=(e,t,n)=>this.refs.renderer.setInputValue(e,t,n),this.focus=()=>this.refs.renderer.focus(),this.focusInputPath=e=>{this.refs.renderer.focusPath(e)},this.blurInputPath=e=>{this.refs.renderer.blurPath(e)},this.showRationalesForCurrentlySelectedChoices=()=>{this.refs.renderer.showRationalesForCurrentlySelectedChoices()}}componentDidMount(){this.forceUpdate()}render(){const e=a.default.extend({},l.ApiOptions.defaults,this.props.apiOptions,{onFocusChange:(e,t)=>{t&&this.props.onBlur(t),e&&this.props.onFocus(e)}}),t=a.default.indexOf(this.props.findWidgets("group"),this),n=this.props.apiOptions.groupAnnotator(t,this.props.widgetId),s=this.refs.renderer&&this.refs.renderer.score(),u=s&&"invalid"!==s.type,d=s&&"invalid"===s.type;return i.createElement("div",{className:(0,o.default)({"perseus-group":!0,"perseus-group-valid-answer":u,"perseus-group-invalid-answer":d})},n,i.createElement(p.default,(0,r.default)({},this.props,{ref:"renderer",apiOptions:e,findExternalWidgets:this.props.findWidgets,reviewMode:!!this.props.reviewModeRubric,onInteractWithWidget:e=>{this.refs.renderer&&this.change("widgets",this.refs.renderer.props.widgets)},linterContext:this.props.linterContext})),this.props.icon&&i.createElement("div",{className:"group-icon"},this.props.icon))}}f.defaultProps={content:"",widgets:{},images:{},linterContext:d.linterContextDefault};var g={name:"group",displayName:"Group (SAT only)",widget:f,traverseChildWidgets:function(e,t){return a.default.extend({},e,t(e))},hidden:!1,isLintable:!0};t.default=g},"1I17":function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Molecule=void 0;var r=d(n("q1tI")),o=s(n("17x9")),i=s(n("JtQr")),a=s(n("KSWw")),l=s(n("HQqP")),u=d(n("HEOz"));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function d(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(s,o,i):s[o]=e[o]}return s.default=e,n&&n.set(e,s),s}const{layout:c}=a.default,h=l.default.parse,f=l.default.ParseError;class g extends r.Component{constructor(...e){super(...e),this.state={parsedSmiles:null,error:null},this.stateFromSmiles=e=>{try{this.setState({parsedSmiles:h(e),error:null})}catch(e){if(!(e instanceof f))throw e;this.setState({error:e.message})}},this.setCanvasBounds=(e,t)=>{const n=Math.max.apply(Math,t.map((e=>e.pos?e.pos[0]:-1/0))),s=Math.max.apply(Math,t.map((e=>e.pos?e.pos[1]:-1/0))),r=Math.min.apply(Math,t.map((e=>e.pos?e.pos[0]:1/0))),o=Math.min.apply(Math,t.map((e=>e.pos?e.pos[1]:1/0))),i=n-r+60,a=s-o+60;return e.width=i,e.height=a,[30-r,30-o]},this.canvasRender=()=>{if(this.state.error||!this.state.parsedSmiles)return;const e=c(this.state.parsedSmiles,this.props.rotationAngle),t=this.refs.canvas,n=this.setCanvasBounds(t,e),s=t.getContext("2d");s.clearRect(0,0,t.width,t.height),s.save(),s.translate(n[0],n[1]),(0,i.default)(s,e),s.restore()}}UNSAFE_componentWillMount(){this.stateFromSmiles(this.props.smiles)}componentDidMount(){this.canvasRender()}UNSAFE_componentWillReceiveProps(e){this.stateFromSmiles(e.smiles)}componentDidUpdate(){this.canvasRender()}render(){let e=r.createElement("canvas",{className:"molecule-canvas",id:this.props.id+"-molecule",ref:"canvas"},u.$_("A molecular structure drawing. SMILES notation: %(content)s",{content:this.props.smiles}));return this.state.error&&(e=r.createElement("div",{className:"error"},this.state.error)),r.createElement("div",{className:"molecule-canvas"},e)}}t.Molecule=g,g.propTypes={id:o.default.string.isRequired,rotationAngle:o.default.number,smiles:o.default.string};class m extends r.Component{constructor(...e){super(...e),this.simpleValidate=()=>({type:"points",earned:0,total:0,message:null}),this.getUserInput=()=>[],this.validate=(e,t)=>({type:"points",earned:0,total:0,message:null})}render(){return r.createElement(g,{id:this.props.widgetId,smiles:this.props.smiles,rotationAngle:this.props.rotationAngle})}}m.propTypes={rotationAngle:o.default.number,smiles:o.default.string,widgetId:o.default.string},m.defaultProps={rotationAngle:0};var y={name:"molecule-renderer",displayName:"Molecule renderer",hidden:!0,widget:m};t.default=y},"473Y":function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=d(n("q1tI")),o=d(n("HEOz")),i=s(n("UDUP")),a=s(n("fQFx")),l=n("OgJR"),u=s(n("czma"));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function d(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(s,o,i):s[o]=e[o]}return s.default=e,n&&n.set(e,s),s}class c extends r.PureComponent{_handleAddHighlight(e){this.props.onAddHighlight(e);const t=document.getSelection();t&&t.collapseToEnd()}_selectionIsValid(e){if(!e)return!1;const{contentNode:t}=this.props,n=new Range;n.selectNodeContents(t);const s=new Range;s.setStart(e.focusNode,e.focusOffset),s.collapse(!0);return(0,l.rangesOverlap)(n,s)}render(){return r.createElement(u.default,{buildHighlight:this.props.buildHighlight,enabled:this.props.editable},((e,t)=>r.createElement("div",null,r.createElement(i.default,{editable:this.props.editable&&!this._selectionIsValid(e),highlights:this.props.highlights,offsetParent:this.props.offsetParent,onRemoveHighlight:this.props.onRemoveHighlight,zIndexes:this.props.zIndexes}),this._selectionIsValid(e)&&!t&&r.createElement(a.default,{label:o._("Add highlight"),onClick:()=>this._handleAddHighlight(e.proposedHighlight),focusNode:e.focusNode,focusOffset:e.focusOffset,offsetParent:this.props.offsetParent}))))}}var h=c;t.default=h},"4s5V":function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n("pVnL")),o=n("mR6N"),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(s,o,i):s[o]=e[o]}s.default=e,n&&n.set(e,s);return s}(n("q1tI")),a=s(n("5pch")),l=n("6OHE"),u=s(n("6wxr")),p=s(n("MG0i")),d=n("/4Qb"),c=s(n("Atlv"));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}class f extends i.Component{constructor(...e){super(...e),this.state={isInputFocused:!1}}focusInput(){this._input&&this._input.focus()}handleClick(e){const{checked:t,onChange:n}=this.props;e.preventDefault(),this.focusInput(),n(!t)}handleKeyDown(e){const{onFocusPrevAnswer:t,onFocusNextAnswer:n}=this.props;switch(e.key){case"ArrowUp":e.preventDefault(),t();break;case"ArrowDown":e.preventDefault(),n()}}handleInputChange(e){e.preventDefault()}handleInputFocus(){this.setState({isInputFocused:!0})}handleInputBlur(){this.setState({isInputFocused:!1})}renderCheckmark(){const{checked:e}=this.props;return i.createElement("span",{className:(0,o.css)(m.checkmarkContainer)},e&&i.createElement(u.default,{icon:d.iconCheckMedium,size:16,color:l.colors.gray17}))}render(){const{content:e,checked:t,groupName:n,index:s,inputType:r}=this.props,{isInputFocused:a}=this.state,l=`${n}-${s}`;return i.createElement("div",{className:(0,o.css)(m.answerChoice,a&&m.answerFocused),onClick:e=>this.handleClick(e),onKeyDown:e=>this.handleKeyDown(e)},i.createElement("span",{className:(0,o.css)(m.answerInputWrapper)},i.createElement("input",{className:(0,o.css)(p.default.perseusSrOnly),checked:t,name:n,id:l,type:r,onChange:e=>this.handleInputChange(e),onFocus:()=>this.handleInputFocus(),onBlur:()=>this.handleInputBlur(),ref:e=>this._input=e}),this.renderCheckmark()),i.createElement("label",{htmlFor:l},i.createElement(c.default,{content:e})))}}class g extends i.Component{constructor(e){super(e),this._choices=[],this.state={groupName:a.default.uniqueId("answer_choices_")}}focusAnswer(e=0){const t=this.props.choices.length;e<0?e+=t:e>=t&&(e-=t);const n=this._choices[e];n&&n.focusInput()}onAnswerChange(e,t){const{choices:n,multipleSelect:s,onChange:r}=this.props,o=[];for(let r=0;r<n.length;r++)o.push(s?r===e?t:n[r].checked:r===e&&t);r(o)}onFocusAnswer(e){this.focusAnswer(e)}render(){const{choices:e,multipleSelect:t}=this.props,{groupName:n}=this.state;return i.createElement("fieldset",null,e.map(((e,s)=>i.createElement(f,(0,r.default)({},e,{key:e.content,groupName:n,index:s,inputType:t?"checkbox":"radio",onChange:e=>this.onAnswerChange(s,e),onFocusPrevAnswer:()=>this.onFocusAnswer(s-1),onFocusNextAnswer:()=>this.onFocusAnswer(s+1),ref:e=>this._choices[s]=e})))))}}t.default=g;const m=o.StyleSheet.create({answerChoice:{display:"flex",alignItems:"center",userSelect:"none",padding:"10px 16px 10px 0px",fontWeight:"bold",border:"solid 2px transparent",borderRadius:2,":active":{backgroundColor:"rgba(33, 36, 44, 0.08)"}},answerFocused:{borderColor:"#1865f2",":active":{borderColor:"transparent"}},answerInputWrapper:{marginRight:8},checkmarkContainer:{display:"flex",position:"relative",width:16,height:16,marginLeft:8}})},"7O7Y":function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n("pVnL")),o=M(n("q1tI")),i=s(n("17x9")),a=s(n("i8i4")),l=s(n("5pch")),u=n("eAf/"),p=M(n("+jAD")),d=n("j8wP"),c=s(n("p8fL")),h=s(n("Giaf")),f=s(n("M++g")),g=s(n("7xiW")),m=s(n("uBl0")),y=s(n("yfnS")),v=s(n("XwLL")),b=s(n("qoj5")),w=M(n("HEOz"));function k(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(k=function(e){return e?n:t})(e)}function M(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=k(t);if(n&&n.has(e))return n.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(s,o,i):s[o]=e[o]}return s.default=e,n&&n.set(e,s),s}const{assert:x}=c.default,{seededRNG:P}=m.default,{Path:C,Arc:E,Circle:O,Label:_,Line:T,MovablePoint:S,MovableLine:I}=h.default;class N extends o.Component{constructor(...e){super(...e),this._renderThresholdLine=()=>{const e=[0,this._range()[1][1]],t=l.default.map(e,(e=>[this.state.threshold,e]));return o.createElement(I,{onMove:this.handleMouseInteraction},l.default.map(t,((e,t)=>o.createElement(S,{key:t,static:!0,coord:e,normalStyle:{stroke:"none",fill:"none"}}))))},this._renderCircle=()=>{const e=this.props.data,t=l.default.reduce(e,((e,t)=>e+t),0),n=l.default.reduce(e,((e,t,n)=>null!=this.state.threshold&&n<=this.state.threshold?e+t:e),0),s=n/t,r=1e-5,i=[this.props.box[0]-30,30],a=this._range()[0],u=Math.min(Math.max(this.state.threshold,a[0]),a[1]).toFixed(2);return[s>0&&(()=>{const e={key:"below",center:i,radius:20,startAngle:0,endAngle:s<1?360*s:359.99999,sector:1!==s,unscaled:!0,style:{fill:y.default.LIGHT_RED,stroke:y.default.RED}};return o.createElement(E,e)})(),s<1&&(()=>{const e={key:"above",center:i,radius:20,startAngle:s>0?360*s:r,endAngle:360,sector:0!==s,unscaled:!0,style:{fill:y.default.LIGHT_BLUE,stroke:y.default.BLUE}};return o.createElement(E,e)})(),(()=>{const e={key:"label",coord:[i[0],i[1]+30],text:n+" of "+t+" results below "+u+"%",direction:"center",tex:!1,unscaled:!0,style:{fontSize:"12px"}};return o.createElement(_,e)})()]},this._renderData=()=>{const e=this.props.data;this._range();return l.default.map(e,((e,t)=>{if(!e)return;const n=null!=this.state.threshold&&t<=this.state.threshold,s={fill:n?y.default.LIGHT_RED:y.default.LIGHT_BLUE,stroke:n?y.default.RED:y.default.BLUE},r=[[t,0],[t,e],[t+1,e],[t+1,0]];return o.createElement(C,{key:t,coords:r,style:s})}))},this._setupGraphie=(e,t)=>{const n=t.data,s=t.range,r=t.scale,o=s[0][1]-s[0][0],i=s[1][1]-0,a=Math.ceil(i/20);if(l.default.each(l.default.range(0,s[1][1],a),(t=>{n&&e.label([s[0][0],t],v.default.roundToApprox(t,2),"left",!0),e.line([s[0][0],t],[s[0][1],t],{stroke:"#000",strokeWidth:1,opacity:.3})})),n){const t=15,n=Math.ceil(o/t);l.default.each(l.default.range(s[0][0],s[0][1],n),(t=>{e.label([t,0],u.number.round(t,2),"below",!0);e.line([t,0],[t,-8/r[1]],{stroke:"#000",strokeWidth:1})}))}const p=[s[0][0],0],d=[s[0][0],s[1][1]];e.line(p,d,{stroke:"#000",strokeWidth:2,opacity:1});const c=s[0][0]+o/2,h=n?25:0;e.label([c,-h/r[1]],t.xAxisLabel,"below",!1).css("font-weight","bold");const f=0+i/2,g=n?55:28;e.label([s[0][0]-g/r[0],f],t.yAxisLabel,"center",!1).css("font-weight","bold").css("-webkit-transform","rotate(-90deg)")},this.handleMouseInteraction=e=>{this.setState({threshold:e[0]})},this._range=e=>(e=e||this.props).data?this._getRangeForData(e.data):[[0,100],[-1,10]],this._getRangeForData=e=>{const t=l.default.indexOf(e,l.default.find(e,(e=>e>0))),n=Math.max(0,t-10),s=l.default.lastIndexOf(e,l.default.last(l.default.filter(e,(e=>e>0))));return[[n,Math.min(101,s+1+10)],[-1,l.default.max(e)]]},this._getInitialThreshold=e=>{const t=e[0];return t[0]+(t[1]-t[0])/3},this.state={threshold:this._getInitialThreshold(this._range())}}UNSAFE_componentWillReceiveProps(e){const t=this._range(),n=this._range(e);m.default.deepEq(t,n)||this.setState({threshold:this._getInitialThreshold(n)})}render(){const e=this.props.data,t=this._range(),n={xAxisLabel:this.props.xAxisLabel,yAxisLabel:this.props.yAxisLabel,box:this.props.box,range:t,data:e,scale:[m.default.scaleFromExtent(t[0],this.props.box[0]),m.default.scaleFromExtent(t[1],this.props.box[1])]},s=[t[0][0],0],r=[t[0][1],0];return o.createElement(h.default,{box:n.box,range:n.range,options:n,setup:this._setupGraphie,onMouseMove:this.handleMouseInteraction,onMouseDown:this.handleMouseInteraction,setDrawingAreaAvailable:this.props.setDrawingAreaAvailable},o.createElement(T,{start:s,end:r,style:{stroke:"#000",strokeWidth:1,opacity:1}}),e&&this._renderData(),e&&this._renderCircle(),e&&this._renderThresholdLine())}}N.propTypes={data:i.default.arrayOf(i.default.number),xAxisLabel:i.default.string,yAxisLabel:i.default.string,box:i.default.arrayOf(i.default.number)},N.defaultProps={data:null,xAxisLabel:"Proportion (%)",yAxisLabel:"Number of times seen",box:[400,400]};class R extends o.Component{constructor(...e){super(...e),this.state={invalidInput:!1},this.calculateDisplayProportion=()=>{const e=this.props.userProportion;return"percentage"===this.props.proportionOrPercentage?Math.round(100*e):e},this.change=(...e)=>p.change.apply(this,e),this.checkProportionValidity=e=>e>=0&&"proportion"===this.props.proportionOrPercentage&&e<=1||"percentage"===this.props.proportionOrPercentage&&e<=100,this.handleUserProportionChange=(e,t)=>{let n;n="percentage"===this.props.proportionOrPercentage?e/100:e,null!=n&&(n=Math.min(1,Math.max(0,n))),this.props.onChange({userProportion:n},t)},this.handleSampleSizeChange=(e,t)=>{null!=e&&(e=Math.min(1e3,Math.max(0,Math.floor(e)))),this.props.onChange({sampleSize:e},t)},this.handleRunSimulation=()=>{null!=this.props.numTrials&&null!=this.props.userProportion&&null!=this.props.sampleSize?(this.setState({invalidInput:!1}),this.props.onChange({data:this.generateData()}),this.props.trackInteraction()):this.setState({invalidInput:!0})},this.generateData=e=>((e,t,n)=>{const s=()=>this.generateNumber()<n,r=l.default.times(101,(()=>0));return l.default.times(t,(()=>{const t=l.default.times(e,s),n=l.default.filter(t,l.default.identity).length,o=Math.floor(100*n/e);r[o]++})),r})((e=e||this.props).sampleSize,e.numTrials,e.userProportion),this.getInputPaths=()=>[["userProportion"],["sampleSize"]],this.focus=()=>{const e=l.default.head(this.getInputPaths());return this.focusInputPath(e),!0},this.focusInputPath=e=>{x(e.length>0);const t=l.default.head(e);this.refs[t].focus()},this.blurInputPath=e=>{x(e.length>0);const t=l.default.head(e);this.refs[t].blur()},this.getDOMNodeForPath=e=>{x(e.length>0);const t=l.default.head(e);return a.default.findDOMNode(this.refs[t])},this.getGrammarTypeForPath=e=>(x(e.length>0),"number"),this.setInputValue=(e,t,n)=>{x(e.length>0);const s=l.default.head(e);this["handle"+(s.charAt(0).toUpperCase()+s.slice(1))+"Change"](t,n)},this.getUserInput=()=>null,this.simpleValidate=e=>R.validate(this.getUserInput(),e)}UNSAFE_componentWillMount(){null!=this.props.randomSeed&&(this.generateNumber=m.default.seededRNG(this.props.randomSeed))}UNSAFE_componentWillReceiveProps(e){e.randomSeed!==this.props.randomSeed&&(this.generateNumber=m.default.seededRNG(e.randomSeed))}render(){const e={marginLeft:"5px"},t="0px 0px 0px 2px rgba(255, 165, 0, 1)",n=l.default.extend({},e,{WebkitBoxShadow:t,MozBoxShadow:t,boxShadow:t,transition:"all 0.15s"}),s=l.default.extend({},e,{transition:"all 0.15s"}),r=this.state.invalidInput?n:s,i=this.props.apiOptions.staticRender?g.default:f.default,a=o.createElement("div",null,o.createElement(i,{ref:"userProportion",style:r,value:this.calculateDisplayProportion(),checkValidity:this.checkProportionValidity,disabled:this.props.apiOptions.readOnly,onChange:this.handleUserProportionChange,onFocus:()=>this.props.onFocus(["userProportion"]),onBlur:()=>this.props.onBlur(["userProportion"])}),o.createElement(b.default,null,o.createElement("p",null,w._("This controls the proportion or percentage that will be used in your simulation.")))),u=o.createElement("div",null,o.createElement(i,{ref:"sampleSize",style:r,value:this.props.sampleSize,checkValidity:e=>e>=0,disabled:this.props.apiOptions.readOnly,onChange:this.handleSampleSizeChange,onFocus:()=>this.props.onFocus(["sampleSize"]),onBlur:()=>this.props.onBlur(["sampleSize"])}),o.createElement(b.default,null,o.createElement("p",null,w._("This controls the sample size that will be used in your simulation. For example, if you set this to 100, then for each trial, responses from 100 participants will be simulated.")))),p=o.createElement("div",{style:{textAlign:"right"}},o.createElement("b",null,this.props.numTrials),o.createElement(b.default,null,o.createElement("p",null,w._("This is the number of trials used in the simulation. For example, if set to 50, then the survey will be conducted 50 times.")))),d=[{title:this.props.proportionLabel+":",value:a},{title:w._("Sample size:"),value:u},{title:w._("Number of trials:"),value:p}],c=o.createElement("button",{className:"simple-button",style:{margin:"20px 0"},disabled:this.props.apiOptions.readOnly,onClick:this.handleRunSimulation},w._("Run simulation")),h={paddingBottom:this.props.data?40:0},m=o.createElement("div",{style:h},o.createElement(N,{data:this.props.data,xAxisLabel:this.props.xAxisLabel,yAxisLabel:this.props.yAxisLabel,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable}));return o.createElement("div",null,(e=>{const t=o.createElement("thead",null,o.createElement("tr",null,o.createElement("th",null,w._("Parameter")),o.createElement("th",null,w._("Value")))),n=o.createElement("tbody",null,l.default.map(e,((e,t)=>o.createElement("tr",{key:t},o.createElement("td",null,e.title),o.createElement("td",null,e.value)))));return o.createElement("table",null,t,n)})(d),c,m)}}R.propTypes=(0,r.default)({},p.propTypes,{apiOptions:d.ApiOptions.propTypes,data:i.default.arrayOf(i.default.number),numTrials:i.default.number,proportionLabel:i.default.string,proportionOrPercentage:i.default.string,randomSeed:i.default.number,sampleSize:i.default.number,trackInteraction:i.default.func.isRequired,userProportion:i.default.number,xAxisLabel:i.default.string,yAxisLabel:i.default.string}),R.defaultProps={data:null,userProportion:null,sampleSize:null,numTrials:null,randomSeed:0,xAxisLabel:"Proportion (%)",yAxisLabel:"Number of times seen",proportionLabel:"Underlying proportion",proportionOrPercentage:"proportion",apiOptions:d.ApiOptions.defaults},l.default.extend(R,{validate:function(e,t){return{type:"points",earned:0,total:0,message:null}}});var A={name:"simulator",displayName:"Simulator",widget:R,transform:e=>{const t=l.default.clone(e);return t.randomSeed=e.problemNum,t},hidden:!0};t.default=A},BCuI:function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n("pVnL")),o=m(n("q1tI")),i=s(n("17x9")),a=s(n("5pch")),l=n("j8wP"),u=m(n("+jAD")),p=n("/4Qb"),d=s(n("APgo")),c=s(n("Atlv")),h=s(n("uBl0")),f=n("zahm");function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function m(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(s,o,i):s[o]=e[o]}return s.default=e,n&&n.set(e,s),s}class y extends o.Component{constructor(...e){super(...e),this.state={visible:1},this.change=(...e)=>u.change.apply(this,e),this._handleInteraction=e=>{const t=parseInt(e.split(" ")[1]);if(t===this.state.visible-1){const e=this.refs.renderer.getWidgetInstance("group "+t);e.showRationalesForCurrentlySelectedChoices();const n=e.simpleValidate();"points"===n.type&&n.total===n.earned&&(this.setState({visible:this.state.visible+1}),this.props.trackInteraction({visible:this.state.visible+1}))}}}shouldComponentUpdate(e,t){return e!==this.props||t!==this.state}render(){const e=o.createElement(d.default,(0,r.default)({},p.iconOk,{style:{color:"green"}})),t=a.default.chain(this.props.json).first(this.state.visible).map(((e,t)=>`[[${h.default.snowman} group ${t}]]`)).join("\n\n").value(),n={};return a.default.each(this.props.json,((t,s)=>{n[`group ${s}`]={type:"group",graded:!0,version:{major:0,minor:0},options:a.default.extend({},t,{icon:s<this.state.visible-1?e:null})}})),o.createElement("div",{className:"perseus-sequence"},o.createElement(c.default,{ref:"renderer",content:t,widgets:n,onInteractWithWidget:this._handleInteraction,apiOptions:this.props.apiOptions,linterContext:this.props.linterContext}))}}y.propTypes=(0,r.default)({},u.propTypes,{apiOptions:l.ApiOptions.propTypes,json:i.default.arrayOf(i.default.shape({content:i.default.string,images:i.default.objectOf(i.default.any),widgets:i.default.objectOf(i.default.any)})),trackInteraction:i.default.func.isRequired,linterContext:f.linterContextProps}),y.defaultProps={json:[{content:"",widgets:{},images:{}}],linterContext:f.linterContextDefault};var v={name:"sequence",displayName:"Graded Sequence",widget:y,traverseChildWidgets:function(e,t){let n=e.json;a.default.isArray(n)||(n=[n]);const s=a.default.map(n,(e=>t(e)));return a.default.extend({},e,{json:s})},tracking:"all",hidden:!0,isLintable:!0};t.default=v},FGkX:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;function s(e){let t=0;for(let n=e.length-1;n>=0;n--){if("0"!=e.charAt(n))return t;t++}return t}function r(e){let t=!0,n=!1,s=!1,r="",o="",i="",a=0,l=0,u=!0;for(let p=0;p<e.length;p++){const d=e.charAt(p);if(d>="1"&&d<="9")i+=r+d,r="",s=!0,n||(l++,a++),t=!1;else if("0"==d)n?s?(i+=r+d,r=""):(o+=d,a--):(l++,s?(o+=d,a++,r+=d):o+=d),t=!1;else if(n||"."!=d)if("e"==d||"E"==d&&p+1<e.length){const t=parseInt(e.substring(p+1,e.length));a+=t,l+=t,p=e.length}else!t||"+"!=d&&"-"!=d||"-"==d&&(u=!u);else i+=r,r="",n=!0,t=!1}return""==i||u}function o(e){let t=!0,n=!1,s=!1,r="",o="",i="",a=0,l=0,u=!0;for(let p=0;p<e.length;p++){const d=e.charAt(p);if(d>="1"&&d<="9")i+=r+d,r="",s=!0,n||(l++,a++),t=!1;else if("0"==d)n?s?(i+=r+d,r=""):(o+=d,a--):(l++,s?(o+=d,a++,r+=d):o+=d),t=!1;else if(n||"."!=d)if("e"==d||"E"==d&&p+1<e.length){const t=parseInt(e.substring(p+1,e.length));a+=t,l+=t,p=e.length}else!t||"+"!=d&&"-"!=d||"-"==d&&(u=!u);else i+=r,r="",n=!0,t=!1}return""==i?o:i}function i(e){let t=!0,n=!1,s=!1,r="",o="",i="",a=0,l=0,u=!0;for(let p=0;p<e.length;p++){const d=e.charAt(p);if(d>="1"&&d<="9")i+=r+d,r="",s=!0,n||(l++,a++),t=!1;else if("0"==d)n?s?(i+=r+d,r=""):(o+=d,a--):(l++,s?(o+=d,a++,r+=d):o+=d),t=!1;else if(n||"."!=d)if("e"==d||"E"==d&&p+1<e.length){const t=parseInt(e.substring(p+1,e.length));a+=t,l+=t,p=e.length}else!t||"+"!=d&&"-"!=d||"-"==d&&(u=!u);else i+=r,r="",n=!0,t=!1}return""==i?l:a}function a(e,t){const n=e.length-t-1;if(n<0)return"";if(n>=e.length-1)return e;const s=e.charAt(n+1),r=e.charAt(n);let o=!1;if(s>"5")o=!0;else if("5"==s){for(let t=n+2;t<e.length;t++)"0"!=e.charAt(t)&&(o=!0);r%2==1&&(o=!0)}let i="";for(let t=n;t>=0;t--){const n=e.charAt(t);if(o){let e;if("9"==n)e="0";else{switch(n){case"0":e="1";break;case"1":e="2";break;case"2":e="3";break;case"3":e="4";break;case"4":e="5";break;case"5":e="6";break;case"6":e="7";break;case"7":e="8";break;case"8":e="9"}o=!1}i=e+i}else i=n+i}return o&&(i="1"+i),i}var l={SignificantFigures:class{constructor(e){this.order=i(e),this.mantissa=o(e),this.positive=r(e),this.sigFigs=this.mantissa.length,this.sigDecs=this.order-this.mantissa.length}},displaySigFigs:function(e,t,n,l){const u=""+e;let p,d,c,h=i(u),f=o(u),g=r(u),m=!1;if(0==e||""==f||"0"==f){f="";for(let e=0;e<t;e++)f+="0";h=t+n,n<0&&-n>=t&&(m=!0)}else{if(d=h-f.length-n,c=t-f.length,p=Math.min(c,d),p<0){let e=a(f,-p);e.length>f.length+p&&(h++,d>c&&(e=a(e,1))),f=e}else if(p>0)for(let e=0;e<p;e++)f+="0";""!=f&&"0"!=f||(f="0",g=!0,h=1+n,0!=h&&(m=!0))}let y="";if(g||(y+="-"),l||f.length>20||h>4||h<-2||h-f.length>0&&s(f)>0||m)y+=f.charAt(0),f.length>1&&(y+="."+f.substring(1,f.length)),h-1!=0&&(y+=" x 10^"+(h-1));else{let e="",t="",n=!0;if(h>0)if(f.length>h)e=f.substring(0,h),t=f.substring(h,f.length);else{e=f,n=0!=s(f);for(let t=0;t<h-f.length;t++)e+="0"}else{for(let e=0;e<-h;e++)t+="0";t+=f}y+=(""==e?"0":e)+(n?".":"")+t}return y}};t.default=l},FGwj:function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n("pVnL")),o=E(n("q1tI")),i=s(n("fhzG")),a=s(n("i8i4")),l=s(n("5pch")),u=s(n("96rG")),p=n("eAf/"),d=n("4PhQ"),c=s(n("jH0K")),h=s(n("APgo")),f=s(n("M++g")),g=s(n("7xiW")),m=s(n("brIp")),y=s(n("eMwK")),v=n("j8wP"),b=n("/4Qb"),w=s(n("uBl0")),k=s(n("XwLL")),M=s(n("yfnS")),x=s(n("p8fL")),P=E(n("HEOz"));function C(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(C=function(e){return e?n:t})(e)}function E(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=C(t);if(n&&n.has(e))return n.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(s,o,i):s[o]=e[o]}return s.default=e,n&&n.set(e,s),s}const{deepEq:O,getGridStep:_,captureScratchpadTouchStart:T}=w.default,{assert:S}=x.default,I={url:null};const N={apiOptions:v.ApiOptions.defaults,gradeEmpty:!1,graphMode:"interactive",listMode:"dynamic",graph:{},tools:{translation:{enabled:!0,required:!1,constraints:{}},rotation:{enabled:!0,required:!1,constraints:{fixed:!1},coord:[1,6]},reflection:{enabled:!0,required:!1,constraints:{fixed:!1},coords:[[2,-4],[2,2]]},dilation:{enabled:!0,required:!1,constraints:{fixed:!1},coord:[6,6]}},drawSolutionShape:!0,starting:{shape:{type:"polygon-3",coords:[[2,2],[2,6],[7,2]]},transformations:[]},correct:{shape:{type:"polygon-3",coords:[[2,2],[2,6],[7,2]]},transformations:[]}};function R(e){return e.constraints.fixed?M.default.DYNAMIC:M.default.INTERACTIVE}function A(e){return String(k.default.roundTo(9,e))}function D(e){return[o.createElement(m.default,{key:"("},"("),A(e[0]),o.createElement(m.default,{key:","},", {}"),A(e[1]),o.createElement(m.default,{key:")"},")")]}function j(e,t){return e=l.default.clone(e).sort(p.point.compare),t=l.default.clone(t).sort(p.point.compare),l.default.all(l.default.map(e,(function(e,n){const s=t[n];return p.point.equal(e,s)})))}const L=e=>e.customKeypad?y.default:e.staticRender?g.default:f.default,F={apply:function(e){return W[e.type].isValid(e)?W[e.type].apply(e):l.default.identity},append:function(e,t){const n=F._appendAndCollapseLastTwo(e,t);return F._collapseFinalNoOps(n)},_collapseFinalNoOps:function(e){return e.length&&F.isNoOp(l.default.last(e))?l.default.initial(e):e},_appendAndCollapseLastTwo:function(e,t){if(!e.length)return[t];const n=F.collapse(l.default.last(e),t);return l.default.initial(e).concat(n)},isNoOp:function(e){return W[e.type].isNoOp(e)},collapse:function(e,t){return e.type!==t.type?[e,t]:F.isEmpty(e)&&F.isEmpty(t)?[]:F.isValid(e)&&F.isValid(t)?F._collapseValidMonotypedTransforms(e,t):[e,t]},isValid:function(e){return W[e.type].isValid(e)},isEmpty:function(e){return W[e.type].isEmpty(e)},_collapseValidMonotypedTransforms:function(e,t){let n=W[e.type].collapse(e,t);return n?(l.default.isArray(n)||(n=[n]),l.default.each(n,(function(t){t.type=e.type})),n):[e,t]},toTeX:function(e){return W[e.type].toTeX(e)},ListItem:(0,i.default)({displayName:"ListItem",render:function(){if("dynamic"===this.props.mode)return o.createElement("div",null,F.toTeX(this.props.transform));if("interactive"===this.props.mode){const e=W[this.props.transform.type].Input;return o.createElement(e,(0,r.default)({ref:"transform",onChange:this.handleChange,onFocus:this.props.onFocus,onBlur:this.props.onBlur,keypadElement:this.props.keypadElement,apiOptions:this.props.apiOptions},this.props.transform))}throw new d.KAError("Invalid mode: "+this.props.mode,d.Errors.Internal)},value:function(){return"interactive"===this.props.mode?l.default.extend({type:this.props.transform.type},this.refs.transform.value()):this.props.transform},handleChange:l.default.debounce((function(e){this.props.onChange(this.value(),e)}),300),_getComponentAtPath:function(e){const t=this.refs.transform,n=l.default.head(e);return t.refs[n]},focus:function(){const e=this.refs.transform,t=l.default.head(e.getInputPaths());t&&this.focusInputPath(t)},focusInputPath:function(e){this._getComponentAtPath(e).focus()},blurInputPath:function(e){this._getComponentAtPath(e).blur()},getDOMNodeForPath:function(e){return a.default.findDOMNode(this._getComponentAtPath(e))},getGrammarTypeForPath:function(e){return"number"},setInputValue:function(e,t,n){t.length&&(t=parseFloat(t),isNaN(t))||this.refs.transform.setInputValue(e,t,n)},getInputPaths:function(){return"dynamic"===this.props.mode?[]:this.refs.transform.getInputPaths()}})},W={translation:{verbName:P._("Translate"),nounName:P._("Translation"),lowerNounName:P._("translation"),apply:function(e){return function(t){return p.vector.add(t,e.vector)}},isValid:function(e){return l.default.isFinite(e.vector[0])&&l.default.isFinite(e.vector[1])},isEmpty:function(e){return null===e.vector[0]&&null===e.vector[1]},isNoOp:function(e){return p.vector.equal(e.vector,[0,0])},collapse:function(e,t){return{vector:p.vector.add(e.vector,t.vector)}},toTeX:function(e){return P.$_("Translation by %(vector)s",{vector:(t=e.vector,[o.createElement(m.default,{key:"<"},P.doNotTranslate("\\langle")),A(t[0]),o.createElement(m.default,{key:","},", {}"),A(t[1]),o.createElement(m.default,{key:">"},P.doNotTranslate("\\rangle"))])});var t},Input:class extends o.Component{constructor(...e){super(...e),this.state={vector:this.props.vector||[null,null]},this.value=()=>({vector:[this.refs.x.getValue(),this.refs.y.getValue()]}),this.setInputValue=(e,t,n)=>{const s=l.default.first(e),r=l.default.clone(this.state.vector);"x"===s?r[0]=t:"y"===s&&(r[1]=t),this.setState({vector:r},(()=>{this.props.onChange(n)}))},this.getInputPaths=()=>[["x"],["y"]]}componentDidUpdate(e){O(this.props,e)||this.setState({vector:this.props.vector})}render(){const e=L(this.props.apiOptions),t=[o.createElement(m.default,{key:"<"},P.doNotTranslate("\\langle")),o.createElement(e,{key:"vec_x",ref:"x",placeholder:0,value:this.state.vector[0],useArrowKeys:!0,onChange:e=>{const t=this.state.vector[1];this.setState({vector:[e,t]},(()=>{this.props.onChange()}))},onFocus:l.default.partial(this.props.onFocus,"x"),onBlur:l.default.partial(this.props.onBlur,"x"),keypadElement:this.props.keypadElement}),o.createElement(m.default,{key:","},", {}"),o.createElement(e,{key:"vec_y",ref:"y",placeholder:0,value:this.state.vector[1],useArrowKeys:!0,onChange:e=>{const t=this.state.vector[0];this.setState({vector:[t,e]},(()=>{this.props.onChange()}))},onFocus:l.default.partial(this.props.onFocus,"y"),onBlur:l.default.partial(this.props.onBlur,"y"),keypadElement:this.props.keypadElement}),o.createElement(m.default,{key:">"},P.doNotTranslate("\\rangle"))];return o.createElement("div",null,P.$_("Translation by %(vector)s",{vector:t}))}}},rotation:{verbName:P._("Rotate"),nounName:P._("Rotation"),lowerNounName:P._("rotation"),apply:function(e){return function(t){return p.point.rotateDeg(t,e.angleDeg,e.center)}},isValid:function(e){return l.default.isFinite(e.angleDeg)&&l.default.isFinite(e.center[0])&&l.default.isFinite(e.center[1])},isEmpty:function(e){return null===e.angleDeg&&null===e.center[0]&&null===e.center[1]},isNoOp:function(e){return p.number.equal(e.angleDeg,0)},collapse:function(e,t){return!!p.point.equal(e.center,t.center)&&{center:e.center,angleDeg:e.angleDeg+t.angleDeg}},toTeX:function(e){return P.$_("Rotation by %(degrees)s about %(point)s",{degrees:(t=e.angleDeg,A(t)+"°"),point:D(e.center)});var t},Input:class extends o.Component{constructor(...e){super(...e),this.state={center:this.props.center||[null,null],angleDeg:this.props.angleDeg||null},this.value=()=>({angleDeg:this.refs.angleDeg.getValue(),center:[this.refs.centerX.getValue(),this.refs.centerY.getValue()]}),this.setInputValue=(e,t,n)=>{const s=l.default.first(e);let r=l.default.clone(this.state.angleDeg);const o=l.default.clone(this.state.center);"angleDeg"===s?r=t:"centerX"===s?o[0]=t:"centerY"===s&&(o[1]=t),this.setState({angleDeg:r,center:o},(()=>{this.props.onChange(n)}))},this.getInputPaths=()=>[["centerX"],["centerY"],["angleDeg"]]}componentDidUpdate(e){O(this.props,e)||this.setState({center:this.props.center,angleDeg:this.props.angleDeg})}render(){const e=L(this.props.apiOptions),t=[o.createElement(m.default,{key:"("},"("),o.createElement(e,{key:"X",ref:"centerX",placeholder:0,value:this.state.center[0],useArrowKeys:!0,onChange:e=>{const t=this.state.center[1];this.setState({center:[e,t]},(()=>{this.props.onChange()}))},onFocus:l.default.partial(this.props.onFocus,"centerX"),onBlur:l.default.partial(this.props.onBlur,"centerX"),keypadElement:this.props.keypadElement}),o.createElement(m.default,{key:","},", {}"),o.createElement(e,{key:"Y",ref:"centerY",placeholder:0,value:this.state.center[1],useArrowKeys:!0,onChange:e=>{const t=this.state.center[0];this.setState({center:[t,e]},(()=>{this.props.onChange()}))},onFocus:l.default.partial(this.props.onFocus,"centerY"),onBlur:l.default.partial(this.props.onBlur,"centerY"),keypadElement:this.props.keypadElement}),o.createElement(m.default,{key:")"},")")],n=[o.createElement(e,{key:"deg",ref:"angleDeg",placeholder:0,value:this.state.angleDeg,useArrowKeys:!0,onChange:e=>{this.setState({angleDeg:e},(()=>{this.props.onChange()}))},onFocus:l.default.partial(this.props.onFocus,"angleDeg"),onBlur:l.default.partial(this.props.onBlur,"angleDeg"),keypadElement:this.props.keypadElement}),"°"],s=P.$_("Rotation about %(point)s by %(degrees)s",{point:t,degrees:n});return o.createElement("div",null,s)}}},reflection:{verbName:P._("Reflect"),nounName:P._("Reflection"),lowerNounName:P._("reflection"),apply:function(e){return function(t){return p.point.reflectOverLine(t,e.line)}},isValid:function(e){return l.default.all(l.default.flatten(e.line),l.default.isFinite)&&!p.point.equal(e.line[0],e.line[1])},isEmpty:function(e){return l.default.all(l.default.flatten(e.line),l.default.isNull)},isNoOp:function(e){return!1},collapse:function(e,t){return!!p.line.equal(e.line,t.line)&&[]},toTeX:function(e){const t=e.line[0],n=e.line[1];return P.$_("Reflection over the line from %(point1)s to %(point2)s",{point1:D(t),point2:D(n)})},Input:class extends o.Component{constructor(...e){super(...e),this.state={line:this.props.line||[[null,null],[null,null]]},this.changePoint=(e,t,n,s)=>{const r=l.default.map(this.state.line,l.default.clone);r[e][t]=n,this.setState({line:r},(()=>{this.props.onChange(s)}))},this.value=()=>({line:[[this.refs.x1.getValue(),this.refs.y1.getValue()],[this.refs.x2.getValue(),this.refs.y2.getValue()]]}),this.setInputValue=(e,t,n)=>{const s=l.default.first(e);let r,o;"x"===s[0]?r=0:"y"===s[0]&&(r=1),"1"===s[1]?o=0:"2"===s[1]&&(o=1),this.changePoint(o,r,t,n)},this.getInputPaths=()=>[["x1"],["y1"],["x2"],["y2"]]}componentDidUpdate(e){O(this.props,e)||this.setState({line:this.props.line})}render(){const e=L(this.props.apiOptions),t=[o.createElement(m.default,{key:"("},"("),o.createElement(e,{key:"x1",ref:"x1",value:this.state.line[0][0],useArrowKeys:!0,onChange:this.changePoint.bind(this,0,0),onFocus:l.default.partial(this.props.onFocus,"x1"),onBlur:l.default.partial(this.props.onBlur,"x1"),keypadElement:this.props.keypadElement}),o.createElement(m.default,{key:","},", {}"),o.createElement(e,{key:"y1",ref:"y1",value:this.state.line[0][1],useArrowKeys:!0,onChange:this.changePoint.bind(this,0,1),onFocus:l.default.partial(this.props.onFocus,"y1"),onBlur:l.default.partial(this.props.onBlur,"y1"),keypadElement:this.props.keypadElement}),o.createElement(m.default,{key:")"},")")],n=[o.createElement(m.default,{key:"("},"("),o.createElement(e,{key:"x2",ref:"x2",value:this.state.line[1][0],useArrowKeys:!0,onChange:this.changePoint.bind(this,1,0),onFocus:l.default.partial(this.props.onFocus,"x2"),onBlur:l.default.partial(this.props.onBlur,"x2"),keypadElement:this.props.keypadElement}),o.createElement(m.default,{key:","},", {}"),o.createElement(e,{key:"y2",ref:"y2",value:this.state.line[1][1],useArrowKeys:!0,onChange:this.changePoint.bind(this,1,1),onFocus:l.default.partial(this.props.onFocus,"y2"),onBlur:l.default.partial(this.props.onBlur,"y2"),keypadElement:this.props.keypadElement}),o.createElement(m.default,{key:")"},")")];return o.createElement("div",null,P.$_("Reflection over the line from %(point1)s to %(point2)s",{point1:t,point2:n}))}}},dilation:{verbName:P._("Dilate"),nounName:P._("Dilation"),lowerNounName:P._("dilation"),apply:function(e){return function(t){return function(e,t,n){const s=p.vector.subtract(e,t),r=p.vector.scale(s,n);return p.vector.add(t,r)}(t,e.center,e.scale)}},isValid:function(e){return l.default.isFinite(e.scale)&&l.default.isFinite(e.center[0])&&l.default.isFinite(e.center[1])},isEmpty:function(e){return null===e.scale&&null===e.center[0]&&null===e.center[1]},isNoOp:function(e){return p.number.equal(e.scale,1)},collapse:function(e,t){return!!p.point.equal(e.center,t.center)&&{center:e.center,scale:e.scale*t.scale}},toTeX:function(e){const t=function(e){const t=k.default.toFraction(e,p.number.DEFAULT_TOLERANCE);return 1===t[1]?A(e):A(t[0])+"/"+A(t[1])}(e.scale);return P.$_("Dilation of scale %(scale)s about %(point)s",{scale:t,point:D(e.center)})},Input:class extends o.Component{constructor(...e){super(...e),this.state={center:this.props.center||[null,null],scale:this.props.scale||null},this.value=()=>({scale:this.refs.scale.getValue(),center:[this.refs.x.getValue(),this.refs.y.getValue()]}),this.setInputValue=(e,t,n)=>{const s=l.default.first(e);let r=this.state.scale;const o=l.default.clone(this.state.center);"x"===s?o[0]=t:"y"===s?o[1]=t:"scale"===s&&(r=t),this.setState({scale:r,center:o},(()=>{this.props.onChange(n)}))},this.getInputPaths=()=>[["x"],["y"],["scale"]]}componentDidUpdate(e){O(this.props,e)||this.setState({center:this.props.center,scale:this.props.scale})}render(){const e=L(this.props.apiOptions),t=[o.createElement(m.default,{key:"("},"("),o.createElement(e,{key:"point_x",ref:"x",placeholder:0,value:this.state.center[0],useArrowKeys:!0,onChange:e=>{const t=this.state.center[1];this.setState({center:[e,t]},(()=>{this.props.onChange()}))},onFocus:l.default.partial(this.props.onFocus,"x"),onBlur:l.default.partial(this.props.onBlur,"x"),keypadElement:this.props.keypadElement}),o.createElement(m.default,{key:","},", {}"),o.createElement(e,{key:"point_y",ref:"y",placeholder:0,value:this.state.center[1],useArrowKeys:!0,onChange:e=>{const t=this.state.center[0];this.setState({center:[t,e]},(()=>{this.props.onChange()}))},onFocus:l.default.partial(this.props.onFocus,"y"),onBlur:l.default.partial(this.props.onBlur,"y"),keypadElement:this.props.keypadElement}),o.createElement(m.default,{key:")"},")")],n=o.createElement(e,{ref:"scale",placeholder:1,value:this.state.scale,useArrowKeys:!0,onChange:e=>{this.setState({scale:e},(()=>{this.props.onChange()}))},onFocus:l.default.partial(this.props.onFocus,"scale"),onBlur:l.default.partial(this.props.onBlur,"scale"),keypadElement:this.props.keypadElement});return o.createElement("div",null,P.$_("Dilation about %(point)s by %(scale)s",{point:t,scale:n}))}}}},U={getPointCountForType:function(e){const t=e.split("-");return"polygon"===t[0]?t[1]||3:"line"===t[0]||"lineSegment"===t[0]?2:"angle"===t[0]?3:"circle"===t[0]?2:"point"===t[0]?1:void 0},addMovableShape:function(e,t){if(t.editable&&t.translatable)throw new d.KAError("It doesn't make sense to have a movable shape where you can stretch the points and translate them simultaneously. options: "+JSON.stringify(t),d.Errors.Internal);const n=l.default.map(t.shape.coords,(function(r){let o=!1,i=r;const a=e.addMovablePoint({coord:r,normalStyle:t.normalPointStyle,highlightStyle:t.highlightPointStyle,constraints:{fixed:!t.translatable&&!t.editable},visible:t.showPoints,snapX:t.snap&&t.snap[0]||0,snapY:t.snap&&t.snap[1]||0,bounded:!1,onMove:function(e,r){o||(i=a.coord,o=!0);let u=p.vector.subtract([e,r],a.coord);t.onMove&&(u=t.onMove(u[0],u[1])),t.translatable&&l.default.each(n,(function(e){e!==a&&e.setCoord(p.vector.add(e.coord,u))}));const d=a.coord,c=p.vector.add(a.coord,u);return a.coord=c,s.update(),a.coord=d,c},onMoveEnd:function(){if(t.onMoveEnd&&o){o=!1;const e=p.vector.subtract(a.coord,i);t.onMoveEnd(e[0],e[1])}s.update()}});return a.bounded=!0,a})),s=U.addShape(e,t,n),r=s.remove;return s.remove=function(){r.apply(s),l.default.invoke(n,"remove")},s},addShape:function(e,t,n){n=n||t.shape.coords;const s=U._typesOf(t.shape),r=t.shape.options||U.defaultOptions(s),o=U._mapTypes(s,n,(function(n,s,o){const i=l.default.extend({},t,r[o]);return U._addType(e,n,s,i)})),i=l.default.filter(l.default.pluck(o,"update"),l.default.identity),a=l.default.filter(l.default.pluck(o,"remove"),l.default.identity),u=function(){return l.default.map(o,(function(e){return e.getOptions?e.getOptions():{}}))};return{type:s,points:n,update:function(){l.default.invoke(i,"call")},remove:function(){l.default.invoke(a,"call")},toJSON:function(){const e=l.default.map(n,(function(e){return l.default.isArray(e)?e:e.coord}));return{type:s,coords:e,options:u()}},getOptions:u}},equal:function(e,t){const n=U._typesOf(e),s=U._typesOf(t);if(n.length!==s.length)return!1;const r=U._mapTypes(n,e.coords,U._combine),o=U._mapTypes(s,t.coords,U._combine);return l.default.all(l.default.map(r,(function(e,t){const n=o[t];return e.type===n.type&&U._forType(e.type).equal(e.coords,n.coords)})))},_typesOf:function(e){let t=e.type;return l.default.isArray(t)||(t=[t]),l.default.map(t,(function(e){return"polygon"===e?"polygon-3":e}))},defaultOptions:function(e){return l.default.map(e,(function(e){const t=U._forType(e).defaultOptions;return l.default.extend({},t)}))},_forType:function(e){const t=e.split("-")[0];return U[t]},_mapTypes:function(e,t,n,s){return l.default.map(e,(function(e,r){const o=U.getPointCountForType(e),i=l.default.first(t,o);return t=l.default.rest(t,o),n.call(s,e,i,r)}))},_addType:function(e,t,n,s){const r=l.default.isArray(n[0])?{coordA:n[0],coordZ:n[1]}:{pointA:n[0],pointZ:n[1]};if("polygon"===(t=t.split("-")[0])){const t=e.addMovablePolygon(l.default.extend({},s,{fixed:!s.editable,snapX:s.snap&&s.snap[0]||0,snapY:s.snap&&s.snap[1]||0,points:n,constrainToGraph:!1}));return{update:t.transform.bind(t),remove:t.remove.bind(t)}}if("line"===t||"lineSegment"===t){const n=e.addMovableLineSegment(l.default.extend({},s,r,{movePointsWithLine:!0,fixed:!0,constraints:{fixed:!0},extendLine:"line"===t}));return{update:n.transform.bind(n,!0),remove:n.remove.bind(n)}}if("angle"===t){const t=!!s.editable&&null,r=e.addMovableAngle({angleLabel:"$deg0",fixed:!0,points:n,normalStyle:s.normalStyle,reflex:s.reflex});return l.default.isArray(n[0])||s.editable||(n[0].remove(),n[2].remove()),{update:r.update.bind(r,t),remove:r.remove.bind(r),getOptions:function(){return{reflex:r.isReflex()}}}}if("circle"===t){let t={remove:l.default.identity};const r=function(){const r=n[0].coord||n[0],o=n[1].coord||n[1],i=p.point.distanceToPoint(r,o);t.remove(),t=e.circle(r,i,l.default.extend({stroke:M.default.DYNAMIC,"stroke-width":2},s.normalStyle))};return r(),n[1].remove&&!s.editable&&n[1].remove(),{update:r,remove:function(){t.remove()}}}if("point"===t)return{update:null,remove:null};throw new d.KAError("Invalid shape type "+t,d.Errors.Internal)},_combine:function(e,t){return{type:e,coords:t}},polygon:{equal:j},line:{equal:p.line.equal},lineSegment:{equal:j},angle:{equal:function(e,t){if(!p.point.equal(e[1],t[1]))return!1;const n=[e[1],e[0]],s=[e[1],e[2]],r=[t[1],t[0]],o=[t[1],t[2]],i=p.ray.equal(n,r)&&p.ray.equal(s,o),a=p.ray.equal(n,o)&&p.ray.equal(s,r);return i||a},defaultOptions:{reflex:!1}},circle:{equal:function(e,t){const n=p.point.distanceToPoint(e[0],e[1]),s=p.point.distanceToPoint(t[0],t[1]);return p.point.equal(e[0],t[0])&&p.number.equal(n,s)}},point:{equal:p.point.equal}},q=F.ListItem;class H extends o.Component{constructor(...e){super(...e),this._transformationRefs=()=>l.default.times(this.props.transformations.length,(e=>this.refs["transformation"+e])),this.value=()=>l.default.invoke(this._transformationRefs(),"value"),this.handleChange=(e,t)=>{this.props.onChange(this.value(),t)},this.focusLast=()=>{const e=this._transformationRefs();0!==e.length&&l.default.last(e).focus()}}render(){if("static"===this.props.mode)return o.createElement("span",null);const e=l.default.map(this.props.transformations,(function(e,t){return o.createElement(q,{ref:"transformation"+t,key:"transformation"+t,transform:e,mode:this.props.mode,onChange:this.handleChange,onFocus:l.default.partial(this.props.onFocus,""+t),onBlur:l.default.partial(this.props.onBlur,""+t),keypadElement:this.props.keypadElement,apiOptions:this.props.apiOptions})}),this);return o.createElement("div",{className:"perseus-transformation-list"},e)}}class z extends o.Component{render(){const e=this.props.toggled?"simple-button exercise-orange toggled highlighted-tool-button":"simple-button";return o.createElement("button",{type:"button",className:e,disabled:this.props.disabled,onClick:this.props.onClick,onTouchStart:T},this.props.children)}}class B extends o.Component{constructor(...e){super(...e),this.state={selected:null},this.changeSelected=e=>{this.props.removeTool(this.state.selected),e&&e!==this.state.selected?(this.props.addTool(e),this.setState({selected:e})):this.setState({selected:null})}}render(){const e=l.default.map(W,(function(e,t){if(this.props.enabled[t])return o.createElement(z,{key:t,disabled:this.props.apiOptions.readOnly,toggled:this.state.selected===t,onClick:this.changeSelected.bind(this,t)},e.verbName)}),this);return o.createElement("div",{className:"transformer-tools-bar"},o.createElement("span",{className:"simple-button-group"},e),o.createElement("button",{className:"transformer-undo-button simple-button",type:"button",disabled:this.props.apiOptions.readOnly,onClick:this.props.onUndoClick,onTouchStart:T},o.createElement(h.default,b.iconUndo)," "+P._("Undo")),o.createElement("div",{className:"clear"}))}}class G extends o.Component{constructor(...e){super(...e),this.changeSelected=e=>{e&&this.props.addTool(e)}}render(){const e=l.default.map(W,(function(e,t){if(this.props.enabled[t])return o.createElement(z,{key:t,toggled:!1,disabled:this.props.apiOptions.readOnly,onClick:this.changeSelected.bind(this,t)},o.createElement(h.default,b.iconPlus)," ",e.nounName)}),this);return o.createElement("div",{className:"transformer-tools-bar"},e,o.createElement("button",{className:"transformer-undo-button simple-button",type:"button",onClick:this.props.onUndoClick,disabled:this.props.apiOptions.readOnly,onTouchStart:T},o.createElement(h.default,b.iconUndo)," "+P._("Undo")),o.createElement("div",{className:"clear"}))}}class V extends o.Component{constructor(...e){super(...e),this.shouldSetupGraphie=(e,t)=>!O(t.starting,e.starting)||(t.graphMode!==e.graphMode||(t.listMode!==e.listMode||(t.drawSolutionShape!==e.drawSolutionShape||(!(!e.drawSolutionShape||O(t.correct.shape,e.correct.shape))||!O(this.tools,e.tools))))),this.graphie=()=>this.refs.graph.graphie(),this.setupGraphie=e=>{this.props.drawSolutionShape&&this.props.correct.shape&&this.props.correct.shape.coords&&U.addShape(e,{fixed:!0,shape:this.props.correct.shape,normalStyle:{stroke:M.default.GRAY,"stroke-dasharray":"","stroke-width":2}}),this.currentTool=null,this.refs.toolsBar.changeSelected(null),this.addTransformerShape(this.props.starting.shape,!1),this.setTransformations(this.props.transformations),this.tools={translation:l.default.clone(this.props.tools.translation),rotation:l.default.clone(this.props.tools.rotation),reflection:l.default.clone(this.props.tools.reflection),dilation:l.default.clone(this.props.tools.dilation)}},this.setTransformations=e=>{this.resetCoords(),this.transformations=l.default.clone(e),l.default.each(this.transformations,this.applyTransform)},this.addTransformerShape=(e,t)=>{const n=this,s=this.graphie();this.shape=U.addMovableShape(s,{shape:e,editable:!1,showPoints:"static"!==this.props.graphMode,translatable:t,onMove:function(e,t){return e=k.default.roundToNearest(s.snap[0],e),t=k.default.roundToNearest(s.snap[1],t),n.addTransform({type:"translation",vector:[e,t]}),[e,t]},normalPointStyle:{fill:t?M.default.INTERACTIVE:M.default.DYNAMIC,stroke:t?M.default.INTERACTIVE:M.default.DYNAMIC},highlightPointStyle:{fill:M.default.INTERACTING,stroke:M.default.INTERACTING}})},this.addTool=e=>{const t=this;if("interactive"===this.props.graphMode)if("translation"===e)this.currentTool=this.addTranslationTool();else if("rotation"===e)this.currentTool=this.addRotationTool();else if("reflection"===e)this.currentTool=this.addReflectionTool();else{if("dilation"!==e)throw new d.KAError("Invalid tool id: "+e,d.Errors.Internal);this.currentTool=this.addDilationTool()}else{let n;if("translation"===e)n={type:"translation",vector:[null,null]};else if("rotation"===e)n={type:"rotation",center:[null,null],angleDeg:null};else if("reflection"===e)n={type:"reflection",line:[[null,null],[null,null]]};else{if("dilation"!==e)throw new d.KAError("Invalid tool id: "+e,d.Errors.Internal);n={type:"dilation",center:[null,null],scale:null}}this.doTransform(n,(function(){t.refs.transformationList.focusLast()}))}},this.removeTool=e=>{this.currentTool&&this.currentTool.remove(),this.currentTool=null},this.addTranslationTool=()=>{var e,t;const n=this;return null==(e=this.shape)||e.remove(),this.addTransformerShape(null==(t=this.shape)?void 0:t.toJSON(),!0),{remove:function(){var e,t;null==(e=n.shape)||e.remove(),n.addTransformerShape(null==(t=n.shape)?void 0:t.toJSON(),!1)}}},this.snapCoord=e=>{const t=this.graphie();return l.default.map(e,(function(e,n){return k.default.roundToNearest(t.snap[n],e)}))},this.normalizeReflectionCoords=e=>{const t=this.snapCoord(p.line.midpoint(e)),n=p.vector.polarDegFromCart(p.vector.subtract(e[0],e[1])),s=[1,k.default.roundToNearest(45,n[1])],r=p.vector.cartFromPolarDeg(s);return l.default.map([-1,1],(function(e){const n=p.vector.add(t,p.vector.scale(r,e*this.scaleToCurrentRange(2)));return this.snapCoord(n)}),this)},this.addReflectionTool=()=>{const e=this.props.tools.reflection;if(!e.enabled)return;const t=this,n=this.refs.graph.graphie(),s=function(){t.changeTool("reflection",{coords:l.default.pluck(o,"coord")})},r=this.normalizeReflectionCoords(e.coords),o=l.default.map(r,(function(e){return n.addMovablePoint({coord:e,visible:!1})}),this);let i;const a=R(e);n.style({},(function(){i=n.addMovableLineSegment({fixed:e.constraints.fixed,constraints:e.constraints,pointA:o[0],pointZ:o[1],snapX:n.snap[0],snapY:n.snap[1],extendLine:!0,normalStyle:{stroke:a,"stroke-width":2,"stroke-dasharray":"- "},highlightStyle:{stroke:M.default.INTERACTING,"stroke-width":2,"stroke-dasharray":"- "},movePointsWithLine:!0,onMoveEnd:s})}));const d=n.addReflectButton({fixed:e.constraints.fixed,line:i,size:this.scaleToCurrentRange(1),onClick:function(){t.doTransform({type:"reflection",line:l.default.pluck(o,"coord")}),c&&(c.setCoord(p.vector.add(d.coord,p.vector.subtract(d.coord,c.coord))),c.update())},normalStyle:{stroke:a,"stroke-width":2,fill:a},highlightStyle:{stroke:M.default.INTERACTING,"stroke-width":3,fill:M.default.INTERACTING},onMoveEnd:s});let c=null;if(!e.constraints.fixed){const e=p.vector.polarDegFromCart(p.vector.subtract(o[1].coord,o[0].coord))[1]+90;c=n.addRotateHandle({center:d,radius:this.scaleToCurrentRange(2),angleDeg:e,width:this.scaleToCurrentRange(.24),hoverWidth:this.scaleToCurrentRange(.4),lengthAngle:17,onMove:function(e){return k.default.roundToNearest(45,e)},onMoveEnd:s})}return(0,u.default)(i).on("move",(function(){d.update(),(0,u.default)(d).trigger("move")})),c&&(0,u.default)(c).on("move",(function(){const e=t.snapCoord(c.coord),n=p.vector.subtract(e,d.coord),s=d.isFlipped()?1:0;o[s].setCoord(p.vector.add(d.coord,p.vector.rotateDeg(n,90))),o[1-s].setCoord(p.vector.add(d.coord,p.vector.rotateDeg(n,-90))),i.transform(!0),d.update()})),{remove:function(){d.remove(),c&&c.remove(),i.remove(),o[0].remove(),o[1].remove()}}},this.scaleToCurrentRange=e=>function(e,t){const n=t[0][1]-t[0][0],s=t[1][1]-t[1][0];return e*Math.max(n,s)/20}(e,this.refs.graph.props.range),this.addRotationTool=()=>{const e=this.props.tools.rotation;if(!e.enabled)return;const t=this,n=this.refs.graph.graphie(),s=R(e);return this.rotatePoint=n.addMovablePoint({constraints:e.constraints,coord:e.coord,snapX:n.snap[0],snapY:n.snap[1],normalStyle:{"stroke-dasharray":"",stroke:s,fill:s},highlightStyle:{"stroke-dasharray":"",stroke:M.default.INTERACTING,fill:M.default.INTERACTING}}),this.rotateHandle=n.addRotateHandle({center:this.rotatePoint,radius:this.scaleToCurrentRange(1.5),width:this.scaleToCurrentRange(.24),hoverWidth:this.scaleToCurrentRange(.4),onMove:function(e,n){const s=t.getRotationTransformFromAngle(t.rotatePoint.coord,e-n);return t.doTransform(s),n+s.angleDeg}}),this.rotatePoint.onMoveEnd=(e,n)=>{t.changeTool("rotation",{coord:[e,n]})},{remove:function(){var e,n;null==(e=t.rotateHandle)||e.remove(),null==(n=t.rotatePoint)||n.remove()}}},this.addDilationTool=()=>{const e=this.props.tools.dilation;if(!e.enabled)return;const t=this,n=this.refs.graph.graphie(),s=R(e);t.dilationCircle=n.addCircleGraph({centerConstraints:e.constraints,center:e.coord,radius:t.scaleToCurrentRange(2),snapX:n.snap[0],snapY:n.snap[1],minRadius:t.scaleToCurrentRange(1),snapRadius:t.scaleToCurrentRange(.5),onResize:function(e,n){t.doTransform({type:"dilation",center:t.dilationCircle.centerPoint.coord,scale:e/n})},circleNormalStyle:{stroke:s,"stroke-width":2,"stroke-dasharray":"- ","fill-opacity":0},circleHighlightStyle:{stroke:M.default.INTERACTING,"stroke-width":2,"stroke-dasharray":"",fill:M.default.INTERACTING,"fill-opacity":.05},centerNormalStyle:{stroke:s,fill:s,"stroke-width":2,"stroke-dasharray":""},centerHighlightStyle:{stroke:s,fill:s,"stroke-width":2,"stroke-dasharray":""}});const r=this.dilationCircle.centerPoint.onMoveEnd;return this.dilationCircle.centerPoint.onMoveEnd=(...e)=>{r&&r(e),t.changeTool("dilation",{coord:t.dilationCircle.centerPoint.coord})},{remove:function(){var e;null==(e=t.dilationCircle)||e.remove()}}},this.getRotationTransformFromAngle=(e,t)=>{(t=(t+360)%360)>180&&(t-=360);return{type:"rotation",center:e,angleDeg:15*Math.round(t/15)}},this.doTransform=(e,t)=>{this.applyTransform(e),this.addTransform(e,t)},this.applyTransform=e=>{if("static"!==this.props.graphMode){const t=F.apply(e);this.applyCoordTransformation(t)}},this.applyCoordTransformation=e=>{var t;l.default.each(this.shape.points,(function(t){const n=e(t.coord);t.setCoord(n)})),null==(t=this.shape)||t.update()},this.resetCoords=()=>{var e;const t=this.props.starting.shape.coords;l.default.each(this.shape.points,(function(e,n){e.setCoord(t[n])})),null==(e=this.shape)||e.update()},this.handleUndoClick=()=>{this.refs.toolsBar.changeSelected(null),this.props.transformations.length&&this.props.onChange({transformations:l.default.initial(this.props.transformations)})},this.setTransformationProps=(e,t)=>{this.props.onChange({transformations:e},t)},this.addTransform=(e,t)=>{this.transformations=F.append(this.transformations,e),this.props.onChange({transformations:l.default.clone(this.transformations)},t)},this.changeTool=(e,t)=>{const n=l.default.clone(this.props.tools);n[e]=l.default.extend({},this.props.tools[e],t),this.tools[e]=l.default.clone(n[e]),this.props.onChange({tools:n}),this.props.trackInteraction()},this.simpleValidate=e=>V.validate(this.getUserInput(),e),this.getCoords=()=>{const e=this.props.starting.shape.coords,t=this.props.transformations;return l.default.reduce(t,(function(e,t){return l.default.map(e,F.apply(t))}),e)},this.getEditorJSON=()=>{const e=l.default.pick(this.props,"grading","starting","graphMode","listMode","tools","drawSolutionShape","gradeEmpty");return e.graph=this.refs.graph.toJSON(),e.version=1.2,e.answer=this.getUserInput(),e},this.getUserInput=()=>{var e;return{transformations:this.props.transformations,shape:{type:this.shape.type,coords:this.getCoords(),options:null==(e=this.shape)?void 0:e.getOptions()}}},this._handleFocus=(...e)=>{this.props.onFocus(e)},this._handleBlur=(...e)=>{this.props.onBlur(e)},this._getTransformationForID=e=>{const t=["transformationList","transformation"+e];let n=this;return l.default.each(t,(e=>{n=n.refs[e]})),n},this.getInputPaths=()=>{if("static"===this.props.listMode)return[];let e=[];return l.default.each(this.props.transformations,((t,n)=>{const s=this._getTransformationForID(n).getInputPaths(),r=l.default.map(s,(e=>[""+n].concat(e)));e=e.concat(r)})),e},this._passToInner=function(e,t,...n){if(!t||!t.length)return;const s=l.default.rest(t),r=l.default.head(t),o=this._getTransformationForID(r);return o[e].apply(o,[s].concat(n))},this.focus=()=>{const e=this.getInputPaths();return e.length>0&&(this.focusInputPath(e[0]),!0)},this.focusInputPath=e=>0!==e.length&&(S(e.length>=2),this._passToInner("focusInputPath",e)),this.blurInputPath=e=>0!==e.length&&(S(e.length>=2),this._passToInner("blurInputPath",e)),this.setInputValue=(e,t,n)=>(S(e.length>=2),this._passToInner("setInputValue",e,t,n)),this.getDOMNodeForPath=e=>(S(e.length>=2),this._passToInner("getDOMNodeForPath",e)),this.getGrammarTypeForPath=e=>(S(e.length>=2),this._passToInner("getGrammarTypeForPath",e))}render(){const e=l.default.extend(function(e,t){const n=(e=e||{}).labels||["x","y"],s=e.range||[[-10,10],[-10,10]],r=e.step||[1,1];return{box:[t,t],labels:n,range:s,step:r,gridStep:e.gridStep||_(s,r,t),valid:!0,backgroundImage:I,markings:"grid",showProtractor:!1}}(this.props.graph,400),this.props.graph),t="interactive"===this.props.graphMode,n=t?B:G,s=o.createElement("div",{style:{width:e.box[0]}},o.createElement(n,{ref:"toolsBar",enabled:(r=this.props.tools,i="enabled",l.default.object(l.default.map(r,(function(e,t){return[t,e[i]]})))),apiOptions:this.props.apiOptions,addTool:this.addTool,removeTool:this.removeTool,onUndoClick:this.handleUndoClick}));var r,i;return o.createElement("div",{className:"perseus-widget perseus-widget-transformer"},o.createElement(c.default,{ref:"graph",box:e.box,range:e.range,labels:e.labels,step:e.step,gridStep:e.gridStep,markings:e.markings,backgroundImage:e.backgroundImage,showProtractor:e.showProtractor,onGraphieUpdated:this.setupGraphie,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable}),!t&&P._("Add transformations below:"),"static"===this.props.graphMode&&[o.createElement("br",{key:"static-br"}),o.createElement("em",{key:"static-nomove"}," ",P._("Note: For this question, the shape will not move.")," ")],t&&s,o.createElement(H,{ref:"transformationList",mode:this.props.listMode,transformations:this.props.transformations,onChange:this.setTransformationProps,onFocus:this._handleFocus,onBlur:this._handleBlur,keypadElement:this.props.keypadElement,apiOptions:this.props.apiOptions}),!t&&s)}componentDidMount(){this.setupGraphie(this.graphie())}componentDidUpdate(e){this.shouldSetupGraphie(this.props,e)?this.refs.graph.reset():O(this.props.transformations,this.transformations)||this.setTransformations(this.props.transformations)}static validate(e,t){for(const n in W)if(t.tools[n].required){if(!l.default.any(l.default.map(e.transformations,(function(e){return e.type===n&&!F.isEmpty(e)&&!F.isNoOp(e)}))))return{type:"invalid",message:P._("Your transformation must use a %(type)s.",{type:W[n].lowerNounName})}}return U.equal(e.shape,t.correct.shape)?{type:"points",earned:1,total:1,message:null}:!t.gradeEmpty&&O(e.shape.coords,t.starting.shape.coords)?{type:"invalid",message:P._("Use the interactive graph to define a correct transformation.")}:{type:"points",earned:0,total:1,message:null}}}V.defaultProps=l.default.defaults({transformations:[]},N);var Y={name:"transformer",displayName:"Transformer",widget:V};t.default=Y},GbkG:function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n("pVnL")),o=x(n("q1tI")),i=s(n("17x9")),a=s(n("fhzG")),l=s(n("5pch")),u=s(n("96rG")),p=n("eAf/"),d=s(n("bHYm")),c=s(n("yPu2")),h=s(n("uBl0")),f=s(n("ydm1")),g=s(n("Giaf")),m=s(n("T2HF")),y=s(n("yfnS")),v=n("NUXr"),b=n("UcaO"),w=x(n("+jAD")),k=s(n("INEF"));function M(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(M=function(e){return e?n:t})(e)}function x(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=M(t);if(n&&n.has(e))return n.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(s,o,i):s[o]=e[o]}return s.default=e,n&&n.set(e,s),s}const{GrapherUtil:P,typeToButton:C,functionForType:E,DEFAULT_GRAPHER_PROPS:O}=k.default,_=g.default.MovablePoint,T=g.default.MovableLine;const S={padding:"5px 5px"};class I extends o.Component{constructor(...e){super(...e),this._coords=e=>{const t=(e=e||this.props).graph,n=e.model&&P.maybePointsFromNormalized(e.model.defaultCoords,t.range,t.step,t.snapStep);return e.coords||n||null},this._asymptote=e=>(e=e||this.props).asymptote,this.change=(...e)=>w.change.apply(this,e),this.renderPlot=()=>{const e=this.props.model,t=this.props.graph.range[0],n=(0,r.default)({stroke:this.props.isMobile?y.default.BLUE_C:y.default.DYNAMIC},this.props.isMobile?{"stroke-width":3}:{}),s=e.getCoefficients(this._coords(),this._asymptote());if(!s)return;const i=e.getPropsForCoeffs(s,t);return o.createElement(e.Movable,(0,r.default)({},i,{key:this.props.model.url,range:t,style:n}))},this.renderAsymptote=()=>{const e=this.props.model,t=this.props.graph,n=this._asymptote(),s={strokeDasharray:"- "};return n&&o.createElement(T,{onMove:(e,t)=>{const n=p.vector.subtract(e,t),s=l.default.map(this._asymptote(),(e=>p.vector.add(e,n)));this.props.onChange({asymptote:s})},constraints:[d.default.MovableLine.constraints.bound(),d.default.MovableLine.constraints.snap(),(n,s)=>{const r=p.vector.subtract(n,s),o=l.default.map(this._asymptote(),(e=>p.vector.add(e,r)));return!e.extraAsymptoteConstraint||e.extraAsymptoteConstraint(n,s,this._coords(),o,t)}],normalStyle:s,highlightStyle:s},l.default.map(n,((e,t)=>o.createElement(_,{key:`asymptoteCoord-${t}`,coord:e,static:!0,draw:null,extendLine:!0,showHairlines:this.props.showHairlines,hideHairlines:this.props.hideHairlines,showTooltips:this.props.showTooltips,isMobile:this.props.isMobile}))))}}render(){const e=l.default.map(this._coords(),((e,t)=>o.createElement(_,{key:t,coord:e,static:this.props.static,constraints:[d.default.MovablePoint.constraints.bound(),d.default.MovablePoint.constraints.snap(),e=>{const n=l.default.all(this._coords(),((n,s)=>t===s||!n||!p.number.equal(e[0],n[0])));if(!n)return!1;if(this.props.model&&this.props.model.extraCoordConstraint){const n=this.props.model.extraCoordConstraint,s=l.default.clone(this._coords()),r=l.default.clone(s[t]);return s[t]=e,n(e,r,s,this._asymptote(),this.props.graph)}return n}],onMove:(e,n)=>{let s;const r=this._asymptote();s=r&&this.props.model.allowReflectOverAsymptote&&function(e,t,n){const s=(e,t,n)=>(t[0]-e[0])*(n[1]-e[1])-(n[0]-e[0])*(t[1]-e[1]);return s(n[0],n[1],t)>0!=s(n[0],n[1],e)>0}(e,n,r)?l.default.map(this._coords(),(e=>p.point.reflectOverLine(e,r))):l.default.clone(this._coords()),s[t]=e,this.props.onChange({coords:s})},showHairlines:this.props.showHairlines,hideHairlines:this.props.hideHairlines,showTooltips:this.props.showTooltips,isMobile:this.props.isMobile}))),t=this.props.graph.box,n=this.props.graph.backgroundImage;let s=null;if(n.url){const e=t[0]/b.interactiveSizes.defaultBoxSize;s=o.createElement(c.default,{src:n.url,width:n.width,height:n.height,scale:e})}return o.createElement("div",{className:"perseus-widget perseus-widget-grapher",style:{width:t[0],height:this.props.flexibleType?"auto":t[1],boxSizing:"initial"}},o.createElement("div",{className:"graphie-container above-scratchpad",style:{width:t[0],height:t[1]}},s,o.createElement(g.default,(0,r.default)({},this.props.graph,{setDrawingAreaAvailable:this.props.setDrawingAreaAvailable}),this.props.model&&this.renderPlot(),this.props.model&&this.renderAsymptote(),this.props.model&&e)))}}I.propTypes=(0,r.default)({},w.propTypes,{flexibleType:i.default.bool,graph:i.default.any,hideHairlines:i.default.func,isMobile:i.default.bool,model:i.default.any,onChange:i.default.func,setDrawingAreaAvailable:i.default.func,showHairlines:i.default.func,showTooltips:i.default.bool,static:i.default.bool}),I.defaultProps={graph:{range:[[-10,10],[-10,10]],step:[1,1]},coords:null,asymptote:null,isMobile:!1};const N=(0,a.default)({displayName:"Grapher",propTypes:{apiOptions:i.default.any,availableTypes:i.default.arrayOf(i.default.any),containerSizeClass:v.containerSizeClassPropType.isRequired,graph:i.default.any,markings:i.default.string,onChange:i.default.func,plot:i.default.any,static:i.default.bool,trackInteraction:i.default.func.isRequired},getDefaultProps:function(){return O},render:function(){const e=this.props.plot.type,t=this.props.plot.coords,n=this.props.plot.asymptote,s=o.createElement("div",{style:S,className:"above-scratchpad"},o.createElement(f.default,{value:e,allowEmpty:!0,buttons:l.default.map(this.props.availableTypes,C),onChange:this.handleActiveTypeChange})),i=(0,v.getInteractiveBoxFromSizeClass)(this.props.containerSizeClass),a=(0,r.default)({},this.props.graph,P.getGridAndSnapSteps(this.props.graph,i[0]),{gridConfig:this._getGridConfig((0,r.default)({},this.props.graph,{box:i},P.getGridAndSnapSteps(this.props.graph,i[0])))}),u={graph:{box:i,range:a.range,step:a.step,snapStep:a.snapStep,backgroundImage:a.backgroundImage,options:a,setup:this._setupGraphie},onChange:this.handlePlotChanges,model:e&&E(e),coords:t,asymptote:n,static:this.props.static,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable,isMobile:this.props.apiOptions.isMobile,showTooltips:this.props.graph.showTooltips,showHairlines:this.showHairlines,hideHairlines:this.hideHairlines};return o.createElement("div",null,o.createElement(I,u),this.props.availableTypes.length>1&&s)},handlePlotChanges:function(e){const t=l.default.extend({},this.props.plot,e);this.props.onChange({plot:t}),this.props.trackInteraction()},handleActiveTypeChange:function(e){const t=this.props.graph,n=l.default.extend({},this.props.plot,P.defaultPlotProps(e,t));this.props.onChange({plot:n})},_getGridConfig:function(e){return l.default.map(e.step,(function(t,n){return h.default.gridDimensionConfig(t,e.range[n],e.box[n],e.gridStep[n])}))},_calculateMobileTickStep(e,t,n){const s=h.default.constrainedTickStepsFromTickSteps(t,n);return s[0]=s[0]/e[0],s[1]=s[1]/e[1],s},_setupGraphie:function(e,t){const n=this.props.apiOptions.isMobile;if("graph"===t.markings?(e.graphInit({range:t.range,scale:l.default.pluck(t.gridConfig,"scale"),axisArrows:"<->",labelFormat:function(e){return"\\small{"+e+"}"},gridStep:t.gridStep,snapStep:t.snapStep,tickStep:n?this._calculateMobileTickStep(t.gridStep,t.step,t.range):l.default.pluck(t.gridConfig,"tickStep"),labelStep:1,unityLabels:l.default.pluck(t.gridConfig,"unityLabel"),isMobile:n}),e.label([0,t.range[1][1]],t.labels[1],n?"below right":"above"),e.label([t.range[0][1],0],t.labels[0],n?"above left":"right")):"grid"===t.markings?e.graphInit({range:t.range,scale:l.default.pluck(t.gridConfig,"scale"),gridStep:t.gridStep,axes:!1,ticks:!1,labels:!1,isMobile:n}):"none"===t.markings&&e.init({range:t.range,scale:l.default.pluck(t.gridConfig,"scale")}),this.props.apiOptions.isMobile){const t={normalStyle:{strokeWidth:1}};this.horizHairline=new m.default(e,[0,0],[0,0],t),this.horizHairline.attr({stroke:y.default.INTERACTIVE}),this.horizHairline.hide(),this.vertHairline=new m.default(e,[0,0],[0,0],t),this.vertHairline.attr({stroke:y.default.INTERACTIVE}),this.vertHairline.hide()}},showHairlines:function(e){this.props.apiOptions.isMobile&&"none"!==this.props.markings&&(this.horizHairline.moveTo([this.props.graph.range[0][0],e[1]],[this.props.graph.range[0][1],e[1]]),this.horizHairline.show(),this.vertHairline.moveTo([e[0],this.props.graph.range[1][0]],[e[0],this.props.graph.range[1][1]]),this.vertHairline.show())},hideHairlines:function(){this.props.apiOptions.isMobile&&(this.horizHairline.hide(),this.vertHairline.hide())},simpleValidate:function(e){return P.validate(this.getUserInput(),e)},getUserInput:function(){return N.getUserInputFromProps(this.props)},focus:u.default.noop}),R=e=>{const t={availableTypes:e.availableTypes,graph:e.graph};if(1===t.availableTypes.length){const e=t.graph,n=P.chooseType(t.availableTypes);t.plot=P.defaultPlotProps(n,e)}return t};l.default.extend(N,{validate:function(e,t){return P.validate(e,t)},getUserInputFromProps:function(e){return e.plot}});var A={name:"grapher",displayName:"Grapher",widget:N,transform:R,staticTransform:e=>l.default.extend({},R(e),{availableTypes:[e.correct.type],plot:e.correct})};t.default=A},HQqP:function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n("pVnL"));const o=new RegExp("^[A-Za-z\\[\\]()=#+-]*$"),i=new RegExp("^(Cl|Br|[CONPSFBI]|\\[)");function a(e){this.message=e}function l(e,t,n){const s=t[0],o=t.slice(1);let i;i=Array.isArray(e)?[].concat(e):(0,r.default)({},e||{});let a=n;return o.length>0&&(a=l(i[s],o,n)),i[s]=a,i}function u(e,t){if(0===t.length)return e;if(""===e)throw new a("Mismatched parentheses");const n=e[0],s=e.slice(1);return u(s,"("===n?t.concat(n):")"===n?t.slice(1):t)}function p(e,t){const n=e[0],s=e.slice(1);if("("===n){let e=(0,r.default)({},t,{parens:t.parens+"("});e=function(e,t){const n=t.reduce((function(e,t){return e[t]}),e);return l(e,t,n+1)}(t,["idx",t.idx.length-1,1]);let n=-1;t.idx[t.idx.length-1][0]%2==0&&(n=0);const o=c(s,(0,r.default)({},e,{idx:e.idx.concat([[n,0]]),parens:e.parens.concat("(")})),i=c(u(s,["("]),e);return[o].concat(i)}if(")"===n){if("("!==t.parens[t.parens.length-1])throw new a("Mismatched parentheses");return null}throw new a("Invalid bare character: "+n)}function d(e,t){const n=function(e,t){let n=null,s=null;if("["===e[0]){const t=e.indexOf("]");if(-1===t)return["",e];n=e.slice(1,t),s=e.slice(t+1)}else n=i.exec(e)[1],s=e.slice(n.length);return[n,s]}(e),s=n[0];if(""===s)return["error","Unable to parse bracketed atom."];const r=n[1],o=l(t,["idx",t.idx.length-1],[1+t.idx[t.idx.length-1][0],0]);let a=c(r,l(o,["bond","bondType"],"single"));!Array.isArray(a)&&a&&(a=[a]);const u={type:"atom",symbol:s,bonds:a,idx:o.idx};return t.bond?{type:"bond",bondType:t.bond.bondType,to:u}:u}function c(e,t){if(!function(e){return o.test(e)}(e))throw new a("Invalid input.");return e&&0!==e.length?(n=e,i.test(n)?d(e,t||{idx:[[0,0]],parens:[],stack:[],bondModifiers:[]}):function(e){return"="===e||"#"===e}(e[0])?function(e,t){const n=e[0],s=e.slice(1);if("="===n)return c(s,l(t,["bond","bondType"],"double"));if("#"===n)return c(s,l(t,["bond","bondType"],"triple"));throw new a("Invalid character: "+n)}(e,t):p(e,t)):null;var n}var h={parse:c,ParseError:a};t.default=h},INEF:function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n("5pch")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(s,o,i):s[o]=e[o]}s.default=e,n&&n.set(e,s);return s}(n("q1tI")),i=s(n("uBl0")),a=s(n("Giaf")),l=s(n("wINb")),u=n("eAf/");function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}const d={url:null};function c(e){let t=e[0],n=e[1],s=e[2];const r=e[3];t<0&&(t*=-1,n*=-1,s*=-1);const o=2*Math.PI;for(n<0&&(n*=-1,s*=-1,s+=o/2);s>0;)s-=o;for(;s<0;)s+=o;return[t,n,s,r]}function h(e){let t=e[0],n=e[1],s=e[2];const r=e[3];t<0&&(t*=-1,n*=-1,s*=-1);const o=Math.PI;for(n<0&&(n*=-1,s*=-1,s+=o/2);s>0;)s-=o;for(;s<0;)s+=o;return[t,n,s,r]}const f={areEqual:function(e,t){return i.default.deepEq(e,t)},Movable:a.default.Plot,getPropsForCoeffs:function(e){return{fn:r.default.partial(this.getFunctionForCoeffs,e)}}},g=r.default.extend({},f,{url:"https://ka-perseus-graphie.s3.amazonaws.com/67aaf581e6d9ef9038c10558a1f70ac21c11c9f8.png",defaultCoords:[[.25,.75],[.75,.75]],getCoefficients:function(e){const t=e[0],n=e[1],s=n[0]-t[0],r=n[1]-t[1];if(0===s)return;const o=r/s;return[o,n[1]-o*n[0]]},getFunctionForCoeffs:function(e,t){return e[0]*t+e[1]},getEquationString:function(e){const t=this.getCoefficients(e),n=t[0],s=t[1];return"y = "+n.toFixed(3)+"x + "+s.toFixed(3)}}),m=r.default.extend({},f,{url:"https://ka-perseus-graphie.s3.amazonaws.com/e23d36e6fc29ee37174e92c9daba2a66677128ab.png",defaultCoords:[[.5,.5],[.75,.75]],Movable:a.default.Parabola,getCoefficients:function(e){const t=e[0],n=e[1],s=t[0],r=t[1],o=(n[1]-r)/((n[0]-s)*(n[0]-s));return[o,-2*s*o,o*s*s+r]},getFunctionForCoeffs:function(e,t){return(e[0]*t+e[1])*t+e[2]},getPropsForCoeffs:function(e){return{a:e[0],b:e[1],c:e[2]}},getEquationString:function(e){const t=this.getCoefficients(e),n=t[0],s=t[1],r=t[2];return"y = "+n.toFixed(3)+"x^2 + "+s.toFixed(3)+"x + "+r.toFixed(3)}}),y=r.default.extend({},f,{url:"https://ka-perseus-graphie.s3.amazonaws.com/3d68e7718498475f53b206c2ab285626baf8857e.png",defaultCoords:[[.5,.5],[.6,.6]],Movable:a.default.Sinusoid,getCoefficients:function(e){const t=e[0],n=e[1],s=n[1]-t[1],r=Math.PI/(2*(n[0]-t[0]));return[s,r,t[0]*r,t[1]]},getFunctionForCoeffs:function(e,t){const n=e[0],s=e[1],r=e[2],o=e[3];return n*Math.sin(s*t-r)+o},getPropsForCoeffs:function(e){return{a:e[0],b:e[1],c:e[2],d:e[3]}},getEquationString:function(e){const t=this.getCoefficients(e),n=t[0],s=t[1],r=t[2],o=t[3];return"y = "+n.toFixed(3)+" sin("+s.toFixed(3)+"x - "+r.toFixed(3)+") + "+o.toFixed(3)},areEqual:function(e,t){return i.default.deepEq(c(e),c(t))}}),v=r.default.extend({},f,{url:"https://ka-perseus-graphie.s3.amazonaws.com/7db80d23c35214f98659fe1cf0765811c1bbfbba.png",defaultCoords:[[.5,.5],[.75,.75]],getCoefficients:function(e){const t=e[0],n=e[1],s=n[1]-t[1],r=Math.PI/(4*(n[0]-t[0]));return[s,r,t[0]*r,t[1]]},getFunctionForCoeffs:function(e,t){const n=e[0],s=e[1],r=e[2],o=e[3];return n*Math.tan(s*t-r)+o},getEquationString:function(e){const t=this.getCoefficients(e),n=t[0],s=t[1],r=t[2],o=t[3];return"y = "+n.toFixed(3)+" sin("+s.toFixed(3)+"x - "+r.toFixed(3)+") + "+o.toFixed(3)},areEqual:function(e,t){return i.default.deepEq(h(e),h(t))}}),b=r.default.extend({},f,{url:"https://ka-perseus-graphie.s3.amazonaws.com/9cbfad55525e3ce755a31a631b074670a5dad611.png",defaultCoords:[[.5,.55],[.75,.75]],defaultAsymptote:[[0,.5],[1,.5]],extraCoordConstraint:function(e,t,n,s,o){const i=r.default.head(s)[1];return r.default.all(n,(e=>e[1]!==i))},extraAsymptoteConstraint:function(e,t,n,s,o){const i=e[1];if(r.default.all(n,(e=>e[1]>i))||r.default.all(n,(e=>e[1]<i)))return[t[0],i];const a=t[1];if(r.default.all(n,(e=>e[1]>a))){const e=r.default.min(r.default.map(n,(e=>e[1])));return[t[0],e-o.snapStep[1]]}const l=r.default.max(r.default.map(n,(e=>e[1])));return[t[0],l+o.snapStep[1]]},allowReflectOverAsymptote:!0,getCoefficients:function(e,t){const n=e[0],s=e[1],o=r.default.head(t)[1],i=Math.log((n[1]-o)/(s[1]-o))/(n[0]-s[0]);return[(n[1]-o)/Math.exp(i*n[0]),i,o]},getFunctionForCoeffs:function(e,t){const n=e[0],s=e[1],r=e[2];return n*Math.exp(s*t)+r},getEquationString:function(e,t){if(!t)return null;const n=this.getCoefficients(e,t),s=n[0],r=n[1],o=n[2];return"y = "+s.toFixed(3)+"e^("+r.toFixed(3)+"x) + "+o.toFixed(3)}}),w=r.default.extend({},f,{url:"https://ka-perseus-graphie.s3.amazonaws.com/f6491e99d34af34d924bfe0231728ad912068dc3.png",defaultCoords:[[.55,.5],[.75,.75]],defaultAsymptote:[[.5,0],[.5,1]],extraCoordConstraint:function(e,t,n,s,o){const i=r.default.head(s)[0];return r.default.all(n,(e=>e[0]!==i))&&n[0][1]!==n[1][1]},extraAsymptoteConstraint:function(e,t,n,s,o){const i=e[0];if(r.default.all(n,(e=>e[0]>i))||r.default.all(n,(e=>e[0]<i)))return[i,t[1]];const a=t[0];if(r.default.all(n,(e=>e[0]>a))){return[r.default.min(r.default.map(n,(e=>e[0])))-o.snapStep[0],t[1]]}return[r.default.max(r.default.map(n,(e=>e[0])))+o.snapStep[0],t[1]]},allowReflectOverAsymptote:!0,getCoefficients:function(e,t){const n=e=>[e[1],e[0]],s=b.getCoefficients(r.default.map(e,n),r.default.map(t,n)),o=-s[2]/s[0],i=1/s[0];return[1/s[1],i,o]},getFunctionForCoeffs:function(e,t,n){const s=e[0],r=e[1],o=e[2];return s*Math.log(r*t+o)},getEquationString:function(e,t){if(!t)return null;const n=this.getCoefficients(e,t),s=n[0],r=n[1],o=n[2];return"y = ln("+s.toFixed(3)+"x + "+r.toFixed(3)+") + "+o.toFixed(3)}}),k=r.default.extend({},f,{url:"https://ka-perseus-graphie.s3.amazonaws.com/8256a630175a0cb1d11de223d6de0266daf98721.png",defaultCoords:[[.5,.5],[.75,.75]],getCoefficients:function(e){const t=e[0],n=e[1],s=n[0]-t[0],r=n[1]-t[1];if(0===s)return;let o=Math.abs(r/s);n[1]<t[1]&&(o*=-1);return[o,t[0],t[1]]},getFunctionForCoeffs:function(e,t){const n=e[0],s=e[1],r=e[2];return n*Math.abs(t-s)+r},getEquationString:function(e){const t=this.getCoefficients(e),n=t[0],s=t[1],r=t[2];return"y = "+n.toFixed(3)+"| x - "+s.toFixed(3)+"| + "+r.toFixed(3)}}),M={linear:g,quadratic:m,sinusoid:y,tangent:v,exponential:b,logarithm:w,absolute_value:k},x=r.default.keys(M);function P(e){return M[e]}const C={validate:function(e,t){if(e.type!==t.correct.type)return{type:"points",earned:0,total:1,message:null};if(null==e.coords)return{type:"invalid",message:null};const n=P(e.type),s=n.getCoefficients(e.coords,e.asymptote),r=n.getCoefficients(t.correct.coords,t.correct.asymptote);return null==s||null==r?{type:"invalid",message:null}:n.areEqual(s,r)?{type:"points",earned:1,total:1,message:null}:{type:"points",earned:0,total:1,message:null}},getEquationString:function(e){const t=e.plot;if(t.type&&t.coords){return P(t.type).getEquationString(t.coords,t.asymptote)||""}return""},pointsFromNormalized:function(e,t,n,s){return r.default.map(e,(function(e){const o=r.default.map(e,(function(e,s){const r=t[s],o=n[s],i=function(e,t){return Math.floor((e[1]-e[0])/t)}(r,o),a=Math.round(e*i);return r[0]+o*a}));return u.point.roundTo(o,s)}))},maybePointsFromNormalized:function(e,t,n,s){return e?this.pointsFromNormalized(e,t,n,s):e},defaultPlotProps:function(e,t){const n=P(e),s=i.default.snapStepFromGridStep([1,1]);return{type:e,asymptote:this.maybePointsFromNormalized(n.defaultAsymptote,t.range,t.step,s),coords:null}},chooseType:r.default.first,getGridAndSnapSteps:function(e,t){const n=e.gridStep||i.default.getGridStep(e.range,e.step,t);return{gridStep:n,snapStep:e.snapStep||i.default.snapStepFromGridStep(n)}}},E={};E.graph={labels:["x","y"],range:[[-10,10],[-10,10]],step:[1,1],backgroundImage:d,markings:"graph",rulerLabel:"",rulerTicks:10,valid:!0,showTooltips:!1},E.plot=C.defaultPlotProps("linear",E.graph),E.availableTypes=[E.plot.type];var O={GrapherUtil:C,allTypes:x,typeToButton:function(e){const t=e.charAt(0).toUpperCase()+e.substring(1);return{value:e,title:t,content:o.createElement("img",{src:(0,l.default)(P(e).url),alt:t})}},functionForType:P,DEFAULT_GRAPHER_PROPS:E,DEFAULT_BACKGROUND_IMAGE:d};t.default=O},JtQr:function(e,t,n){"use strict";function s(e,t){const n=new Path2D;e.lineWidth=a.lineWidth,e.strokeStyle=a.fgColor,n.moveTo(t.startPos[0],t.startPos[1]),n.lineTo(t.endPos[0],t.endPos[1]),e.stroke(n)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const r={text:function(e,t){null!==t.value&&(e.fillStyle=a.fgColor,e.font=a.font,e.fillText(t.value,t.pos[0]-a.fontSizePx/2+1,t.pos[1]+a.fontSizePx/2))},"line:single":s,"line:double":function(e,t){let n=new Path2D;e.lineWidth=5*a.lineWidth,e.strokeStyle=a.fgColor,n.moveTo(t.startPos[0],t.startPos[1]),n.lineTo(t.endPos[0],t.endPos[1]),e.stroke(n),n=new Path2D,e.lineWidth=3*a.lineWidth,e.strokeStyle=a.bgColor,n.moveTo(t.startPos[0],t.startPos[1]),n.lineTo(t.endPos[0],t.endPos[1]),e.stroke(n)},"line:triple":function(e,t){let n=new Path2D;e.lineWidth=7*a.lineWidth,e.strokeStyle=a.fgColor,n.moveTo(t.startPos[0],t.startPos[1]),n.lineTo(t.endPos[0],t.endPos[1]),e.stroke(n),n=new Path2D,e.lineWidth=5*a.lineWidth,e.strokeStyle=a.bgColor,n.moveTo(t.startPos[0],t.startPos[1]),n.lineTo(t.endPos[0],t.endPos[1]),e.stroke(n),s(e,t)}};const o={"line:single":0,"line:double":0,"line:triple":0,text:1};function i(e,t){return o[e.type]-o[t.type]}const a={bgColor:"rgb(255, 255, 255)",fgColor:"rgb(0, 0, 0)",fontSizePx:12,lineWidth:1,font:"12px sans"};var l=function(e,t){t.sort(i).forEach(function(e){return function(t){r[t.type](e,t)}}(e))};t.default=l},Jxul:function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n("pVnL")),o=m(n("q1tI")),i=s(n("17x9")),a=s(n("5pch")),l=s(n("96rG")),u=n("MRvb"),p=n("PDH5"),d=n("mR6N"),c=s(n("8Kom")),h=m(n("+jAD")),f=s(n("uBl0"));function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function m(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(s,o,i):s[o]=e[o]}return s.default=e,n&&n.set(e,s),s}const{updateQueryString:y}=f.default;class v extends o.Component{constructor(...e){super(...e),this.handleMessageEvent=e=>{let t={};try{t=JSON.parse(e.originalEvent.data)}catch(e){return}if(a.default.isUndefined(t.testsPassed))return;const n=t.testsPassed?"correct":"incorrect";this.change({status:n,message:t.message})},this.change=(...e)=>h.change.apply(this,e),this.simpleValidate=e=>v.validate({status:this.props.status,message:this.props.message},e)}static validate(e,t){return"correct"===e.status?{type:"points",earned:1,total:1,message:e.message||null}:"incorrect"===e.status?{type:"points",earned:0,total:1,message:e.message||null}:{type:"invalid",message:"Keep going, you're not there yet!"}}componentDidMount(){(0,l.default)(window).on("message",this.handleMessageEvent)}componentWillUnmount(){(0,l.default)(window).off("message",this.handleMessageEvent)}render(){if(!this.props.programID)return o.createElement("div",null);let e,t=!1,n=function(e){const t=`/computer-programming/program/${e}/embedded?embed=yes&author=no`;return(0,p.isFileProtocol)(c.default.protocol)?`https://khanacademy.org${t}`:(0,u.toAbsoluteUrl)(t)}(this.props.programID);const s={height:this.props.height,width:"100%"};if(this.props.showEditor?(n+="&editor=yes",e="perseus-scratchpad-editor"):(n+="&editor=no&width=688",e="perseus-scratchpad","webpage"!==this.props.programType&&(t=!0)),this.props.showButtons?(n+="&buttons=yes",s.height+=67):n+="&buttons=no",this.props.settings){const e={};a.default.each(this.props.settings,(function(t){t.name&&t.value&&(e[t.name]=t.value)})),n=y(n,"settings",JSON.stringify(e))}const r=["allow-popups","allow-same-origin","allow-scripts","allow-top-navigation"].join(" ");return o.createElement("div",{className:(0,d.css)(b.widthOverride,t&&b.container)},o.createElement("iframe",{sandbox:r,src:n,style:s,className:e,allowFullScreen:!0}))}}v.propTypes=(0,r.default)({},h.propTypes,{programID:i.default.string,programType:i.default.oneOf(["pjs","sql","webpage"]),width:i.default.number,height:i.default.number,settings:i.default.array,showEditor:i.default.bool,showButtons:i.default.bool,status:i.default.oneOf(["incomplete","incorrect","correct"]),message:i.default.string}),v.defaultProps={showEditor:!1,showButtons:!1,status:"incomplete",message:null};const b=d.StyleSheet.create({widthOverride:{width:820},container:{margin:"auto"}});var w={name:"cs-program",displayName:"CS Program",supportedAlignments:["block","full-width"],widget:v,hidden:!0};t.default=w},"K/mI":function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.sigfigPrint=t.default=t.countSigfigs=void 0;var r=m(n("q1tI")),o=s(n("i8i4")),i=s(n("5pch")),a=s(n("96rG")),l=s(n("mbWs")),u=s(n("gmVs")),p=m(n("HEOz")),d=n("j8wP"),c=m(n("+jAD")),h=s(n("7xiW")),f=s(n("FGkX"));function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function m(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(s,o,i):s[o]=e[o]}return s.default=e,n&&n.set(e,s),s}const{SignificantFigures:y,displaySigFigs:v}=f.default,b=function(e){return new y(e).sigFigs};t.countSigfigs=b;t.sigfigPrint=function(e,t){return v(e,t,-10,!1)};class w extends r.Component{constructor(...e){super(...e),this._showError=()=>{if(""===this.props.value)return;const e=(0,a.default)(o.default.findDOMNode(this.refs.error));e.is(":visible")||e.css({top:50,opacity:.1}).show().animate({top:0,opacity:1},300)},this._hideError=()=>{const e=(0,a.default)(o.default.findDOMNode(this.refs.error));e.is(":visible")&&e.animate({top:50,opacity:.1},300,(function(){(0,a.default)(this).hide()}))},this.change=(...e)=>c.change.apply(this,e),this.handleBlur=()=>{this.props.onBlur([]),clearTimeout(this._errorTimeout),l.default.unitParse(this.props.value).parsed||this._showError()},this.handleChange=e=>{this._hideError(),this.props.onChange({value:e.target.value})},this.simpleValidate=(e,t)=>(t=t||function(){},w.validate(this.getUserInput(),e)),this.getUserInput=()=>this.props.value,this.getInputPaths=()=>[[]],this.focusInputPath=e=>{const t=o.default.findDOMNode(this.refs.input);t&&t.focus()},this.handleFocus=()=>{this.props.onFocus([])},this.blurInputPath=e=>{const t=o.default.findDOMNode(this.refs.input);t&&t.blur()},this.setInputValue=(e,t,n)=>{this.props.onChange({value:t},n)},this.getDOMNodeForPath=()=>o.default.findDOMNode(this.refs.input),this.getGrammarTypeForPath=e=>"unit"}static validate(e,t){const n=l.default.unitParse(t.value).expr,s=l.default.unitParse(e);if(!s.parsed)return{type:"invalid",message:p._("I couldn't understand those units.")};let r=null;const o=t.sigfigs,a=b(s.coefficient)===o;let u,d;a||(r=p._("Check your significant figures."));try{const e=new l.default.Var("x"),t=new l.default.Eq(n.simplify(),"=",new l.default.Mul(e,s.expr.simplify())).solveLinearEquationForVariable(e);u=Number(t.eval()).toPrecision(o)===Number(1).toPrecision(o)}catch(e){u=!1}u||(r=p._("That answer is numerically incorrect."));const c=k(s.expr.simplify()),h=k(n.simplify());d="all"===t.accepting?l.default.compare(c,h).equal:(0,i.default)(t.acceptingUnits).any((e=>{const t=k(l.default.unitParse(e).unit.simplify());return l.default.compare(t,c).equal})),d||(r=p._("Check your units."));return{type:"points",earned:d&&u&&a?1:0,total:1,message:r}}render(){const e=this.props.apiOptions.staticRender?r.createElement(h.default,{onChange:this.handleChange,ref:"input",className:d.ClassNames.INTERACTIVE,value:this.props.value,onFocus:this.handleFocus,onBlur:this.handleBlur}):r.createElement("input",{onChange:this.handleChange,ref:"input",className:d.ClassNames.INTERACTIVE,value:this.props.value,onFocus:this.handleFocus,onBlur:this.handleBlur});return r.createElement("div",{className:"old-unit-input"},e,r.createElement("div",{ref:"error",className:"error",style:{display:"none"}},p._("I don't understand that")))}componentDidUpdate(){clearTimeout(this._errorTimeout),l.default.unitParse(this.props.value).parsed?this._hideError():this._errorTimeout=setTimeout(this._showError,2e3)}componentWillUnmount(){clearTimeout(this._errorTimeout)}}w.defaultProps={apiOptions:d.ApiOptions.defaults,value:""};const k=function(e){return e.simplify().asMul().partition()[1].flatten().simplify()};var M={name:"unit-input",displayName:"Unit",defaultAlignment:"inline-block",widget:w,transform:e=>(0,u.default)(e).del(["value"]).freeze(),version:{major:0,minor:1},hidden:!0};t.default=M},KSWw:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;function s(e,t,n,s){let r=e.symbol;if("C"===r&&1!==Object.keys(t).length&&(r=null),"1,0"===e.idx){const t=[0,0];return e.pos=t,e.baseAngle=-30+s,{type:"text",value:r,pos:t,idx:e.idx}}const o=t[e.connections.find((function(e){return t[e].pos}))],i=o.connections.indexOf(e.idx);let a=60,l=120;4===o.connections.length?(l=90,a=90):(n.find((t=>"triple"===t.bondType&&t.to===e.idx))||n.find((e=>"triple"===e.bondType&&e.to===o.idx)))&&(l=0,a=0);let u=0;const p=o.idx.split(":"),d=p[p.length-1].split(",")[0];u=parseInt(d)%2!=0?o.baseAngle-(a-l*i):o.baseAngle+(a-l*i);const c=function(e,t,n){const s=e[0],r=e[1];return[s+Math.cos(2*t*Math.PI/360)*n,r+-1*Math.sin(2*t*Math.PI/360)*n]}(o.pos,u,30);return e.pos=c,e.baseAngle=u,{type:"text",value:r,pos:c,idx:e.idx}}function r(e,t){const n=function(e,t){let n=[e.pos[0],e.pos[1]],s=[t.pos[0],t.pos[1]];return"C"!==e.symbol&&(n=[t.pos[0]-.75*(t.pos[0]-e.pos[0]),t.pos[1]-.75*(t.pos[1]-e.pos[1])]),"C"!==t.symbol&&(s=[e.pos[0]-.75*(e.pos[0]-t.pos[0]),e.pos[1]-.75*(e.pos[1]-t.pos[1])]),[n,s]}(t[e.from],t[e.to]);return{type:"line:"+e.bondType,startPos:n[0],endPos:n[1]}}function o(e){return e.join(":")}function i(e,t,n){if(null===n)return[e,t];if("atom"===n.type){const s=o(n.idx);e[s]={idx:s,symbol:n.symbol,connections:[]},n.bonds&&n.bonds.forEach((function(n){const r=o(n.to.idx);e[s].connections.push(r),t.push({from:s,to:r,bondType:n.bondType}),i(e,t,n.to),e[r].connections.push(s)}))}return[e,t]}function a(e,t,n,r,o){if(0===t.length)return e;const i=t.shift(),l=n[i];return l.connections.forEach((function(e){n[e].pos||t.push(e)})),a(e.concat(s(l,n,r,o)),t,n,r,o)}function l(e,t,n){return 0===n.length?e:l(e.concat(r(n[0],t)),t,n.slice(1))}var u={layout:function(e,t){const n=i({},[],e),s=n[0],r=n[1];return l(a([],["1,0"],s,r,t),s,r)},_atomLayout:s,_bondLayout:r,_bondLength:30,_convertTree:i};t.default=u},La43:function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.getClientRectsForTextInRange=function(e){const t=[];return a(e.commonAncestorContainer,e,t),t},t.getRelativePosition=i,t.getRelativeRect=function({left:e,top:t,width:n,height:s},o){return(0,r.default)({},i({left:e,top:t},o),{width:n,height:s})};var r=s(n("pVnL")),o=n("OgJR");function i(e,t){return{left:e.left-t.left,top:e.top-t.top}}function a(e,t,n){const s=new Range;if(s.selectNodeContents(e),e.nodeType===Node.TEXT_NODE){const r=(0,o.intersectRanges)(t,s);r&&function(e,t,n){const s=e.parentElement,r=window.getComputedStyle(s);let o=null;if("string"==typeof r.lineHeight&&r.lineHeight.endsWith("px")){const e=parseFloat(r.lineHeight);isNaN(e)||(o=e)}const i=Array.from(t.getClientRects());for(const e of i){const t={left:e.left,top:e.top,height:e.height,width:e.width};if(null!==o){const e=o-t.height;t.top-=e,t.height=o}n.push(t)}}(e,r,n)}else if(e.nodeType===Node.ELEMENT_NODE){if(!(0,o.rangesOverlap)(t,s))return;for(const s of Array.from(e.childNodes))a(s,t,n)}}},"M++g":function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n("pVnL")),o=s(n("8OQS")),i=s(n("TSYQ")),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(s,o,i):s[o]=e[o]}s.default=e,n&&n.set(e,s);return s}(n("q1tI")),l=s(n("17x9")),u=s(n("i8i4")),p=s(n("5pch")),d=s(n("96rG")),c=n("eAf/"),h=s(n("uBl0")),f=s(n("XwLL"));const g=["onFormatChange","checkValidity","useArrowKeys"];function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}const{firstNumericalParse:y,captureScratchpadTouchStart:v}=h.default,b=f.default.toNumericString,w=f.default.getNumericFormat;class k extends a.Component{constructor(...e){super(...e),this.state={format:this.props.format},this.getValue=()=>this.parseInputValue(u.default.findDOMNode(this.refs.input).value),this.getStringValue=()=>u.default.findDOMNode(this.refs.input).value.toString(),this.parseInputValue=e=>{if(""===e){const e=this.props.placeholder;return p.default.isFinite(e)?+e:null}const t=y(e);return p.default.isFinite(t)?t:this.props.value},this.focus=()=>{u.default.findDOMNode(this.refs.input).focus(),this._handleFocus()},this.blur=()=>{u.default.findDOMNode(this.refs.input).blur(),this._handleBlur()},this.setSelectionRange=(e,t)=>{u.default.findDOMNode(this).setSelectionRange(e,t)},this.getSelectionStart=()=>u.default.findDOMNode(this).selectionStart,this.getSelectionEnd=()=>u.default.findDOMNode(this).selectionEnd,this._checkValidity=e=>{if(null==e)return!0;const t=y(e),n=this.props.checkValidity;return p.default.isFinite(t)&&n(t)},this._handleChange=e=>{const t=e.target.value,n=this.parseInputValue(t),s=w(t);this.props.onChange(n),s&&(this.props.onFormatChange(n,s),this.setState({format:s}))},this._handleFocus=()=>{this.props.onFocus&&this.props.onFocus()},this._handleBlur=e=>{e&&"keypress"===e.type&&13!==e.keyCode||(this._setValue(this.props.value,this.state.format),this.props.onBlur&&this.props.onBlur())},this._onKeyDown=e=>{if(this.props.onKeyDown&&this.props.onKeyDown(e),!this.props.useArrowKeys||!p.default.contains(["ArrowUp","ArrowDown"],e.key))return;let t=this.getValue();t===Math.floor(t)&&("ArrowUp"===e.key?t+=1:"ArrowDown"===e.key&&(t-=1),this._checkValidity(t)&&this.props.onChange(t))},this._setValue=(e,t)=>{(0,d.default)(u.default.findDOMNode(this.refs.input)).val(b(e,t))}}render(){let e=(0,i.default)({"number-input":!0,"invalid-input":!this._checkValidity(this.props.value),mini:"mini"===this.props.size,small:"small"===this.props.size,normal:"normal"===this.props.size});null!=this.props.className&&(e=e+" "+this.props.className);const t=this.props,n=(0,o.default)(t,g);return a.createElement("input",(0,r.default)({},n,{className:e,type:"text",ref:"input",onChange:this._handleChange,onFocus:this._handleFocus,onBlur:this._handleBlur,onKeyPress:this._handleBlur,onKeyDown:this._onKeyDown,onTouchStart:v,defaultValue:b(this.props.value,this.state.format),value:void 0}))}componentDidUpdate(e){c.number.equal(this.getValue(),this.props.value)||this._setValue(this.props.value,this.state.format)}}k.propTypes={value:l.default.number,format:l.default.string,placeholder:l.default.oneOfType([l.default.string,l.default.number]),onChange:l.default.func.isRequired,onFormatChange:l.default.func,checkValidity:l.default.func,size:l.default.string,label:l.default.oneOf(["put your labels outside your inputs!"])},k.defaultProps={value:null,placeholder:null,format:null,onFormatChange:()=>null,checkValidity:()=>!0,useArrowKeys:!1};var M=k;t.default=M},OgJR:function(e,t,n){"use strict";function s(e,t,n,s){let r;return r="start"===t&&"start"===s?Range.START_TO_START:"start"===t&&"end"===s?Range.END_TO_START:"end"===t&&"start"===s?Range.START_TO_END:Range.END_TO_END,e.compareBoundaryPoints(r,n)}function r(e,t){const n=e.cloneRange();return n.setEnd(t.endContainer,t.endOffset),n}function o(e,t){return!(s(e,"end",t,"start")<0||s(t,"end",e,"start")<0)}function i(e,t,n,r,o){let i=-1,a=r,l=o,u=0;for(;a<=l;){if(u++,u>2*t.length)throw new Error(`Assertion error: Binary search isn't terminating? lower=${a}, upper=${l}`);const r=Math.floor((a+l)/2);if("first"===n){s(t[r],"end",e,"start")<=0?a=r+1:(i=r,l=r-1)}else{s(t[r],"start",e,"end")>=0?l=r-1:(i=r,a=r+1)}}return i}Object.defineProperty(t,"__esModule",{value:!0}),t.findFirstAndLastWordIndexes=function(e,t){const n=i(e,t,"first",0,t.length-1);if(n<0)return null;const s=i(e,t,"last",n,t.length-1);if(s<0)return null;return[n,s]},t.intersectRanges=function(e,t){if(!o(e,t))return null;const n=s(e,"start",t,"start")>0?e:t,i=s(e,"end",t,"end")<0?e:t;return r(n,i)},t.rangeIncludes=function(e,t){return s(e,"start",t,"start")<=0&&s(e,"end",t,"end")>=0},t.rangesOverlap=o,t.spanRanges=r,t.unionRanges=function(e,t){if(!o(e,t))return null;const n=s(e,"start",t,"start")<0?e:t,i=s(e,"end",t,"end")>0?e:t;return r(n,i)}},"P++F":function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(s,o,i):s[o]=e[o]}s.default=e,n&&n.set(e,s);return s}(n("q1tI")),o=s(n("17x9")),i=s(n("5pch")),a=s(n("Pwnf")),l=n("JimW"),u=s(n("gE8/")),p=s(n("6RhW")),d=n("j8wP"),c=s(n("Atlv"));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}class f extends r.Component{componentDidMount(){this.props.trackInteraction()}render(){return r.createElement(l.View,{style:m.tooltipBody},r.createElement(c.default,{apiOptions:this.props.apiOptions,content:this.props.content,widgets:this.props.widgets}))}}f.propTypes={apiOptions:d.ApiOptions.propTypes,content:o.default.string,trackInteraction:o.default.func.isRequired,widgets:o.default.objectOf(o.default.any)};class g extends r.Component{constructor(...e){super(...e),this.getUserInput=()=>({}),this.simpleValidate=e=>g.validate(this.getUserInput(),e)}static validate(e,t){return{type:"points",earned:0,total:0,message:null}}render(){const e=r.createElement(f,{apiOptions:this.props.apiOptions,content:this.props.definition,key:this.props.definition,trackInteraction:this.props.trackInteraction,widgets:this.props.widgets});return r.createElement(p.default,{content:e,placement:"top"},r.createElement("span",{className:"perseus-widget-definition"},r.createElement(l.View,{style:m.definitionLink},this.props.togglePrompt)))}}g.defaultProps={togglePrompt:"define me",definition:"definition goes here"};const m={tooltipBody:{color:a.default.offBlack,display:"block",fontSize:20,fontWeight:500,lineHeight:"30px",margin:u.default.xSmall_8},definitionLink:{borderBottom:`dashed 1px ${a.default.blue}`,color:a.default.blue,cursor:"pointer",display:"inline-block",textDecoration:"none"}};var y={name:"definition",displayName:"Definition",accessible:!0,defaultAlignment:"inline",widget:g,transform:i.default.identity};t.default=y},P76s:function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n("mR6N"),o=m(n("q1tI")),i=s(n("i8i4")),a=s(n("5pch")),l=s(n("96rG")),u=s(n("XDp7")),p=s(n("o0j1")),d=s(n("Atlv")),c=s(n("+lle")),h=n("zahm"),f=m(n("HEOz"));function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function m(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(s,o,i):s[o]=e[o]}return s.default=e,n&&n.set(e,s),s}class y extends o.Component{measureLineHeight(){return"number"!=typeof this._cachedLineHeight&&this.forceMeasureLineHeight(),this._cachedLineHeight}forceMeasureLineHeight(){this.$body.text(" "),this._cachedLineHeight=this.$end.offset().top-this.$body.offset().top,this.$body.text("")}render(){return o.createElement("div",{className:(0,r.css)(v.measurer)},o.createElement("div",null,o.createElement("div",{ref:e=>this.$body=(0,l.default)(e),className:"paragraph"}),o.createElement("div",{ref:e=>this.$end=(0,l.default)(e)})))}}const v=r.StyleSheet.create({measurer:{position:"absolute",width:"100%",top:0,left:0}});class b extends o.Component{constructor(...e){super(...e),this.state={nLines:null,startLineNumbersAfter:0,stylesAreApplied:!1},this._handleSerializedHighlightsUpdate=e=>{this.props.onChange({highlights:e})}}componentDidMount(){this._updateState(),this._onResize=a.default.throttle((()=>{this.shouldRenderJipt()||(this._lineHeightMeasurer.forceMeasureLineHeight(),this._updateState())}),500),window.addEventListener("resize",this._onResize),this._stylesAppiedTimer=window.setTimeout((()=>{this.setState({stylesAreApplied:!0})}),0)}shouldComponentUpdate(e,t){return!a.default.isEqual(this.props,e)||!a.default.isEqual(this.state,t)}componentDidUpdate(){this._updateState()}componentWillUnmount(){window.removeEventListener("resize",this._onResize),clearTimeout(this._stylesAppiedTimer)}_updateState(){this.shouldRenderJipt()||this.setState({nLines:this._measureLines(),startLineNumbersAfter:this._getInitialLineNumber()})}_measureLines(){const e=(0,l.default)(i.default.findDOMNode(this.refs.content)).height(),t=this._getLineHeight();return Math.round(e/t)}_getInitialLineNumber(){let e=!0;return this.props.findWidgets(((t,n)=>"passage"===n.type&&(t===this.props.widgetId&&(e=!1),e))).map((e=>e.getLineCount())).reduce(((e,t)=>e+t),0)}_getLineHeight(){return this._lineHeightMeasurer.measureLineHeight()}getLineCount(){return null!=this.state.nLines?this.state.nLines:this._measureLines()}_getStartRefLineNumber(e){const t=c.default.START_REF_PREFIX+e,n=this.refs[t];if(!n)return null;const s=(0,l.default)(i.default.findDOMNode(n));let r=s.next();0===r.length&&(r=s);const o=r.offset().top;return this.state.startLineNumbersAfter+1+this._convertPosToLineNumber(o)}_getEndRefLineNumber(e){const t=c.default.END_REF_PREFIX+e,n=this.refs[t];if(!n)return null;const s=(0,l.default)(i.default.findDOMNode(n));let r=s.prev();0===r.length&&(r=s);const o=r.height(),a=r.offset().top;let u=this._convertPosToLineNumber(a+o);return 0===o&&(u+=1),this.state.startLineNumbersAfter+u}_convertPosToLineNumber(e){const t=e-(0,l.default)(i.default.findDOMNode(this.refs.content)).offset().top,n=this._getLineHeight();return Math.round(t/n)}_getRefContent(e){const t=c.default.START_REF_PREFIX+e,n=this.refs[t];return n?n.getRefContent():null}getReference(e){const t=this._getStartRefLineNumber(e),n=this._getEndRefLineNumber(e);if(null==t||null==n)return null;return{startLine:t,endLine:n,content:this._getRefContent(e)}}getUserInput(){return null}simpleValidate(e){return b.validate(this.getUserInput(),e)}static validate(e,t){return{type:"points",earned:0,total:0,message:null}}_renderInstructions(e){const t=e.firstQuestionRef,n=e.firstSentenceRef;let s="";t&&(s+=f._("The symbol %(questionSymbol)s indicates that question %(questionNumber)s references this portion of the passage.",{questionSymbol:"[["+t+"]]",questionNumber:t})),n&&(s+=f._(" The symbol %(sentenceSymbol)s indicates that the following sentence is referenced in a question.",{sentenceSymbol:"["+n+"]"}));const r=c.default.parse(s);return o.createElement("div",{className:"perseus-widget-passage-instructions"},c.default.output(r))}shouldRenderJipt(){return u.default.useJIPT&&-1!==this.props.passageText.indexOf("crwdns")}_renderContent(e){const t=this.state.stylesAreApplied,n=!this.props.reviewModeRubric;return o.createElement(p.default,{editable:n,enabled:t,onSerializedHighlightsUpdate:this._handleSerializedHighlightsUpdate,serializedHighlights:this.props.highlights},o.createElement("div",{ref:"content"},o.createElement(y,{ref:e=>this._lineHeightMeasurer=e}),c.default.output(e)))}_hasFootnotes(){const e=this.props.footnotes;return!/^\s*$/.test(e)}_renderFootnotes(){const e=this.props.footnotes,t=c.default.parse(e);return c.default.output(t)}render(){let e;const t=this.state.nLines;this.props.showLineNumbers&&t&&(e=a.default.range(1,t+1).map((e=>{const t=e+this.state.startLineNumbersAfter;if(4===t){const e=f._("Line ");return o.createElement("span",{key:"line-marker",className:"line-marker"},e)}return o.createElement("span",{key:e},t)})));const n={firstSentenceRef:null,firstQuestionRef:null},s=this.props.passageText.replace(/("{1})([^"]*)("{1})/g,"“$2”"),r=c.default.parse(s,n),i=/\S/.test(this.props.passageTitle);return o.createElement("div",null,o.createElement("div",{className:"perseus-widget-passage-container"},this._renderInstructions(n),o.createElement("div",{className:"perseus-widget-passage"},i&&o.createElement("h3",{className:"passage-title"},o.createElement(d.default,{content:this.props.passageTitle,linterContext:this.props.linterContext})),e&&o.createElement("div",{className:"line-numbers","aria-hidden":!0},e),!i&&o.createElement("h3",{className:"perseus-sr-only"},f._("Beginning of reading passage.")),o.createElement("div",{className:"passage-text"},this.shouldRenderJipt()?o.createElement(d.default,{content:this.props.passageText}):this._renderContent(r)),this._hasFootnotes()&&[o.createElement("h4",{key:"footnote-start",className:"perseus-sr-only"},f._("Beginning of reading passage footnotes.")),o.createElement("div",{key:"footnotes",className:"footnotes"},this._renderFootnotes())],o.createElement("div",{className:"perseus-sr-only"},f._("End of reading passage.")))))}}b.defaultProps={passageTitle:"",passageText:"",footnotes:"",showLineNumbers:!0,highlights:{},linterContext:h.linterContextDefault};var w={name:"passage",displayName:"Passage (SAT only)",widget:b,transform:e=>a.default.pick(e,"passageTitle","passageText","footnotes","showLineNumbers"),isLintable:!0};t.default=w},RY23:function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n("pVnL")),o=h(n("q1tI")),i=s(n("17x9")),a=s(n("5pch")),l=h(n("+jAD")),u=s(n("fUCW")),p=s(n("Atlv")),d=n("zahm");function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function h(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(s,o,i):s[o]=e[o]}return s.default=e,n&&n.set(e,s),s}class f extends o.Component{constructor(...e){super(...e),this.getUserInput=()=>u.default.getUserInput.call(this),this.change=(...e)=>l.change.apply(this,e),this.simpleValidate=e=>f.validate(this.getUserInput(),e)}static validate(e,t){return{type:"points",earned:0,total:0,message:null}}render(){return o.createElement(p.default,{content:this.props.content,inline:!0,apiOptions:this.props.apiOptions,linterContext:this.props.linterContext})}}f.propTypes=(0,r.default)({},l.propTypes,{content:i.default.string,linterContext:d.linterContextProps}),f.defaultProps={content:"",linterContext:d.linterContextDefault};var g={name:"passage-ref-target",displayName:"PassageRefTarget",defaultAlignment:"inline",widget:f,hidden:!0,transform:e=>a.default.pick(e,"content"),version:{major:0,minor:0},isLintable:!0};t.default=g},SNGj:function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.VIDEO_BY_YOUTUBE_ID_QUERY=t.VIDEO_BY_READABLE_ID_QUERY=void 0;var r=y(n("q1tI")),o=s(n("lTCR")),i=n("8r+/"),a=s(n("HAtO")),l=n("mR6N"),u=n("JimW"),p=n("JasB"),d=s(n("SGU3")),c=y(n("HEOz"));let h,f,g=e=>e;function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function y(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(s,o,i):s[o]=e[o]}return s.default=e,n&&n.set(e,s),s}const v=/^https?:\/\//,b=(0,i.gqlOp)((0,o.default)(h||(h=g`
    query videoByReadableId($videoId: String!) {
        video(id: $videoId) {
            id
            title
            youtubeId
            contentId
        }
    }
`)));t.VIDEO_BY_READABLE_ID_QUERY=b;const w=(0,i.gqlOp)((0,o.default)(f||(f=g`
    query videoDataYoutubeId($videoId: String!) {
        video: videoByYoutubeId(youtubeId: $videoId) {
            id
            title
            youtubeId
            contentId
        }
    }
`)));t.VIDEO_BY_YOUTUBE_ID_QUERY=w;const k=l.StyleSheet.create({transcriptLink:{flexDirection:"row",width:"100%",justifyContent:"center"}});var M=e=>{const t=e.location;if(!t)return r.createElement("div",null);let n,s="";return v.test(t)&&(n=t,s=(e=>{const t=e.match(/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/);return t&&11===t[7].length?t[7]:"videoNotFound"})(n)),r.createElement(a.default,{query:s?w:b,variables:s?{videoId:s}:{videoId:t},fetchPolicy:"cache-and-network"},(e=>{var t;const n=null==(t=e.data)?void 0:t.video;return r.createElement(u.View,{style:k.transcriptLink},r.createElement(u.Text,null,null==n?void 0:n.title),r.createElement(p.Strut,{size:10}),r.createElement(d.default,{href:"/transcript/"+((null==n?void 0:n.contentId)||"videoNotFound"),target:"_blank",className:"visited-no-recolor"},c._("See video transcript")))}))};t.default=M},SrcR:function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n("pVnL")),o=c(n("q1tI")),i=s(n("17x9")),a=s(n("5pch")),l=c(n("HEOz")),u=c(n("+jAD")),p=s(n("fUCW"));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function c(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(s,o,i):s[o]=e[o]}return s.default=e,n&&n.set(e,s),s}const h={display:"table",tableLayout:"fixed"},f={display:"table-row"},g={display:"table-cell",padding:5},m={borderRadius:10,cursor:"pointer"},y={padding:5,display:"inline-block"},v={float:"right",paddingRight:5},b={plus:()=>[[!1,!0,!1],[!0,!0,!0],[!1,!0,!1]],x:()=>[[!0,!1,!0],[!1,!0,!1],[!0,!1,!0]],"plus/x":e=>e%2?b.x():b.plus()};class w extends o.Component{constructor(...e){super(...e),this._flip=()=>{this.props.onChange(!this.props.value)}}render(){const e=this.props.value?"#55dd55":"#115511",t=a.default.extend({},m,{width:this.props.size,height:this.props.size,backgroundColor:e});return o.createElement("div",{style:t,onClick:this._flip})}}w.propTypes={value:i.default.bool.isRequired,size:i.default.number.isRequired};class k extends o.Component{render(){return o.createElement("div",{style:h,className:"no-select"},a.default.map(this.props.cells,((e,t)=>o.createElement("div",{key:t,style:f},a.default.map(e,((e,n)=>o.createElement("div",{key:n,style:g},o.createElement(w,{value:e,size:this.props.size,onChange:a.default.partial(this.props.onChange,t,n)}))))))))}}k.propTypes={cells:i.default.arrayOf(i.default.arrayOf(i.default.bool)).isRequired,size:i.default.number.isRequired};const M=(e,t,n,s)=>((e,t)=>a.default.map(e,((e,n)=>a.default.map(e,((e,s)=>t(n,s)?!e:e)))))(e,((e,r)=>{const o=e-t,i=r-n;return Math.abs(o)<=1&&Math.abs(i)<=1&&s[o+1][i+1]}));class x extends o.Component{constructor(...e){super(...e),this.getUserInput=()=>p.default.getUserInput.call(this),this.change=(...e)=>u.change.apply(this,e),this._width=()=>0!==this.props.cells.length?this.props.cells[0].length:0,this._initNextPatterns=()=>{this._currPattern=b[this.props.flipPattern](0),this._nextPattern=b[this.props.flipPattern](1),this._patternIndex=2},this._shiftPatterns=()=>{this._currPattern=this._nextPattern,this._nextPattern=b[this.props.flipPattern](this._patternIndex),this._patternIndex++},this._flipTile=(e,t)=>{const n=M(this.props.cells,e,t,this._currPattern);this._shiftPatterns(),this.change({cells:n,moveCount:this.props.moveCount+1})},this._reset=()=>{this.change({cells:this.props.startCells,moveCount:0})},this.simpleValidate=e=>P(e,this.getUserInput())}render(){const e=60*this._width();return o.createElement("div",null,o.createElement(k,{cells:this.props.cells,size:50,onChange:this._flipTile}),o.createElement("div",{style:{width:e}},o.createElement("div",{style:y},l.ngettext("Moves: %(num)s","Moves: %(num)s",this.props.moveCount)),o.createElement("div",{style:v},o.createElement("input",{type:"button",value:"Reset",onClick:this._reset,className:"simple-button"}))),o.createElement("div",{className:"clearfix"}))}componentDidMount(){this._initNextPatterns()}componentDidUpdate(e){e.flipPattern!==this.props.flipPattern&&this._initNextPatterns()}}x.propTypes=(0,r.default)({},u.propTypes,{cells:i.default.arrayOf(i.default.arrayOf(i.default.bool)),startCells:i.default.arrayOf(i.default.arrayOf(i.default.bool)),flipPattern:i.default.string.isRequired,moveCount:i.default.number.isRequired}),x.defaultProps={cells:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],startCells:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],flipPattern:"plus",moveCount:0};const P=function(e,t){if(a.default.all(t.cells,((t,n)=>a.default.all(t,((t,s)=>t===e.startCells[n][s])))))return{type:"invalid",message:l._("Click on the tiles to change the lights.")};return a.default.all(t.cells,(e=>a.default.all(e,(e=>e))))?{type:"points",earned:1,total:1,message:null}:e.gradeIncompleteAsWrong?{type:"points",earned:0,total:1,message:null}:{type:"invalid",message:l._("You must turn on all of the lights to continue.")}};var C={name:"lights-puzzle",displayName:"Lights Puzzle",hidden:!0,widget:x,transform:function(e){return{cells:e.startCells,startCells:e.startCells,flipPattern:e.flipPattern}}};t.default=C},UDUP:function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(n("q1tI")),o=u(n("HEOz")),i=s(n("iUos")),a=s(n("fQFx"));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}function u(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(s,o,i):s[o]=e[o]}return s.default=e,n&&n.set(e,s),s}class p extends r.PureComponent{constructor(...e){super(...e),this.state={hoveredHighlightKey:null,hoveringTooltipFor:null},this._highlightRenderers={},this._handleMouseMove=e=>{const t={left:e.clientX,top:e.clientY},n=this._getHoveredHighlightKey(t);this.setState({hoveredHighlightKey:n})}}componentDidMount(){this._updateEditListeners(!1,this.props.editable)}UNSAFE_componentWillReceiveProps(e){this._updateEditListeners(this.props.editable,e.editable),null==this.state.hoveredHighlightKey||this.state.hoveredHighlightKey in e.highlights||this.setState({hoveredHighlightKey:null}),null==this.state.hoveringTooltipFor||this.state.hoveringTooltipFor in e.highlights||this.setState({hoveringTooltipFor:null})}componentWillUnmount(){this._updateEditListeners(this.props.editable,!1)}_updateEditListeners(e,t){!e&&t?window.addEventListener("mousemove",this._handleMouseMove):e&&!t&&(window.removeEventListener("mousemove",this._handleMouseMove),this.setState({hoveredHighlightKey:null,hoveringTooltipFor:null}))}_getHoveredHighlightKey(e){const{hoveringTooltipFor:t}=this.state;if("string"==typeof t)return t;return Object.keys(this.props.highlights).find((t=>{const n=this._highlightRenderers[t];return n&&n.isHovered(e)}))}_renderTooltip(){const{hoveredHighlightKey:e}=this.state;if(null==e)return null;const t=this.props.highlights[e];return r.createElement(a.default,{label:o._("Remove highlight"),focusNode:t.domRange.endContainer,focusOffset:t.domRange.endOffset,offsetParent:this.props.offsetParent,onClick:()=>this.props.onRemoveHighlight(e),onMouseEnter:()=>this.setState({hoveringTooltipFor:e}),onMouseLeave:()=>this.setState({hoveringTooltipFor:null})})}render(){return r.createElement("div",null,Object.keys(this.props.highlights).map((e=>r.createElement(i.default,{ref:t=>{t?this._highlightRenderers[e]=t:delete this._highlightRenderers[e]},key:e,highlight:this.props.highlights[e],highlightKey:e,offsetParent:this.props.offsetParent,zIndexes:this.props.zIndexes}))),this.props.editable&&this._renderTooltip())}}var d=p;t.default=d},VMUI:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addHighlight=function(e,t){const n={};let r=t.domRange,o=t.firstWordIndex,i=t.lastWordIndex;for(const t of Object.keys(e)){const a=e[t],l=(0,s.unionRanges)(a.domRange,r);l?(r=l,o=Math.min(a.firstWordIndex,o),i=Math.max(a.lastWordIndex,i)):n[t]=a}const a={firstWordIndex:o,lastWordIndex:i,domRange:r},l=function(e){const t=`${(new Date).getTime()}`;if(!e.includes(t))return t;let n,s=0;do{n=`${t}-${s}`,s++}while(e.includes(n));return n}(Object.keys(n));return n[l]=a,n},t.buildHighlight=function(e,t,n){for(const t of Object.keys(e)){const r=e[t].domRange;if((0,s.rangeIncludes)(r,n))return null}const r=(0,s.findFirstAndLastWordIndexes)(n,t);if(!r)return null;const[o,i]=r,a=t[o],l=t[i];return{firstWordIndex:o,lastWordIndex:i,domRange:(0,s.spanRanges)(a,l)}},t.deserializeHighlight=function(e,t){const{firstWordIndex:n,lastWordIndex:o}=e.range,i=t[n];if(!i)throw new r.KAError(`first word index ${i} is out of bounds: must be 0–${t.length-1} inclusive`,r.Errors.Internal);const a=t[o];if(!a)throw new r.KAError(`last word index ${a} is out of bounds: must be 0–${t.length-1} inclusive`,r.Errors.Internal);return{firstWordIndex:n,lastWordIndex:o,domRange:(0,s.spanRanges)(i,a)}},t.serializeHighlight=function(e){const{firstWordIndex:t,lastWordIndex:n}=e;return{range:{type:"word-indexes",firstWordIndex:t,lastWordIndex:n}}};var s=n("OgJR"),r=n("4PhQ")},VO3A:function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n("pVnL")),o=f(n("q1tI")),i=n("mR6N"),a=s(n("XDp7")),l=f(n("+jAD")),u=s(n("fYWP")),p=n("UcaO"),d=n("zahm"),c=f(n("HEOz"));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function f(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(s,o,i):s[o]=e[o]}return s.default=e,n&&n.set(e,s),s}const g=u.default.widget;class m extends o.Component{render(){const e=[];for(let t=0;t<this.props.numGroups;t++)e.push(o.createElement("div",{role:"button","aria-label":c._("Skip to %(title)s",{title:this.props.groupTitles[t]}),key:t,className:(0,i.css)(b.indicator,t===this.props.currentGroup&&b.selectedIndicator),onClick:()=>this.props.onChangeCurrentGroup(t)}));return o.createElement("div",{className:(0,i.css)(b.indicatorContainer)},e)}}class y extends o.Component{constructor(...e){super(...e),this.state={currentGroup:0},this.change=(...e)=>l.change.apply(this,e),this.getInputPaths=()=>this._childGroup.getInputPaths(),this.setInputValue=(e,t,n)=>this._childGroup.setInputValue(e,t,n),this.focus=()=>this._childGroup.focus(),this.focusInputPath=e=>{this._childGroup.focusInputPath(e)},this.blurInputPath=e=>{this._childGroup.blurInputPath(e)},this.handleNextQuestion=()=>{const{currentGroup:e}=this.state;e<this.props.gradedGroups.length-1&&this.setState({currentGroup:e+1})}}shouldComponentUpdate(e,t){return e.gradedGroups,e!==this.props||t!==this.state}render(){if(a.default.useJIPT&&this.props.gradedGroups.length>1)return o.createElement("div",{className:(0,i.css)(b.container)},this.props.gradedGroups.map(((e,t)=>o.createElement(g,(0,r.default)({key:t},this.props,e,{inGradedGroupSet:!1,linterContext:this.props.linterContext})))));const e=this.props.gradedGroups[this.state.currentGroup];if(!e)return o.createElement("span",null,c.doNotTranslate("No current group..."));const t=this.props.gradedGroups.length,n=this.state.currentGroup<t-1?this.handleNextQuestion:null;return o.createElement("div",{className:(0,i.css)(b.container)},o.createElement("div",{className:(0,i.css)(b.top)},o.createElement("div",{className:(0,i.css)(b.title)},e.title),o.createElement("div",{className:(0,i.css)(b.spacer)}),o.createElement(m,{numGroups:t,currentGroup:this.state.currentGroup,groupTitles:this.props.gradedGroups.map((e=>e.title)),onChangeCurrentGroup:e=>this.setState({currentGroup:e})})),o.createElement(g,(0,r.default)({key:this.state.currentGroup,ref:e=>this._childGroup=e},this.props,e,{inGradedGroupSet:!0,title:null,onNextQuestion:n,linterContext:this.props.linterContext})))}}y.defaultProps={gradedGroups:[],linterContext:d.linterContextDefault};var v={name:"graded-group-set",displayName:"Graded group set (articles only)",widget:y,traverseChildWidgets:function(e,t){return{groups:e.gradedGroups.map(t)}},hidden:!1,tracking:"all",isLintable:!0};t.default=v;const b=i.StyleSheet.create({top:{display:"flex",flexDirection:"row"},spacer:{flex:1},title:{fontSize:12,color:p.gray76,textTransform:"uppercase",marginBottom:11,letterSpacing:.8},indicatorContainer:{display:"flex",flexDirection:"row"},indicator:{width:10,height:10,borderRadius:5,backgroundColor:p.grayLight,marginLeft:5,cursor:"pointer"},selectedIndicator:{backgroundColor:p.kaGreen},container:{borderTop:`1px solid ${p.gray76}`,borderBottom:`1px solid ${p.gray76}`,backgroundColor:p.tableBackgroundAccent,marginLeft:p.negativePhoneMargin,marginRight:p.negativePhoneMargin,paddingBottom:p.phoneMargin,paddingLeft:p.phoneMargin,paddingRight:p.phoneMargin,paddingTop:10,width:"auto"}})},VWbw:function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n("pVnL")),o=M(n("q1tI")),i=s(n("5pch")),a=s(n("96rG")),l=s(n("eAf/")),u=s(n("9/5/")),p=n("4PhQ"),d=s(n("jH0K")),c=s(n("qoj5")),h=s(n("bHYm")),f=s(n("M++g")),g=s(n("uBl0")),m=s(n("yfnS")),y=s(n("NT9k")),v=n("NUXr"),b=s(n("T2HF")),w=M(n("HEOz"));function k(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(k=function(e){return e?n:t})(e)}function M(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=k(t);if(n&&n.has(e))return n.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(s,o,i):s[o]=e[o]}return s.default=e,n&&n.set(e,s),s}const{number:x,point:P}=l.default,{DeprecationMixin:C}=g.default,E=g.default.eq,O=g.default.deepEq,_="unlimited";function T(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(n[0]-e[0])*(t[1]-e[1])}function S(e,t,n){return E(T(e,t,n),0)}function I(e){return E(e,0)?0:e>0?1:-1}function N(e,t){return null==e?t:e}function R(e,t,n){return n[0]<=Math.max(e[0],t[0])&&n[0]>=Math.min(e[0],t[0])&&n[1]<=Math.max(e[1],t[1])&&n[1]>=Math.min(e[1],t[1])}function A(e,t){const n=[[e[0],e[1],t[0]],[e[0],e[1],t[1]],[t[0],t[1],e[0]],[t[0],t[1],e[1]]],s=i.default.map(n,(function(e){return I(T.apply(void 0,e))}));if(s[0]!==s[1]&&s[2]!==s[3])return!0;for(let e=0;e<4;e++)if(0===s[e]&&R.apply(void 0,n[e]))return!0;return!1}function D(e,t){return i.default.map(i.default.zip(e,t),(function(e){return e[0]-e[1]}))}function j(e){return Math.sqrt(i.default.reduce(e,(function(e,t){return e+Math.pow(t,2)}),0))}function L(e){const t=i.default.zip(e,H(e));return i.default.map(t,(function(e){return j(D.apply(void 0,e))}))}function F(e){const t=i.default.zip(H(e,-1),e,H(e,1)),n=i.default.map(t,(function(e){const t=D(e[1],e[0]),n=D(e[2],e[1]),s=Math.acos((r=t,o=n,i.default.reduce(i.default.zip(r,o),(function(e,t){return e+t[0]*t[1]}),0)/(j(t)*j(n))));var r,o;return I(T.apply(void 0,e))>0?s:-s})),s=i.default.reduce(n,(function(e,t){return e+t}),0);return i.default.map(n,(function(e){return s>0?Math.PI-e:Math.PI+e}))}function W(e,t,n){if(e.length!==t.length)return!1;const s=e.length,r=F(e),o=F(t),a=L(e),l=L(t);for(let e=0;e<2*s;e++){let t=o.slice(),u=l.slice();if(e>=s&&(t.reverse(),u.reverse(),u=H(u,1)),t=H(t,e),u=H(u,e),O(r,t)){const e=i.default.zip(a,u),t=i.default.map(e,(function(e){return e[0]/e[1]})),s=i.default.all(t,(function(e){return E(t[0],e)})),r=i.default.all(e,(function(e){return x.equal(e[0],e[1],n)}));if(s&&r)return!0}}return!1}function U(e,t){return e<t||E(e,t)}function q(e){let t=e[0],n=e[1],s=e[2];const r=e[3];t<0&&(t*=-1,n*=-1,s*=-1);const o=2*Math.PI;for(n<0&&(n*=-1,s*=-1,s+=o/2);s>0;)s-=o;for(;s<0;)s+=o;return[t,n,s,r]}function H(e,t){return t=void 0===t?1:t%e.length,e.slice(t).concat(e.slice(0,t))}function z(e){return e.replace(/(?:^|-)(.)/g,(function(e,t){return t.toUpperCase()}))}function B(e,t){if(E(e[0],t[0]))return"x = "+e[0].toFixed(3);const n=(t[1]-e[1])/(t[0]-e[0]),s=e[1]-n*e[0];return"y = "+n.toFixed(3)+"x + "+s.toFixed(3)}const G={showGraph:function(e){return{markings:e.showGraph?"graph":"none"}}},V=e=>Y(e)&&(null==e.graph.coords||0===e.graph.coords.length),Y=e=>"point"===e.graph.type&&e.graph.numPoints===_||"polygon"===e.graph.type&&e.graph.numSides===_;class X extends o.Component{constructor(...e){super(...e),this.state={shouldShowInstructions:V(this.props)},this._getShouldShowInstructions=e=>(e=e||this.props,this.isClickToAddPoints(e)&&(null==e.graph.coords||0===e.graph.coords.length)),this.deprecatedProps=G,this.setGraphie=e=>{this.graphie=e,this.setupGraphie()},this.handleAddPointsMouseDown=e=>{if(!this.isClickToAddPoints())throw new p.KAError("handleAddPointsClick should not be registeredwhen isClickToAddPoints() is false",p.Errors.Internal);if(!this.isCoordInTrash(e)){let n;if("point"===this.props.graph.type){if(n=this.createPointForPointsType(e,this.points.length),!n.constrain())return void n.remove();this.points.push(n);const t=this.points.length-1;this.points[t].grab(e),this.updateCoordsFromPoints()}else if("polygon"===this.props.graph.type){var t;if(null!=(t=this.polygon)&&t.closed())return;n=this.createPointForPolygonType(e,this.points.length),this.points.push(n);const s=this.points.length-1;this.points[s].grab(e),this.updatePolygon()}this.setState({shouldShowInstructions:!1})}},this.resetGraphie=()=>{this.shouldResetGraphie=!1,this.parabola=null,this.sinusoid=null,this.refs.graph.reset()},this.setupGraphie=()=>{var e,t;(this.setTrashCanVisibility(0),this.isClickToAddPoints()&&this.setTrashCanVisibility(.5),this.props.apiOptions.isMobile)&&(this.horizHairline=new b.default(this.graphie,[0,0],[0,0],{normalStyle:{strokeWidth:1}}),this.horizHairline.attr({stroke:m.default.INTERACTIVE}),null==(e=this.horizHairline)||e.hide(),this.vertHairline=new b.default(this.graphie,[0,0],[0,0],{normalStyle:{strokeWidth:1}}),this.vertHairline.attr({stroke:m.default.INTERACTIVE}),null==(t=this.vertHairline)||t.hide());this["add"+z(this.props.graph.type)+"Controls"]()},this.showHairlines=e=>{var t,n,s,r;this.props.apiOptions.isMobile&&"none"!==this.props.markings&&(null==(t=this.horizHairline)||t.moveTo([this.props.range[0][0],e[1]],[this.props.range[0][1],e[1]]),null==(n=this.horizHairline)||n.show(),null==(s=this.vertHairline)||s.moveTo([e[0],this.props.range[1][0]],[e[0],this.props.range[1][1]]),null==(r=this.vertHairline)||r.show())},this.hideHairlines=()=>{var e,t;this.props.apiOptions.isMobile&&(null==(e=this.horizHairline)||e.hide(),null==(t=this.vertHairline)||t.hide())},this.setTrashCanVisibility=e=>{const t=this.graphie;if(x.equal(e,0))this.trashCan&&(this.trashCan.remove(),this.trashCan=null);else if(!this.props.apiOptions.isMobile){var n,s;if(!this.trashCan)this.trashCan=null==t||null==(s=t.raphael)?void 0:s.image("https://ka-perseus-graphie.s3.amazonaws.com/b1452c0d79fd0f7ff4c3af9488474a0a0decb361.png",t.xpixels-40,t.ypixels-40,40,40);null==(n=this.trashCan)||n.attr({opacity:e})}},this.isClickToAddPoints=e=>(e=e||this.props,Y(e)),this._lineStroke=()=>this.props.isMobile?{"stroke-width":3}:{},this.addLine=e=>{const t=this,n=t.graphie,s=X.getLineCoords(t.props.graph,t.props),o=t.points=i.default.map(s,(e=>h.default.addMaybeMobileMovablePoint(this,{coord:e,constraints:[h.default.MovablePoint.constraints.bound(),h.default.MovablePoint.constraints.snap()],onMove:()=>{const e=i.default.extend({},t.props.graph,{coords:i.default.invoke(o,"coord")});t.onChange({graph:e})}}))),a={points:o,static:!0,normalStyle:(0,r.default)({stroke:this.props.apiOptions.isMobile?m.default.BLUE_C:m.default.INTERACTIVE},this._lineStroke())};"line"===e?a.extendLine=!0:"ray"===e&&(a.extendRay=!0),t.line=h.default.addMovableLine(n,a),o[0].listen("constraints","isLine",(e=>!P.equal(e,o[1].coord()))),o[1].listen("constraints","isLine",(e=>!P.equal(e,o[0].coord())))},this.removeLine=()=>{var e;i.default.invoke(this.points,"remove"),null==(e=this.line)||e.remove()},this.addLinearControls=()=>{this.addLine("line")},this.removeLinearControls=()=>{this.removeLine()},this.addQuadraticControls=()=>{let e=this.props.graph.coords;e||(e=X.defaultQuadraticCoords(this.props));const t=()=>{const e=i.default.extend({},this.props.graph,{coords:[n.coord(),s.coord(),r.coord()]});this.onChange({graph:e}),this.updateQuadratic()};let n=null;n=this.pointA=h.default.addMaybeMobileMovablePoint(this,{coord:e[0],constraints:[h.default.MovablePoint.constraints.bound(),h.default.MovablePoint.constraints.snap(),e=>!n||e[0]!==s.coord()[0]&&e[0]!==r.coord()[0]],onMove:t});let s=null;s=this.pointB=h.default.addMaybeMobileMovablePoint(this,{coord:e[1],constraints:[h.default.MovablePoint.constraints.bound(),h.default.MovablePoint.constraints.snap(),e=>!s||e[0]!==n.coord()[0]&&e[0]!==r.coord()[0]],onMove:t});let r=null;r=this.pointC=h.default.addMaybeMobileMovablePoint(this,{coord:e[2],constraints:[h.default.MovablePoint.constraints.bound(),h.default.MovablePoint.constraints.snap(),e=>!r||e[0]!==n.coord()[0]&&e[0]!==s.coord()[0]],onMove:t}),this.updateQuadratic()},this.updateQuadratic=()=>{const e=X.getCurrentQuadraticCoefficients(this.props);if(!e)return;const t=e[0],n=e[1],s=e[2];if(this.parabola){var o,i;const e=null==(o=this.graphie)?void 0:o.svgParabolaPath(t,n,s);null==(i=this.parabola)||i.attr({path:e})}else{var a,l,u;this.parabola=null==(a=this.graphie)?void 0:a.parabola(t,n,s),null==(l=this.parabola)||l.attr((0,r.default)({stroke:this.props.apiOptions.isMobile?m.default.BLUE_C:m.default.DYNAMIC},this._lineStroke())),null==(u=this.parabola)||u.toBack()}},this.removeQuadraticControls=()=>{var e,t,n;null==(e=this.pointA)||e.remove(),null==(t=this.pointB)||t.remove(),null==(n=this.pointC)||n.remove(),this.parabola&&(this.parabola.remove(),this.parabola=null)},this.addSinusoidControls=()=>{let e=this.props.graph.coords;e||(e=X.defaultSinusoidCoords(this.props));const t=()=>{const e=i.default.extend({},this.props.graph,{coords:[n.coord(),s.coord()]});this.onChange({graph:e}),this.updateSinusoid()};let n=null;n=this.pointA=h.default.addMaybeMobileMovablePoint(this,{coord:e[0],constraints:[h.default.MovablePoint.constraints.bound(),h.default.MovablePoint.constraints.snap(),e=>!n||e[0]!==s.coord()[0]],onMove:t});const s=this.pointB=h.default.addMaybeMobileMovablePoint(this,{coord:e[1],constraints:[h.default.MovablePoint.constraints.bound(),h.default.MovablePoint.constraints.snap(),e=>!n||e[0]!==n.coord()[0]],onMove:t});this.updateSinusoid()},this.updateSinusoid=()=>{const e=X.getCurrentSinusoidCoefficients(this.props);if(!e)return;const t=e[0],n=e[1],s=e[2],o=e[3];if(this.sinusoid){var i,a;const e=null==(i=this.graphie)?void 0:i.svgSinusoidPath(t,n,s,o);null==(a=this.sinusoid)||a.attr({path:e})}else{var l,u,p;this.sinusoid=null==(l=this.graphie)?void 0:l.sinusoid(t,n,s,o),null==(u=this.sinusoid)||u.attr((0,r.default)({stroke:this.props.apiOptions.isMobile?m.default.BLUE_C:m.default.DYNAMIC},this._lineStroke())),null==(p=this.sinusoid)||p.toBack()}},this.removeSinusoidControls=()=>{var e,t;null==(e=this.pointA)||e.remove(),null==(t=this.pointB)||t.remove(),this.sinusoid&&(this.sinusoid.remove(),this.sinusoid=null)},this.addCircleControls=()=>{const e=this.graphie,t=i.default.min(e.snap),n=this.circle=null==e?void 0:e.addCircleGraph({center:this.props.graph.center||[0,0],radius:this.props.graph.radius||i.default.min(this.props.step),snapX:e.snap[0],snapY:e.snap[1],minRadius:t,snapRadius:t});(0,a.default)(n).on("move",(()=>{const e=i.default.extend({},this.props.graph,{center:n.center,radius:n.radius});this.onChange({graph:e})}))},this.removeCircleControls=()=>{var e;null==(e=this.circle)||e.remove()},this.addLinearSystemControls=()=>{const e=this.graphie,t=X.getLinearSystemCoords(this.props.graph,this.props),n=[m.default.INTERACTIVE,m.default.GREEN],s=this.points=i.default.map(t,((e,t)=>{const s=[];for(let r=0;r<e.length;r+=1){const o=e[r];s.push(h.default.addMaybeMobileMovablePoint(this,{coord:o,constraints:[h.default.MovablePoint.constraints.bound(),h.default.MovablePoint.constraints.snap(),e=>{const t=s[1-r];if(t)return!P.equal(e,t.coord())}],onMove:()=>{const e=i.default.extend({},this.props.graph,{coords:i.default.map(this.points,(e=>i.default.invoke(e,"coord")))});this.onChange({graph:e})},normalStyle:{fill:n[t]},highlightStyle:{fill:n[t]}}))}return s}));this.lines=i.default.map(s,((t,s)=>h.default.addMovableLine(e,{points:t,static:!0,extendLine:!0,normalStyle:{stroke:n[s]}})))},this.removeLinearSystemControls=()=>{i.default.invoke(this.lines,"remove"),i.default.map(this.points,(e=>i.default.invoke(e,"remove")))},this.isCoordInTrash=e=>{if(this.props.apiOptions.isMobile)return!1;const t=this.graphie,n=null==t?void 0:t.scalePoint(e);return n[0]>=t.xpixels-40&&n[1]>=t.ypixels-40},this.createPointForPointsType=(e,t)=>{const n=this,s=()=>{n.points=i.default.filter(n.points,(function(e){return e!==o})),n.updateCoordsFromPoints(),setTimeout(o.remove.bind(o),0)};let o=null;return o=h.default.addMaybeMobileMovablePoint(this,(0,r.default)({coord:e,constraints:[h.default.MovablePoint.constraints.bound(),h.default.MovablePoint.constraints.snap(),function(e){return i.default.all(n.points,(function(t){return o===t||!P.equal(e,t.coord())}))}],onMoveStart:function(){n.isClickToAddPoints()&&n.setTrashCanVisibility(1)},onMove:n.updateCoordsFromPoints,onMoveEnd:function(e){n.isClickToAddPoints()&&(n.isCoordInTrash(e)&&s(),n.setTrashCanVisibility(.5))}},this.props.apiOptions.isMobile&&n.isClickToAddPoints()?{onRemove:s}:{})),o},this.removePoint=e=>{let t=null;return this.points=i.default.filter(this.points,(function(n,s){return n!==e||(t=s,!1)})),t},this.createPointForPolygonType=(e,t)=>{const n=!i.default.contains(["angles","sides"],this.props.graph.snapTo),s=e=>(t+e+this.points.length)%this.points.length,o=()=>{var e;const t=this.removePoint(l);var n;null!=(e=this.polygon)&&e.closed()&&(this.points=H(this.points,t),null==(n=this.polygon)||n.update({closed:!1}));this.updatePolygon(),this.clearCoords(),setTimeout(l.remove.bind(l),0)},a=(0,u.default)(((e,t)=>{e.state.isInitialMove=t}),1e3),l=h.default.addMaybeMobileMovablePoint(this,(0,r.default)({coord:e,constraints:[h.default.MovablePoint.constraints.bound(),n?h.default.MovablePoint.constraints.snap():null,e=>{if(null==this.points||0===this.points.length)return!0;const n=i.default.invoke(this.points,"coord");if(n[t]=e,!this.isClickToAddPoints()){if(S(n[s(-2)],n[s(-1)],n[t])||S(n[s(-1)],n[t],n[s(1)])||S(n[t],n[s(1)],n[s(2)]))return!1;const e=i.default.zip(n,H(n));if(this.points.length>3)for(let t=-1;t<=0;t++){const n=e[s(t)],r=i.default.without(e,n,e[s(t-1)],e[s(t+1)]);for(let e=0;e<r.length;e++){if(A(n,r[e]))return!1}}}if("angles"===this.props.graph.snapTo&&this.points.length>2){var r,o;const e=i.default.map(F(n),(function(e){return 180*e/Math.PI}));i.default.each([-1,1],(function(t){e[s(t)]=Math.round(e[s(t)])}));const a=function(e,t,r){return(y.default.findAngle(n[s(e)],n[s(r)],n[s(t)])+360)%360},l=[e[s(-1)]-a(-2,-1,1),e[s(1)]-a(-1,1,2)];if(l[2]=180-(l[0]+l[1]),i.default.any(l,(function(e){return U(e,1)})))return!1;const u=j(D(n[s(-1)],n[s(1)])),p=1===I(T(n[s(-1)],n[s(1)],n[t])),d=Math.sin(l[1]*Math.PI/180)/Math.sin(l[2]*Math.PI/180)*u,c=y.default.findAngle(n[s(1)],n[s(-1)]),h=null==(r=this.graphie)?void 0:r.polar(d,c+(p?1:-1)*l[0]);return null==(o=this.graphie)?void 0:o.addPoints(n[s(-1)],h)}if("sides"===this.props.graph.snapTo&&this.points.length>1){var a,l;const e=i.default.map([[n[s(-1)],n[t]],[n[t],n[s(1)]],[n[s(-1)],n[s(1)]]],(function(e){return j(D.apply(void 0,e))}));if(i.default.each([0,1],(function(t){e[t]=Math.round(e[t])})),U(e[1]+e[2],e[0])||U(e[0]+e[2],e[1])||U(e[0]+e[1],e[2]))return!1;const r=(u=e[0],p=e[2],d=e[1],180*Math.acos((u*u+p*p-d*d)/(2*u*p))/Math.PI),o=y.default.findAngle(n[s(1)],n[s(-1)]),c=1===I(T(n[s(-1)],n[s(1)],n[t])),h=null==(a=this.graphie)?void 0:a.polar(e[0],o+(c?1:-1)*r);return null==(l=this.graphie)?void 0:l.addPoints(n[s(-1)],h)}var u,p,d;return!0}],onMoveStart:()=>{this.isClickToAddPoints()&&this.setTrashCanVisibility(1)},onMove:()=>{var e;null!=(e=this.polygon)&&e.closed()&&this.updateCoordsFromPoints()},onMoveEnd:e=>{const t=this.points.length>1&&(l===this.points[0]&&P.equal(e,i.default.last(this.points).coord())||l===i.default.last(this.points)&&P.equal(e,this.points[0].coord()));if(this.isClickToAddPoints()){if(this.isCoordInTrash(e))o();else if(t){const e=this.points.pop();var n,s;if(this.points.length>2)null==(n=this.polygon)||n.update({closed:!0}),this.updateCoordsFromPoints();else null==(s=this.polygon)||s.update({closed:!1}),this.clearCoords();this.updatePolygon(),setTimeout(e.remove.bind(e),0)}else{if(i.default.any(this.points,(function(t){return t!==l&&P.equal(t.coord(),e)}))){var r,u;if(this.removePoint(l),this.points.length<3)null==(u=this.polygon)||u.update({closed:!1}),this.clearCoords();else null!=(r=this.polygon)&&r.closed()&&this.updateCoordsFromPoints();this.updatePolygon(),setTimeout(l.remove.bind(l),0)}else{var p;const e=l===i.default.head(this.points)||l===i.default.last(this.points),t=!l.hasMoved(),n=!l.state.isInitialMove,s=!(null!=(p=this.polygon)&&p.closed()),r=this.points.length>2;var d;if(e&&t&&n&&s&&r)null==(d=this.polygon)||d.update({closed:!0}),this.updatePolygon(),this.updateCoordsFromPoints()}}this.setTrashCanVisibility(.5)}a(l,!1)}},this.props.apiOptions.isMobile&&this.isClickToAddPoints()?{onRemove:o}:{}));return l.state.isInitialMove=!0,l},this.updateCoordsFromPoints=()=>{const e=i.default.extend({},this.props.graph,{coords:i.default.map(this.points,(function(e){return i.default.result(e,"coord")}))});this.onChange({graph:e})},this.clearCoords=()=>{const e=i.default.extend({},this.props.graph,{coords:null});this.onChange({graph:e})},this.onChange=e=>{this.props.onChange(e),this.props.trackInteraction()},this.addPointControls=()=>{const e=X.getPointCoords(this.props.graph,this.props);this.points=[],this.points=i.default.map(e,this.createPointForPointsType,this)},this.removePointControls=()=>{i.default.invoke(this.points,"remove")},this.addSegmentControls=()=>{const e=this,t=this.graphie,n=X.getSegmentCoords(this.props.graph,this.props),s=e=>h.default.addMaybeMobileMovablePoint(this,e);this.points=[],this.lines=i.default.map(n,(function(n,o){const a=function(){const t=i.default.extend({},e.props.graph,{coords:i.default.invoke(e.lines,"coords")});e.onChange({graph:t})},l=[];for(let e=0;e<n.length;e+=1){const t=n[e];l.push(s({coord:t,constraints:[h.default.MovablePoint.constraints.bound(),h.default.MovablePoint.constraints.snap(),t=>{const n=l[1-e];return!!n&&!P.equal(t,n.coord())}],onMove:a}))}e.points=e.points.concat(l);const u=h.default.addMovableLine(t,{points:l,static:!1,constraints:[h.default.MovableLine.constraints.bound(),h.default.MovableLine.constraints.snap()],onMove:[h.default.MovableLine.onMove.updatePoints,a],normalStyle:(0,r.default)({stroke:this.props.apiOptions.isMobile?m.default.BLUE_C:m.default.INTERACTIVE},this._lineStroke()),highlightStyle:(0,r.default)({stroke:this.props.apiOptions.isMobile?m.default.BLUE_C:m.default.INTERACTING},this._lineStroke())});return i.default.invoke(l,"toFront"),u}),this)},this.removeSegmentControls=()=>{i.default.invoke(this.points,"remove"),i.default.invoke(this.lines,"remove")},this.addRayControls=()=>{this.addLine("ray")},this.removeRayControls=()=>{this.removeLine()},this.addPolygonControls=()=>{this.polygon=null;const e=X.getPolygonCoords(this.props.graph,this.props);this.points=[],this.points=i.default.map(e,this.createPointForPolygonType,this),this.updatePolygon()},this.updatePolygon=()=>{let e;e=this.polygon?this.polygon.closed():this.points.length>=3;const t=this.graphie,n=this.points.length,s=!i.default.contains(["angles","sides"],this.props.graph.snapTo),o=i.default.times(n,(function(t){return this.props.graph.showAngles&&(e||0!==t&&t!==n-1)?"angles"===this.props.graph.snapTo?"$deg0":"$deg1":""}),this),a=i.default.times(n,(function(t){return e||0!==t&&t!==n-1}),this),l=i.default.times(n,(function(t){return this.props.graph.showAngles&&(e||0!==t&&t!==n-1)?1:0}),this),u=i.default.times(n,(function(t){return!this.props.graph.showSides||!e&&t===n-1?"":"sides"===this.props.graph.snapTo?"$len0":"$len1"}),this);if(null==this.polygon){const n=this;n.polygon=h.default.addMovablePolygon(t,{constraints:[h.default.MovablePolygon.constraints.bound(),s?h.default.MovablePolygon.constraints.snap():null],closed:e,points:n.points,angleLabels:o,showRightAngleMarkers:a,numArcs:l,sideLabels:u,onMove:[h.default.MovablePolygon.onMove.updatePoints,function(){this.closed()&&n.updateCoordsFromPoints()}],normalStyle:(0,r.default)({stroke:this.props.apiOptions.isMobile?m.default.BLUE_C:m.default.INTERACTIVE},this._lineStroke())})}else this.polygon.update({closed:e,points:this.points,angleLabels:o,showRightAngleMarkers:a,numArcs:l,sideLabels:u})},this.removePolygonControls=()=>{var e;i.default.invoke(this.points,"remove"),null==(e=this.polygon)||e.remove()},this.addAngleControls=()=>{const e=this.graphie,t=X.getAngleCoords(this.props.graph,this.props);this.points=i.default.map(t,(function(t,n){return null==e?void 0:e.addMovablePoint(i.default.extend({coord:t,normalStyle:{stroke:m.default.INTERACTIVE,fill:m.default.INTERACTIVE}},1===n?{snapX:e.snap[0],snapY:e.snap[1]}:{}))})),this.angle=null==e?void 0:e.addMovableAngle({points:this.points,snapDegrees:this.props.graph.snapDegrees||1,snapOffsetDeg:this.props.graph.angleOffsetDeg||0,angleLabel:this.props.graph.showAngles?"$deg0":"",pushOut:2,allowReflex:N(this.props.graph.allowReflexAngles,!0)}),(0,a.default)(this.angle).on("move",(()=>{var e;const t=i.default.extend({},this.props.graph,{coords:null==(e=this.angle)?void 0:e.getClockwiseCoords()});this.onChange({graph:t})}))},this.removeAngleControls=()=>{var e;i.default.invoke(this.points,"remove"),null==(e=this.angle)||e.remove()},this.toggleShowAngles=()=>{const e=i.default.extend({},this.props.graph,{showAngles:!this.props.graph.showAngles});this.onChange({graph:e})},this.toggleShowSides=()=>{const e=i.default.extend({},this.props.graph,{showSides:!this.props.graph.showSides});this.onChange({graph:e})},this.getUserInput=()=>X.getUserInputFromProps(this.props),this.simpleValidate=e=>X.validate(this.getUserInput(),e,this),this.focus=a.default.noop}UNSAFE_componentWillMount(){C.UNSAFE_componentWillMount.call(this)}componentDidMount(){this.setGraphie(this.refs.graph.graphie())}UNSAFE_componentWillReceiveProps(e){this.isClickToAddPoints()!==this.isClickToAddPoints(e)&&(this.shouldResetGraphie=!0,this.setState({shouldShowInstructions:V(e)})),this.props.backgroundImage.url===e.backgroundImage.url&&this.props.backgroundImage===e.backgroundImage&&this.props.containerSizeClass===e.containerSizeClass||(this.shouldResetGraphie=!0)}componentDidUpdate(e,t){const n=e.graph.type,s=this.props.graph.type;n===s&&e.graph.allowReflexAngles===this.props.graph.allowReflexAngles&&e.graph.angleOffsetDeg===this.props.graph.angleOffsetDeg&&e.graph.numPoints===this.props.graph.numPoints&&e.graph.numSides===this.props.graph.numSides&&e.graph.numSegments===this.props.graph.numSegments&&e.graph.showAngles===this.props.graph.showAngles&&e.graph.showSides===this.props.graph.showSides&&e.graph.snapTo===this.props.graph.snapTo&&e.graph.snapDegrees===this.props.graph.snapDegrees||(this["remove"+z(n)+"Controls"](),this["add"+z(s)+"Controls"]()),this.shouldResetGraphie&&this.resetGraphie()}render(){let e,t;if(this.props.flexibleType)if(e=o.createElement("select",{value:this.props.graph.type,onChange:e=>{const t=e.target.value;this.onChange({graph:{type:t}})}},o.createElement("option",{value:"linear"},w.doNotTranslate("Linear function")),o.createElement("option",{value:"quadratic"},w.doNotTranslate("Quadratic function")),o.createElement("option",{value:"sinusoid"},w.doNotTranslate("Sinusoid function")),o.createElement("option",{value:"circle"},w.doNotTranslate("Circle")),o.createElement("option",{value:"point"},w.doNotTranslate("Point(s)")),o.createElement("option",{value:"linear-system"},w.doNotTranslate("Linear System")),o.createElement("option",{value:"polygon"},w.doNotTranslate("Polygon")),o.createElement("option",{value:"segment"},w.doNotTranslate("Line Segment(s)")),o.createElement("option",{value:"ray"},w.doNotTranslate("Ray")),o.createElement("option",{value:"angle"},w.doNotTranslate("Angle"))),"point"===this.props.graph.type)t=o.createElement("select",{key:"point-select",value:this.props.graph.numPoints||1,onChange:e=>{const t=+e.target.value||e.target.value;this.onChange({graph:{type:"point",numPoints:t,coords:null}})}},i.default.map(i.default.range(1,7),(function(e){return o.createElement("option",{key:e,value:e},e," ",w.doNotTranslate("point"),e>1&&w.doNotTranslate('"s"'))})),o.createElement("option",{value:_},w.doNotTranslate("unlimited")));else if("polygon"===this.props.graph.type)t=o.createElement("div",null,o.createElement("div",null,o.createElement("select",{key:"polygon-select",value:this.props.graph.numSides||3,onChange:e=>{const t=+e.target.value||e.target.value,n=i.default.extend({},this.props.graph,{numSides:t,coords:null,snapTo:"grid"});this.onChange({graph:n})}},i.default.map(i.default.range(3,13),(function(e){return o.createElement("option",{key:e,value:e},w.doNotTranslate("%(n)s sides",{n:e}))})),o.createElement("option",{value:_},w.doNotTranslate("unlimited sides")))),o.createElement("div",null,o.createElement("label",null," ",w.doNotTranslate("Snap to")," ",o.createElement("select",{key:"polygon-snap",value:this.props.graph.snapTo,onChange:e=>{const t=i.default.extend({},this.props.graph,{snapTo:e.target.value,coords:null});this.onChange({graph:t})}},o.createElement("option",{value:"grid"},w.doNotTranslate("grid")),this.props.graph.numSides!==_&&o.createElement(o.Fragment,null,o.createElement("option",{value:"angles"}," ",w.doNotTranslate("interior angles")," "),o.createElement("option",{value:"sides"}," ",w.doNotTranslate("side measures")," ")))),o.createElement(c.default,null,o.createElement("p",null,w.doNotTranslate("These options affect the movement of the vertex points. The grid option will guide the points to the nearest half step along the grid.")),o.createElement("p",null,w.doNotTranslate("The interior angle and side measure options guide the points to the nearest whole angle or side"))," ",w.doNotTranslate("measure respectively.")," ")),o.createElement("div",null,o.createElement("label",null,w.doNotTranslate("Show angle measures:")," ",o.createElement("input",{type:"checkbox",checked:this.props.graph.showAngles,onChange:this.toggleShowAngles})),o.createElement(c.default,null,o.createElement("p",null,w.doNotTranslate("Displays the interior angle measures.")))),o.createElement("div",null,o.createElement("label",null,w.doNotTranslate("Show side measures:")," ",o.createElement("input",{type:"checkbox",checked:this.props.graph.showSides,onChange:this.toggleShowSides})),o.createElement(c.default,null,o.createElement("p",null,w.doNotTranslate("Displays the side lengths.")))));else if("segment"===this.props.graph.type)t=o.createElement("select",{key:"segment-select",value:this.props.graph.numSegments||1,onChange:e=>{const t=+e.target.value;this.onChange({graph:{type:"segment",numSegments:t,coords:null}})}},i.default.map(i.default.range(1,7),(function(e){return o.createElement("option",{key:e,value:e},e," ",w.doNotTranslate("segment"),e>1&&w.doNotTranslate("s"))})));else if("angle"===this.props.graph.type){const e=N(this.props.graph.allowReflexAngles,!0);t=o.createElement("div",null,o.createElement("div",null,o.createElement("label",null,w.doNotTranslate("Show angle measure:")," ",o.createElement("input",{type:"checkbox",checked:this.props.graph.showAngles,onChange:this.toggleShowAngles}))),o.createElement("div",null,o.createElement("label",null,w.doNotTranslate("Allow reflex angles:")," ",o.createElement("input",{type:"checkbox",checked:e,onChange:t=>{this.onChange({graph:i.default.extend({},this.props.graph,{allowReflexAngles:!e,coords:null})})}})),o.createElement(c.default,null,o.createElement("p",null,w.doNotTranslate("Reflex angles are angles with a measure greater than 180 degrees.")),o.createElement("p",null,w.doNotTranslate("By default, these should remain enabled.")))),o.createElement("div",null,o.createElement("label",null,w.doNotTranslate("Snap to increments of")," ",o.createElement(f.default,{key:"degree-snap",placeholder:1,value:this.props.graph.snapDegrees,onChange:e=>{this.onChange({graph:i.default.extend({},this.props.graph,{snapDegrees:Math.abs(e),coords:null})})}})," ",w.doNotTranslate("degrees")," ")),o.createElement("div",null,o.createElement("label",null," ",w.doNotTranslate("With an offset of")," ",o.createElement(f.default,{key:"angle-offset",placeholder:0,value:this.props.graph.angleOffsetDeg,onChange:e=>{this.onChange({graph:i.default.extend({},this.props.graph,{angleOffsetDeg:e,coords:null})})}})," ",w.doNotTranslate("degrees")," ")))}const n=(0,v.getInteractiveBoxFromSizeClass)(this.props.containerSizeClass);let s;this.isClickToAddPoints()&&this.state.shouldShowInstructions?"point"===this.props.graph.type?s=w._("Click to add points"):"polygon"===this.props.graph.type&&(s=w._("Click to add vertices")):s=void 0;const r=this.isClickToAddPoints()?this.handleAddPointsMouseDown:null,a=this.props.gridStep||g.default.getGridStep(this.props.range,this.props.step,n[0]),l=this.props.snapStep||g.default.snapStepFromGridStep(a),u=this.props.apiOptions.isMobile;return o.createElement("div",{className:"perseus-widget perseus-widget-interactive-graph",style:{width:n[0],height:this.props.flexibleType?"auto":n[1]}},o.createElement(d.default,{instructions:s,ref:"graph",box:n,labels:this.props.labels,range:this.props.range,step:u?g.default.constrainedTickStepsFromTickSteps(this.props.step,this.props.range):this.props.step,gridStep:a,snapStep:l,markings:this.props.markings,backgroundImage:this.props.backgroundImage,showProtractor:this.props.showProtractor,showRuler:this.props.showRuler,rulerLabel:this.props.rulerLabel,rulerTicks:this.props.rulerTicks,onMouseDown:r,onGraphieUpdated:this.setGraphie,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable,isMobile:u}),e,t)}static getQuadraticCoefficients(e){const t=e[0],n=e[1],s=e[2],r=(t[0]-n[0])*(t[0]-s[0])*(n[0]-s[0]);if(0===r)return;return[(s[0]*(n[1]-t[1])+n[0]*(t[1]-s[1])+t[0]*(s[1]-n[1]))/r,(s[0]*s[0]*(t[1]-n[1])+n[0]*n[0]*(s[1]-t[1])+t[0]*t[0]*(n[1]-s[1]))/r,(n[0]*s[0]*(n[0]-s[0])*t[1]+s[0]*t[0]*(s[0]-t[0])*n[1]+t[0]*n[0]*(t[0]-n[0])*s[1])/r]}static getSinusoidCoefficients(e){const t=e[0],n=e[1],s=n[1]-t[1],r=Math.PI/(2*(n[0]-t[0]));return[s,r,t[0]*r,t[1]]}static getLineCoords(e,t){return e.coords||X.pointsFromNormalized(t,[[.25,.75],[.75,.75]])}static getPointCoords(e,t){const n=e.numPoints||1;let s=e.coords;if(s)return s;switch(n){case 1:s=[e.coord||[0,0]];break;case 2:s=[[-5,0],[5,0]];break;case 3:s=[[-5,0],[0,0],[5,0]];break;case 4:s=[[-6,0],[-2,0],[2,0],[6,0]];break;case 5:s=[[-6,0],[-3,0],[0,0],[3,0],[6,0]];break;case 6:s=[[-5,0],[-3,0],[-1,0],[1,0],[3,0],[5,0]];break;case _:s=[]}const r=X.normalizeCoords(s,[[-10,10],[-10,10]]);return X.pointsFromNormalized(t,r)}static getLinearSystemCoords(e,t){return e.coords||i.default.map([[[.25,.75],[.75,.75]],[[.25,.25],[.75,.25]]],(e=>X.pointsFromNormalized(t,e)))}static getPolygonCoords(e,t){let n=e.coords;if(n)return n;const s=e.numSides||3;if(s===_)n=[];else{const t=2*Math.PI/s,r=(1/s-.5)*Math.PI,o="sides"===e.snapTo?Math.sqrt(3)/3*7:4;n=i.default.times(s,(function(e){return[o*Math.cos(e*t+r),o*Math.sin(e*t+r)]}))}n=X.normalizeCoords(n,[[-10,10],[-10,10]]);const r=!i.default.contains(["angles","sides"],e.snapTo);return n=X.pointsFromNormalized(t,n,!r),n}static getSegmentCoords(e,t){const n=e.coords;if(n)return n;const s={1:[5],2:[5,-5],3:[5,0,-5],4:[6,2,-2,-6],5:[6,3,0,-3,-6],6:[5,3,1,-1,-3,-5]}[e.numSegments||1],r=[[-10,10],[-10,10]];return i.default.map(s,(function(e){let n=[[-5,e],[5,e]];return n=X.normalizeCoords(n,r),n=X.pointsFromNormalized(t,n),n}))}static getAngleCoords(e,t){let n=e.coords;if(n)return n;const s=e.snapDegrees||1;let r=s;for(;r<20;)r+=s;r=r*Math.PI/180;const o=(e.angleOffsetDeg||0)*Math.PI/180;n=X.pointsFromNormalized(t,[[.85,.5],[.5,.5]]);const i=j(D.apply(void 0,n));return n[0]=[n[1][0]+i*Math.cos(o),n[1][1]+i*Math.sin(o)],n[2]=[n[1][0]+i*Math.cos(r+o),n[1][1]+i*Math.sin(r+o)],n}static normalizeCoords(e,t){return i.default.map(e,(function(e){return i.default.map(e,(function(e,n){const s=t[n][1]-t[n][0];return(e+t[n][1])/s}))}))}static getEquationString(e){const t="get"+z(e.graph.type)+"EquationString";return X[t](e)}static pointsFromNormalized(e,t,n){return i.default.map(t,(function(t){return i.default.map(t,(function(t,s){const r=e.range[s];if(n)return r[0]+(r[1]-r[0])*t;const o=e.step[s],i=function(e,t){return Math.floor((e[1]-e[0])/t)}(r,o),a=Math.round(t*i);return r[0]+o*a}))}))}static getLinearEquationString(e){const t=X.getLineCoords(e.graph,e);if(E(t[0][0],t[1][0]))return"x = "+t[0][0].toFixed(3);const n=(t[1][1]-t[0][1])/(t[1][0]-t[0][0]),s=t[0][1]-n*t[0][0];return E(n,0)?"y = "+s.toFixed(3):"y = "+n.toFixed(3)+"x + "+s.toFixed(3)}static getCurrentQuadraticCoefficients(e){const t=e.graph.coords||X.defaultQuadraticCoords(e);return X.getQuadraticCoefficients(t)}static defaultQuadraticCoords(e){return X.pointsFromNormalized(e,[[.25,.75],[.5,.25],[.75,.75]])}static getQuadraticEquationString(e){const t=X.getCurrentQuadraticCoefficients(e);return"y = "+t[0].toFixed(3)+"x^2 + "+t[1].toFixed(3)+"x + "+t[2].toFixed(3)}static getCurrentSinusoidCoefficients(e){const t=e.graph.coords||X.defaultSinusoidCoords(e);return X.getSinusoidCoefficients(t)}static defaultSinusoidCoords(e){return X.pointsFromNormalized(e,[[.5,.5],[.65,.6]])}static getSinusoidEquationString(e){const t=X.getCurrentSinusoidCoefficients(e);return"y = "+t[0].toFixed(3)+"sin("+t[1].toFixed(3)+"x - "+t[2].toFixed(3)+") + "+t[3].toFixed(3)}static getCircleEquationString(e){const t=e.graph,n=t.center||[0,0],s=t.radius||2;return"center ("+n[0]+", "+n[1]+"), radius "+s}static getLinearSystemEquationString(e){const t=X.getLinearSystemCoords(e.graph,e);return"\n"+B(t[0][0],t[0][1])+"\n"+B(t[1][0],t[1][1])+"\n"+function(e,t){const n=e[0][0],s=e[0][1],r=e[1][0],o=e[1][1],i=t[0][0],a=t[0][1],l=t[1][0],u=t[1][1],p=(n-r)*(a-u)-(s-o)*(i-l);if(Math.abs(p)<1e-9)return"Lines are parallel";const d=((n*o-s*r)*(a-u)-(s-o)*(i*u-a*l))/p;return"Intersection: ("+(((n*o-s*r)*(i-l)-(n-r)*(i*u-a*l))/p).toFixed(3)+", "+d.toFixed(3)+")"}(t[0],t[1])}static getPointEquationString(e){return X.getPointCoords(e.graph,e).map((function(e){return"("+e[0]+", "+e[1]+")"})).join(", ")}static getSegmentEquationString(e){const t=X.getSegmentCoords(e.graph,e);return i.default.map(t,(function(e){return"["+i.default.map(e,(function(e){return"("+e.join(", ")+")"})).join(" ")+"]"})).join(" ")}static getRayEquationString(e){const t=X.getLineCoords(e.graph,e),n=t[0],s=t[1];let r=X.getLinearEquationString(e);return n[0]>s[0]?r+=" (for x <= "+n[0].toFixed(3)+")":n[0]<s[0]?r+=" (for x >= "+n[0].toFixed(3)+")":n[1]>s[1]?r+=" (for y <= "+n[1].toFixed(3)+")":r+=" (for y >= "+n[1].toFixed(3)+")",r}static getPolygonEquationString(e){const t=X.getPolygonCoords(e.graph,e);return i.default.map(t,(function(e){return"("+e.join(", ")+")"})).join(" ")}static getAngleEquationString(e){const t=X.getAngleCoords(e.graph,e);return y.default.findAngle(t[2],t[0],t[1]).toFixed(0)+"° angle at ("+t[1].join(", ")+")"}static validate(e,t,n){const s=!!(e.coords||e.center&&e.radius);if(e.type===t.correct.type&&s)if("linear"===e.type){const n=e.coords,s=t.correct.coords;if(S(s[0],s[1],n[0])&&S(s[0],s[1],n[1]))return{type:"points",earned:1,total:1,message:null}}else if("linear-system"===e.type){const n=e.coords,s=t.correct.coords;if(S(s[0][0],s[0][1],n[0][0])&&S(s[0][0],s[0][1],n[0][1])&&S(s[1][0],s[1][1],n[1][0])&&S(s[1][0],s[1][1],n[1][1])||S(s[0][0],s[0][1],n[1][0])&&S(s[0][0],s[0][1],n[1][1])&&S(s[1][0],s[1][1],n[0][0])&&S(s[1][0],s[1][1],n[0][1]))return{type:"points",earned:1,total:1,message:null}}else if("quadratic"===e.type){const n=this.getQuadraticCoefficients(e.coords),s=this.getQuadraticCoefficients(t.correct.coords);if(O(n,s))return{type:"points",earned:1,total:1,message:null}}else if("sinusoid"===e.type){const n=this.getSinusoidCoefficients(e.coords),s=this.getSinusoidCoefficients(t.correct.coords),r=q(n),o=q(s);if(O(r,o))return{type:"points",earned:1,total:1,message:null}}else if("circle"===e.type){if(O(e.center,t.correct.center)&&E(e.radius,t.correct.radius))return{type:"points",earned:1,total:1,message:null}}else if("point"===e.type){var r;let s=X.getPointCoords(t.correct,n);const o=null==(r=e.coords)?void 0:r.slice();if(s=s.slice(),null==o||o.sort(),s.sort(),O(o,s))return{type:"points",earned:1,total:1,message:null}}else if("polygon"===e.type){var o,a;const n=null==(o=e.coords)?void 0:o.slice(),s=null==(a=t.correct.coords)?void 0:a.slice();let r;if("similar"===t.correct.match?r=W(n,s,Number.POSITIVE_INFINITY):"congruent"===t.correct.match?r=W(n,s,x.DEFAULT_TOLERANCE):"approx"===t.correct.match?r=W(n,s,.1):(n.sort(),s.sort(),r=O(n,s)),r)return{type:"points",earned:1,total:1,message:null}}else if("segment"===e.type){var l,u;let n=null==(l=e.coords)?void 0:l.slice(),s=null==(u=t.correct.coords)?void 0:u.slice();if(n=i.default.invoke(n,"sort").sort(),s=i.default.invoke(s,"sort").sort(),O(n,s))return{type:"points",earned:1,total:1,message:null}}else if("ray"===e.type){const n=e.coords,s=t.correct.coords;if(O(n[0],s[0])&&S(s[0],s[1],n[1]))return{type:"points",earned:1,total:1,message:null}}else if("angle"===e.type){const n=e.coords,s=t.correct.coords;let r;if("congruent"===t.correct.match){const e=i.default.map([n,s],(function(e){return(y.default.findAngle(e[2],e[0],e[1])+360)%360}));r=E.apply(void 0,e)}else r=O(n[1],s[1])&&S(s[1],s[0],n[0])&&S(s[1],s[2],n[2]);if(r)return{type:"points",earned:1,total:1,message:null}}return!s||i.default.isEqual(e,t.graph)?{type:"invalid",message:null}:{type:"points",earned:0,total:1,message:null}}static getUserInputFromProps(e){return e.graph}}X.defaultProps={labels:["x","y"],range:[[-10,10],[-10,10]],step:[1,1],backgroundImage:{url:null},markings:"graph",showTooltips:!1,showProtractor:!1,showRuler:!1,rulerLabel:"",rulerTicks:10,graph:{type:"linear"}};var K={name:"interactive-graph",displayName:"Interactive graph",widget:X};t.default=K},Voua:function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n("pVnL")),o=f(n("q1tI")),i=s(n("17x9")),a=s(n("5pch")),l=n("eAf/"),u=s(n("mbWs")),p=f(n("+jAD")),d=s(n("Giaf")),c=s(n("uBl0"));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function f(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(s,o,i):s[o]=e[o]}return s.default=e,n&&n.set(e,s),s}const g=d.default.Label,m=d.default.Line,y=d.default.MovablePoint,v=d.default.MovableLine,b=d.default.Plot,w=d.default.PlotParametric,k=d.default.Point,M=d.default.Rect,{unescapeMathMode:x}=c.default,P=(e,t)=>{let n=e+"||"+(t=t||{}).decimal_separator+"||";const s=t.functions,r=s?s.length:0;for(let e=0;e<r;e++)n+=s[e]+"|";return n},C=Object.create(null),E=(e,t)=>{const n=P(e,t);let s=C[n];return s||(s=u.default.parse(e,t),C[n]=s,s)},O=Object.create(null),_=(e,t)=>{const n=P(e,t);let s=O[n];if(s)return s;const r=u.default.parse(e,t).expr;return s=r?r.compile():function(){return 0},O[n]=s,s};class T extends o.Component{constructor(...e){super(...e),this.state={variables:S(this.props.elements),functions:I(this.props.elements)},this._setupGraphie=(e,t)=>{e.graphInit(a.default.extend({},t,{grid:a.default.contains(["graph","grid"],this.props.graph.markings),axes:a.default.contains(["graph"],this.props.graph.markings),ticks:a.default.contains(["graph"],this.props.graph.markings),labels:a.default.contains(["graph"],this.props.graph.markings),labelFormat:function(e){return"\\small{"+e+"}"},axisArrows:"<->",unityLabels:!1}))},this._updatePointLocation=(e,t)=>{const n=a.default.clone(this.state.variables);n["x_"+e]=t[0],n["y_"+e]=t[1],this.setState({variables:n}),this.props.trackInteraction()},this._updateLineLocation=(e,t)=>{const n=this._eval("("+e.endX+")-("+e.startX+")"),s=this._eval("("+e.endY+")-("+e.startY+")"),r=l.vector.add(t,[n,s]),o=a.default.clone(this.state.variables);o["x_"+e.startSubscript]=t[0],o["y_"+e.startSubscript]=t[1],o["x_"+e.endSubscript]=r[0],o["y_"+e.endSubscript]=r[1],this.setState({variables:o}),this.props.trackInteraction()},this._eval=(e,t)=>{const n=_(e,{functions:this.state.functions}),s=a.default.extend({},this.state.variables,t);return a.default.each(a.default.keys(s),(e=>{if(a.default.isString(s[e])){const t=_(s[e],{functions:this.state.functions});s[e]=function(e){return t(a.default.extend({},s,{x:e}))}}})),n(s)||0},this._extractVars=e=>{if(null==e)return[];let t=[];return a.default.each(e.args(),(function(e){e&&"Expr"===e.constructor.name&&(t=t.concat(this._extractVars(e)))}),this),"Var"===e.name()&&t.push(e.prettyPrint()),t},this.change=(...e)=>p.change.apply(this,e),this.getUserInput=()=>({}),this.simpleValidate=e=>T.validate(this.getUserInput(),e)}UNSAFE_componentWillReceiveProps(e){a.default.isEqual(this.props.elements,e.elements)||this.setState({variables:S(e.elements),functions:I(e.elements)})}render(){const e=this.props.graph.range;let t=this.props.graph.labels;return"graph"===this.props.graph.markings&&(t=this.props.graph.labels.map((e=>e.startsWith("$")&&e.endsWith("$")?e.slice(1,-1):e))),o.createElement(d.default,{box:this.props.graph.box,range:this.props.graph.range,options:this.props.graph,setup:this._setupGraphie,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable},"graph"===this.props.graph.markings&&o.createElement(g,{coord:[0,e[1][1]],text:t[1],direction:"above"}),"graph"===this.props.graph.markings&&o.createElement(g,{coord:[e[0][1],0],text:t[0],direction:"right"}),a.default.map(this.props.elements,(function(e,t){if("point"===e.type)return o.createElement(k,{key:e.key,coord:[this._eval(e.options.coordX),this._eval(e.options.coordY)],color:e.options.color});if("line"===e.type){const t=[this._eval(e.options.startX),this._eval(e.options.startY)],n=[this._eval(e.options.endX),this._eval(e.options.endY)];return o.createElement(m,{key:e.key,start:t,end:n,style:{stroke:e.options.color,strokeWidth:e.options.strokeWidth,strokeDasharray:e.options.strokeDasharray,arrows:e.options.arrows}})}if("movable-point"===e.type){const t=[t=>[Math.max(this._eval(e.options.constraintXMin),Math.min(this._eval(e.options.constraintXMax),t[0])),Math.max(this._eval(e.options.constraintYMin),Math.min(this._eval(e.options.constraintYMax),t[1]))]];return"snap"===e.options.constraint?t.push(y.constraints.snap(e.options.snap)):"x"===e.options.constraint?t.push((t=>[this._eval(e.options.constraintFn,{y:t[1]}),t[1]])):"y"===e.options.constraint&&t.push((t=>[t[0],this._eval(e.options.constraintFn,{x:t[0]})])),o.createElement(y,{key:e.key,coord:[this.state.variables["x_"+e.options.varSubscript],this.state.variables["y_"+e.options.varSubscript]],constraints:t,foo_x:e.options.constraint,foo_y:e.options.constraintFn,foo_z:e.options.snap,onMove:a.default.partial(this._updatePointLocation,e.options.varSubscript)})}if("movable-line"===e.type){const t=[t=>[Math.max(this._eval(e.options.constraintXMin),Math.min(this._eval(e.options.constraintXMax),t[0])),Math.max(this._eval(e.options.constraintYMin),Math.min(this._eval(e.options.constraintYMax),t[1]))]];"snap"===e.options.constraint?t.push(y.constraints.snap(e.options.snap)):"x"===e.options.constraint?t.push((t=>[this._eval(e.options.constraintFn,{y:t[1]}),t[1]])):"y"===e.options.constraint&&t.push((t=>[t[0],this._eval(e.options.constraintFn,{x:t[0]})]));const n=[this.state.variables["x_"+e.options.startSubscript],this.state.variables["y_"+e.options.startSubscript]],s=[this.state.variables["x_"+e.options.endSubscript],this.state.variables["y_"+e.options.endSubscript]];return o.createElement(v,{key:e.key,constraints:t,onMove:a.default.bind(this._updateLineLocation,this,e.options),foo_x:e.options.constraint,foo_y:e.options.constraintFn,foo_z:e.options.snap},o.createElement(y,{coord:n,static:!0,normalStyle:{stroke:"none",fill:"none"}}),o.createElement(y,{coord:s,static:!0,normalStyle:{stroke:"none",fill:"none"}}))}if("function"===e.type){const t=t=>this._eval(e.options.value,{x:t}),n=a.default.without(this._extractVars(E(e.options.value).expr),"x"),s=a.default.object(n,a.default.map(n,(e=>this.state.variables[e]))),r=[this._eval(e.options.rangeMin,this.state.variables),this._eval(e.options.rangeMax,this.state.variables)];return o.createElement(b,{key:e.key,fn:t,foo_fn:e.options.value,foo_varvalues:s,range:r,style:{stroke:e.options.color,strokeWidth:e.options.strokeWidth,strokeDasharray:e.options.strokeDasharray,plotPoints:100}})}if("parametric"===e.type){const t=t=>[this._eval(e.options.x,{t}),this._eval(e.options.y,{t})],n=a.default.without(this._extractVars(E(e.options.x).expr).concat(this._extractVars(E(e.options.y).expr)),"t"),s=a.default.object(n,a.default.map(n,(e=>this.state.variables[e]))),r=[this._eval(e.options.rangeMin,this.state.variables),this._eval(e.options.rangeMax,this.state.variables)];return o.createElement(w,{key:e.key,fn:t,foo_fnx:e.options.x,foo_fny:e.options.y,foo_varvalues:s,range:r,style:{stroke:e.options.color,strokeWidth:e.options.strokeWidth,strokeDasharray:e.options.strokeDasharray,plotPoints:100}})}if("label"===e.type){const n=[this._eval(e.options.coordX),this._eval(e.options.coordY)];return o.createElement(g,{key:t+1,coord:n,text:x(e.options.label),style:{color:e.options.color}})}return"rectangle"===e.type?o.createElement(M,{key:t+1,x:this._eval(e.options.coordX),y:this._eval(e.options.coordY),width:a.default.max([this._eval(e.options.width),0]),height:a.default.max([this._eval(e.options.height),0]),style:{stroke:"none",fill:e.options.color}}):void 0}),this))}}T.propTypes=(0,r.default)({},p.propTypes,{graph:i.default.object,elements:i.default.arrayOf(i.default.object)}),T.defaultProps={graph:{box:[400,400],labels:["x","y"],range:[[-10,10],[-10,10]],tickStep:[1,1],gridStep:[1,1],markings:"graph"},elements:[]},a.default.extend(T,{validate:function(e,t){return{type:"points",earned:0,total:0,message:null}}});const S=e=>{const t={};return a.default.each(a.default.where(e,{type:"movable-point"}),(e=>{const n=e.options.varSubscript,s=E(e.options.startX||"0").expr,r=E(e.options.startY||"0").expr;let o=0,i=0;s&&(o=s.eval({})||0),r&&(i=r.eval({})||0),t["x_"+n]=o,t["y_"+n]=i})),a.default.each(a.default.where(e,{type:"movable-line"}),(e=>{const n=e.options.startSubscript,s=e.options.endSubscript,r=E(e.options.startX||"0").expr,o=E(e.options.startY||"0").expr,i=E(e.options.endX||"0").expr,a=E(e.options.endY||"0").expr;let l=0,u=0,p=0,d=0;r&&(l=r.eval({})||0),o&&(u=o.eval({})||0),i&&(p=i.eval({})||0),a&&(d=a.eval({})||0),t["x_"+n]=l,t["y_"+n]=u,t["x_"+s]=p,t["y_"+s]=d})),a.default.each(a.default.where(e,{type:"function"}),(e=>{t[e.options.funcName]=e.options.value})),t},I=e=>a.default.map(a.default.where(e,{type:"function"}),(e=>e.options.funcName));var N={name:"interaction",displayName:"Interaction",widget:T,transform:a.default.identity,hidden:!0};t.default=N},YXfq:function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(n("q1tI")),o=s(n("17x9")),i=u(n("HEOz")),a=n("1I17");function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}function u(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(s,o,i):s[o]=e[o]}return s.default=e,n&&n.set(e,s),s}class p extends r.Component{constructor(...e){super(...e),this.arrowLength=100,this.drawArrow=()=>{const e=this.refs["arrowCanvas"+this.props.index],t=e.getContext("2d");t.clearRect(0,0,e.width,e.height);const n=new Path2D;t.strokeStyle="rgb(0,0,0)",t.lineWidth=1.2,t.lineCap="round";n.moveTo(5,e.height/2),n.lineTo(e.width-5,e.height/2),n.moveTo(e.width-10,e.height/2-5),n.lineTo(e.width-5,e.height/2),n.moveTo(e.width-10,e.height/2+5),n.lineTo(e.width-5,e.height/2),t.stroke(n)}}componentDidMount(){this.drawArrow()}componentDidUpdate(){this.drawArrow()}render(){return r.createElement("div",{className:"arrow-container"},r.createElement("div",{className:"above-text"},this.props.data.topText),r.createElement("canvas",{height:"30",id:"arrowCanvas"+this.props.index,ref:"arrowCanvas"+this.props.index,width:this.arrowLength},i._("Reaction arrow pointing to the right.")),r.createElement("div",{className:"below-text"},this.props.data.bottomText))}}p.propTypes={data:o.default.any,index:o.default.number};class d extends r.Component{constructor(...e){super(...e),this.simpleValidate=()=>({type:"points",earned:0,total:0,message:null}),this.getUserInput=()=>[],this.validate=(e,t)=>({type:"points",earned:0,total:0,message:null}),this.focus=()=>!0}render(){return r.createElement("div",{className:"reaction",ref:"reaction"},this.props.smiles.map(((e,t)=>{const n=this.props.widgetId+"-"+t;return r.createElement("div",{key:n,className:"molecule-container"},r.createElement(a.Molecule,{id:n,rotationAngle:this.props.rotationAngle[t],smiles:e}),t===this.props.smiles.length-1?null:r.createElement(p,{data:this.props.separators[t],index:t}))})))}}d.propTypes={rotationAngle:o.default.arrayOf(o.default.number),separators:o.default.arrayOf(o.default.object),smiles:o.default.arrayOf(o.default.string),widgetId:o.default.string},d.defaultProps={smiles:[],rotationAngle:[],separators:[]};var c={name:"reaction-diagram",displayName:"Chemical reaction",hidden:!0,widget:d};t.default=c},ZWnV:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s={button:n("mR6N").StyleSheet.create({buttonStyle:{backgroundColor:"white",border:"1px solid #ccc",borderLeft:"0",cursor:"pointer",margin:"0",padding:"5px 10px",position:"relative",":first-child":{borderLeft:"1px solid #ccc",borderTopLeftRadius:"3px",borderBottomLeftRadius:"3px"},":last-child":{borderRight:"1px solid #ccc",borderTopRightRadius:"3px",borderBottomRightRadius:"3px"},":hover":{backgroundColor:"#ccc"},":focus":{zIndex:"2"}},selectedStyle:{backgroundColor:"#ddd"}})};t.default=s},aeDP:function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n("mR6N"),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(s,o,i):s[o]=e[o]}s.default=e,n&&n.set(e,s);return s}(n("q1tI")),i=s(n("fhzG")),a=s(n("17x9")),l=s(n("wINb"));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}const p="#aaa",d="#ccc",c="#fff",h={borderBottom:"9px solid transparent",borderTop:"9px solid transparent",content:'" "',height:"0",position:"absolute",top:"0",width:"0"},f=r.StyleSheet.create({infoTip:{display:"inline-block",marginLeft:"5px",position:"relative"},infoTipContainer:{position:"absolute",top:"-12px",left:"22px",zIndex:1e3},infoTipTriangle:{height:"10px",left:"0",position:"absolute",top:"8px",width:"0",zIndex:1,":before":Object.assign({},h,{borderRight:"9px solid #bbb",right:"0"}),":after":Object.assign({},h,{borderRight:`9px solid ${c}`,right:"-1px"})},verticalShadow:{border:`1px solid ${d}`,boxShadow:`0 1px 3px ${d}`,borderBottom:`1px solid ${p}`},infoTipContentContainer:{background:c,padding:"5px 10px",width:"240px"}});var g=(0,i.default)({displayName:"InfoTip",propTypes:{children:a.default.node},getInitialState:function(){return{hover:!1}},handleMouseEnter:function(){this.setState({hover:!0})},handleMouseLeave:function(){this.setState({hover:!1})},render:function(){return o.createElement("div",{className:(0,r.css)(f.infoTip)},o.createElement("img",{alt:"",width:10,height:10,src:(0,l.default)("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3NpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo2N2M3NTAxYS04YmVlLTQ0M2MtYmRiNS04OGM2N2IxN2NhYzEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUJCRTk4Qjc4NjAwMTFFMzg3QUJDNEI4Mzk2QTRGQkQiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUJCRTk4QjY4NjAwMTFFMzg3QUJDNEI4Mzk2QTRGQkQiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NGE5ZDI0OTMtODk1NC00OGFkLTlhMTgtZDAwM2MwYWNjNDJlIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjY3Yzc1MDFhLThiZWUtNDQzYy1iZGI1LTg4YzY3YjE3Y2FjMSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pqm89uYAAADMSURBVHjaXJA9DoJAEIUH1M4TUHIFsCMGen9OwCGw1YRGW2ntKel0exsojHIBC0ouQAyUviFDstmXfNmZeS+zm7XSNCXRFiRgJf0bXIHixpbhGdxBBJYC1w/xaA424MhNEATkui71fU9KqfEU78UbD9PdbJRlOdae55GmhIP+1NV1TcMwkOM41DSNHvRtMhTHMRVFQW3b6mOLgx99kue5GRp/gIOZuZGvNpTNwjD8oliANU+qqqKu6/TQBdymN57AHjzBT+B6Jx79BRgAvc49kQA4yxgAAAAASUVORK5CYII="),onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave}),o.createElement("div",{className:(0,r.css)(f.infoTipContainer),style:{display:this.state.hover?"block":"none"}},o.createElement("div",{className:(0,r.css)(f.infoTipTriangle)}),o.createElement("div",{className:(0,r.css)(f.verticalShadow,f.infoTipContentContainer)},this.props.children)))}});t.default=g},bTcU:function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n("pVnL")),o=n("mR6N"),i=s(n("TSYQ")),a=b(n("q1tI")),l=s(n("i8i4")),u=n("K7le"),p=n("6OHE"),d=s(n("uEGL")),c=s(n("Atlv")),h=s(n("yPu2")),f=s(n("4s5V")),g=s(n("oaDE")),m=s(n("9cGa")),y=b(n("HEOz"));function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function b(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(s,o,i):s[o]=e[o]}return s.default=e,n&&n.set(e,s),s}class w extends a.Component{static gradeMarker(e){const t={hasAnswers:!1,isCorrect:!1};return e.selected&&e.selected.length>0&&(t.hasAnswers=!0),e.answers.length>0?e.selected&&e.selected.length===e.answers.length&&(t.isCorrect=e.selected.every((t=>e.answers.includes(t)))):e.selected&&0!==e.selected.length||(t.isCorrect=!0),t}static validate(e,t){let n=0,s=0;for(const t of e.markers){const e=w.gradeMarker(t);e.hasAnswers&&n++,e.isCorrect&&s++}return n!==e.markers.length?{type:"invalid",message:null}:{type:"points",earned:s===e.markers.length?1:0,total:1,message:null}}static pointInTriangle(e,t,n,s){const r=(e,t,n)=>(e.x-n.x)*(t.y-n.y)-(t.x-n.x)*(e.y-n.y),o=r(e,t,n)<0,i=r(e,n,s)<0,a=r(e,s,t)<0;return o===i&&i===a}static imageSideForMarkerPosition(e,t){if(e<20)return"left";if(e>80)return"right";const n={x:20,y:0},s={x:80,y:0},r={x:80,y:100},o={x:20,y:100},i={x:50,y:50},a={top:[n,s,i],right:[i,s,r],bottom:[o,i,r],left:[n,i,o]},l={x:e,y:t};for(const e of Object.keys(a)){const t=a[e];if(w.pointInTriangle.apply(w,[l].concat(t)))return e}return"center"}static navigateToMarkerIndex(e,t,n){const s=t[n],r=t.map(((e,t)=>{const n=e.x-s.x,r=e.y-s.y,o=Math.sqrt(n**2+r**2);return{index:t,dist:o,dir:{x:0!==o?n/o:0,y:0!==o?r/o:0}}})).filter((e=>e.index!==n&&"correct"!==t[e.index].showCorrectness)).sort(((t,n)=>{const s=Math.round(t.dist*(e.x*t.dir.x+e.y*t.dir.y)),r=Math.round(n.dist*(e.x*n.dir.x+e.y*n.dir.y));let o,i;return e.x>0?(o=t.dir.x>0&&0!==s,i=n.dir.x>0&&0!==r):e.x<0?(o=t.dir.x<0&&0!==s,i=n.dir.x<0&&0!==r):e.y>0?(o=t.dir.y>0&&0!==s,i=n.dir.y>0&&0!==r):e.y<0&&(o=t.dir.y<0&&0!==s,i=n.dir.y<0&&0!==r),o!==i?o?-1:1:s-r}));return r.length>0?r[0].index:n}constructor(e){super(e),this.handleDocumentClick=e=>{if(this._selectedMarkerPopup&&this._answerChoices){const t=l.default.findDOMNode(this._answerChoices),n=e.target,s=(e,t=3)=>e&&(e.contains(n)||t>0&&s(e.parentElement,t-1));s(t)||this.dismissMarkerPopup()}},this.handleDocumentKeyDown=e=>{this._selectedMarkerPopup&&27===e.keyCode&&(e.stopPropagation(),this.dismissMarkerPopup())},this._markers=[],this.state={selectedMarkerIndex:-1,markersInteracted:!1}}componentDidMount(){document.addEventListener("click",this.handleDocumentClick,!0),document.addEventListener("keydown",this.handleDocumentKeyDown,!0)}componentWillUnmount(){document.removeEventListener("click",this.handleDocumentClick,!0),document.removeEventListener("keydown",this.handleDocumentKeyDown,!0)}simpleValidate(e){return w.validate(this.getUserInput(),e)}getUserInput(){const{markers:e}=this.props;return{markers:e}}showRationalesForCurrentlySelectedChoices(e){const{markers:t}=this.props,{onChange:n}=this.props;n({markers:t.map((e=>{const t=w.gradeMarker(e);return(0,r.default)({},e,{showCorrectness:t.hasAnswers?t.isCorrect?"correct":"incorrect":void 0})}))},null,!0)}dismissMarkerPopup(){const{selectedMarkerIndex:e}=this.state;-1!==e&&this.setState({selectedMarkerIndex:-1},(()=>{const t=this._markers[e];t&&l.default.findDOMNode(t).focus()}))}handleMarkerChange(e,t){const{markers:n,onChange:s}=this.props;s({markers:[].concat(n.slice(0,e),[(0,r.default)({},t,{showCorrectness:void 0})],n.slice(e+1))})}handleMarkerClick(e,t){const{selectedMarkerIndex:n}=this.state;t.preventDefault(),n!==e?this.setState({selectedMarkerIndex:e,markersInteracted:!0},(()=>{setTimeout((()=>{this._answerChoices&&this._answerChoices.focusAnswer()}),100)})):this.dismissMarkerPopup()}handleMarkerKeyDown(e,t){const{markers:n}=this.props;if(n.length<2)return;const s={ArrowUp:{x:0,y:-1},ArrowRight:{x:1,y:0},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0}}[t.key];if(!s)return;t.preventDefault();const r=this._markers[w.navigateToMarkerIndex(s,n,e)];r&&l.default.findDOMNode(r).focus()}handleAnswerChoicesChangeForMarker(e,t){const{choices:n,markers:s,multipleAnswers:o}=this.props,i=n.filter(((e,n)=>t[n]));this.handleMarkerChange(e,(0,r.default)({},s[e],{selected:i})),o||this.dismissMarkerPopup()}renderAnswerChoicesForMarker(e,t){const{choices:n,multipleAnswers:s}=this.props,r=t.selected;return a.createElement("div",{className:(0,i.default)("perseus-label-image-widget-answer-choices",(0,o.css)(k.scrollableChoices))},a.createElement(f.default,{choices:n.map((e=>({content:e,checked:!!r&&r.includes(e)}))),multipleSelect:s,onChange:t=>this.handleAnswerChoicesChangeForMarker(e,t),ref:e=>this._answerChoices=e}))}renderMarkers(){const{markers:e,questionCompleted:t}=this.props,{selectedMarkerIndex:n,markersInteracted:s}=this.state;return e.map(((e,o)=>{const i=w.gradeMarker(e),l=a.createElement(g.default,(0,r.default)({},e,{showCorrectness:t&&i.hasAnswers&&i.isCorrect?"correct":e.showCorrectness,showSelected:o===n,showPulsate:!s,key:`${e.x}.${e.y}`,onClick:e=>this.handleMarkerClick(o,e),onKeyDown:e=>this.handleMarkerKeyDown(o,e),ref:e=>this._markers[o]=e}));if(o!==n)return l;let p;return p=window.matchMedia(d.default.xsOrSmaller.replace("@media ","")).matches?e.y>50?"top":"bottom":{left:"right",top:"bottom",right:"left",bottom:"top",center:"top"}[w.imageSideForMarkerPosition(e.x,e.y)],a.createElement(u.Popover,{content:()=>a.createElement(u.PopoverContentCore,{style:k.choicesPopover},this.renderAnswerChoicesForMarker(o,e)),placement:p,opened:!0,key:`${e.x}.${e.y}`,ref:e=>this._selectedMarkerPopup=e},l)}))}renderInstructions(){const{apiOptions:{isMobile:e},choices:t,multipleAnswers:n,hideChoicesFromInstructions:s}=this.props,r=e?n?y._("Tap each dot on the image to select all answers that apply."):y._("Tap each dot on the image to select an answer."):n?y._("Click each dot on the image to select all answers that apply."):y._("Click each dot on the image to select an answer."),l=y._("Choices:");return a.createElement("div",{className:(0,i.default)("perseus-label-image-widget-instructions",(0,o.css)(k.instructions))},a.createElement("div",{className:(0,o.css)(k.instructionsCaption)},r," ",!s&&l),!s&&a.createElement("div",{className:(0,o.css)(k.instructionsChoices)},t.map(((e,t)=>a.createElement("div",{className:(0,o.css)(k.instructionsChoice),key:t},a.createElement(c.default,{content:e}))))))}render(){const{imageAlt:e,imageUrl:t,imageWidth:n,imageHeight:s}=this.props,{selectedMarkerIndex:r}=this.state;return a.createElement("div",null,this.renderInstructions(),a.createElement("div",{className:(0,o.css)(k.markersCanvas),style:{maxWidth:n,maxHeight:s}},a.createElement("div",{className:(0,o.css)(k.imageContainer,-1!==r&&k.imageInteractionDisabled)},a.createElement(m.default.Consumer,null,(({setAssetStatus:r})=>a.createElement(h.default,{alt:e,src:t,width:n,height:s,setAssetStatus:r})))),this.renderMarkers()))}}const k=o.StyleSheet.create({instructions:{paddingBottom:16},instructionsCaption:(0,r.default)({},p.typography.bodyXsmallBold,{paddingBottom:16}),instructionsChoices:{display:"flex",flexWrap:"wrap",margin:"-8px 0"},instructionsChoice:{display:"flex",alignItems:"center",margin:"8px 0",":not(:last-child)":{"::after":{content:"''",display:"inline-block",position:"relative",width:2,height:2,marginLeft:5,marginRight:5,background:"rgba(33, 36, 44, 0.32)",borderRadius:2}}},markersCanvas:{position:"relative"},imageContainer:{display:"flex"},imageInteractionDisabled:{pointerEvents:"none"},scrollableChoices:{paddingTop:8,paddingBottom:8,[d.default.xsOrSmaller]:{maxHeight:250,overflowY:"auto"}},choicesPopover:{padding:0}});var M={name:"label-image",displayName:"Label Image",widget:w,accessible:!0,isLintable:!0};t.default=M},bjk2:function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(s,o,i):s[o]=e[o]}s.default=e,n&&n.set(e,s);return s}(n("q1tI")),o=s(n("i8i4")),i=s(n("5pch")),a=n("j8wP"),l=n("vwLt");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}class p extends r.Component{constructor(...e){super(...e),this.focus=()=>(o.default.findDOMNode(this).focus(),!0),this._handleChangeEvent=e=>{this._handleChange(parseInt(e.target.value))},this._handleChange=e=>{this.props.trackInteraction(),this.props.onChange({selected:e})},this.getUserInput=()=>({value:this.props.selected}),this.simpleValidate=e=>p.validate(this.getUserInput(),e)}static validate(e,t){const n=e.value;if(0===n)return{type:"invalid",message:null};return{type:"points",earned:t.choices[n-1].correct?1:0,total:1,message:null}}render(){const e=[r.createElement(l.OptionItem,{key:"placeholder",value:"0",disabled:!0,label:this.props.placeholder})].concat(this.props.choices.map(((e,t)=>r.createElement(l.OptionItem,{key:String(t+1),value:String(t+1),label:e}))));return r.createElement("div",{onClick:e=>{e.stopPropagation()},onTouchStart:e=>{e.stopPropagation()}},r.createElement(l.SingleSelect,{onChange:e=>this._handleChange(parseInt(e)),selectedValue:String(this.props.selected),disabled:this.props.apiOptions.readOnly},e))}}p.defaultProps={choices:[],selected:0,placeholder:"",apiOptions:a.ApiOptions.defaults};var d={name:"dropdown",displayName:"Drop down",defaultAlignment:"inline-block",accessible:!0,widget:p,transform:e=>({placeholder:e.placeholder,choices:i.default.map(e.choices,(e=>e.content))})};t.default=d},bxxM:function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n("h1Z3")),o=s(n("Jxul")),i=s(n("bjk2")),a=s(n("vUnj")),l=s(n("P++F")),u=s(n("GbkG")),p=s(n("fYWP")),d=s(n("VO3A")),c=s(n("/Qgg")),h=s(n("zyiX")),f=s(n("y1hP")),g=s(n("Voua")),m=s(n("VWbw")),y=s(n("bTcU")),v=s(n("SrcR")),b=s(n("k1y+")),w=s(n("j+Ew")),k=s(n("w4kA")),M=s(n("1I17")),x=s(n("qRYE")),P=s(n("h/tm")),C=s(n("P76s")),E=s(n("z875")),O=s(n("RY23")),_=s(n("ipxt")),T=s(n("YXfq")),S=s(n("BCuI")),I=s(n("7O7Y")),N=s(n("jDkz")),R=s(n("eCzM")),A=s(n("FGwj")),D=s(n("K/mI")),j=s(n("dWq9")),L=[r.default,o.default,i.default,a.default,l.default,u.default,p.default,d.default,c.default,h.default,f.default,g.default,m.default,y.default,v.default,b.default,w.default,k.default,M.default,x.default,P.default,C.default,E.default,O.default,_.default,T.default,S.default,I.default,N.default,R.default,A.default,D.default,j.default];t.default=L},czma:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=r(t);if(n&&n.has(e))return n.get(e);var s={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(s,i,a):s[i]=e[i]}s.default=e,n&&n.set(e,s);return s}(n("q1tI"));function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(r=function(e){return e?n:t})(e)}class o extends s.PureComponent{constructor(...e){super(...e),this.state={mouseState:"up",trackedSelection:null},this._handleSelectionChange=()=>{this._updateTrackedSelection(this.props.buildHighlight),"down"===this.state.mouseState&&this.setState({mouseState:"down-and-selecting"})},this._handleMouseDown=()=>{this.setState({mouseState:"down"})},this._handleMouseUp=()=>{this.setState({mouseState:"up"})}}componentDidMount(){this._updateListeners(!1,this.props.enabled)}UNSAFE_componentWillReceiveProps(e){this.props.buildHighlight!==e.buildHighlight&&this._updateTrackedSelection(e.buildHighlight),this._updateListeners(this.props.enabled,e.enabled)}componentWillUnmount(){this._updateListeners(this.props.enabled,!1)}_updateListeners(e,t){!e&&t?(window.addEventListener("mousedown",this._handleMouseDown),window.addEventListener("mouseup",this._handleMouseUp),document.addEventListener("selectionchange",this._handleSelectionChange)):e&&!t&&(window.removeEventListener("mousedown",this._handleMouseDown),window.removeEventListener("mouseup",this._handleMouseUp),document.removeEventListener("selectionchange",this._handleSelectionChange),this.setState({mouseState:"up",trackedSelection:null}))}_computeFocusAndRange(){const e=document.getSelection();if(!e||0===e.rangeCount)return null;const t=e.getRangeAt(0);if(t.collapsed)return null;return{focusNode:e.focusNode,focusOffset:e.focusOffset,range:t}}_computeTrackedSelection(e){const t=this._computeFocusAndRange();if(!t)return null;const{focusNode:n,focusOffset:s,range:r}=t,o=e(r);return o?{focusNode:n,focusOffset:s,proposedHighlight:o}:null}_updateTrackedSelection(e){const t=this._computeTrackedSelection(e);this.setState({trackedSelection:t})}render(){const{mouseState:e,trackedSelection:t}=this.state,n="down-and-selecting"===e;return this.props.children?s.createElement("div",null,this.props.children(t,n)):null}}var i=o;t.default=i},dWq9:function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=h(n("q1tI")),o=(s(n("5pch")),n("JimW")),i=s(n("8Kom")),a=h(n("+jAD")),l=s(n("WCF/")),u=s(n("qRKg")),p=s(n("SNGj")),d=h(n("HEOz"));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function h(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(s,o,i):s[o]=e[o]}return s.default=e,n&&n.set(e,s),s}const f="{host}/embed_video?slug={slug}&internal_video_only=1",g=/^https?:\/\//,m=/(khanacademy\.org|localhost)/;class y extends r.Component{constructor(...e){super(...e),this.getUserInput=()=>null,this.simpleValidate=e=>y.validate(null,e),this.change=(...e)=>a.change.apply(this,e)}static validate(e,t){return{type:"points",earned:0,total:0,message:null}}render(){const e=this.props.location;if(!e)return r.createElement("div",null);let t;if(g.test(e))t=e;else{t=f.replace("{slug}",e);let n="https://www.khanacademy.org";m.test(i.default.host)&&(n=i.default.origin),t=t.replace("{host}",n)}return r.createElement(o.View,null,r.createElement(l.default,{width:1280,height:720,key:e+this.props.alignment},r.createElement(o.View,{style:u.default.srOnly},d._("Khan Academy video wrapper")),r.createElement("iframe",{className:"perseus-video-widget",sandbox:"allow-same-origin allow-scripts",width:1280,height:720,src:t,allowFullScreen:!0})),r.createElement(p.default,{location:e}))}}var v={name:"video",displayName:"Video",defaultAlignment:"block",supportedAlignments:["block","float-left","float-right","full-width"],widget:y};t.default=v},e46u:function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n("pVnL")),o=h(n("q1tI")),i=s(n("wa3X")),a=s(n("Pwnf")),l=h(n("HEOz")),u=s(n("APgo")),p=n("/4Qb"),d=n("UcaO");function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function h(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(s,o,i):s[o]=e[o]}return s.default=e,n&&n.set(e,s),s}class f extends o.Component{render(){const{apiOptions:e,answerBarState:t,onCheckAnswer:n,onNextQuestion:s}=this.props,d=(0,r.default)({},g.answerBar,{backgroundColor:"CORRECT"===t?a.default.offWhite:"white",justifyContent:"CORRECT"!==t||s?"space-between":"center"}),c="INCORRECT"===t?o.createElement("span",{style:g.text},o.createElement("span",{style:g.tryAgainIcon},o.createElement(u.default,p.iconTryAgain)),o.createElement("span",{style:{marginLeft:8}},l._("Keep trying"))):o.createElement("span",null);if("CORRECT"!==t){const s="INCORRECT"===t?l._("Try again"):l._("Check");return o.createElement("div",{style:d},c,o.createElement(i.default,{disabled:e.readOnly||"ACTIVE"!==t,onClick:n},s))}return o.createElement("div",{style:d},o.createElement("span",{style:g.text},o.createElement("span",{style:{fontSize:28,color:a.default.green}},o.createElement(u.default,(0,r.default)({},p.iconStar,{style:{marginBottom:5}}))),o.createElement("span",{role:"alert","aria-label":l._("Correct!"),style:{marginLeft:8}},l._("Correct!"))),s&&o.createElement(i.default,{onClick:s},l._("Next question")))}}const g={answerBar:{display:"flex",alignItems:"center",height:68,marginLeft:d.negativePhoneMargin,marginRight:d.negativePhoneMargin,marginBottom:d.negativePhoneMargin,marginTop:d.phoneMargin,paddingLeft:d.phoneMargin,paddingRight:10,borderTop:`1px solid ${a.default.offBlack50}`},tryAgainIcon:{fontSize:28,color:"#63D9EA",transform:"scale(-1,1) rotate(-268deg)"},text:{display:"flex",flexDirection:"row",alignItems:"center",fontWeight:"bold",fontSize:17}};var m=f;t.default=m},eCzM:function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n("pVnL")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(s,o,i):s[o]=e[o]}s.default=e,n&&n.set(e,s);return s}(n("q1tI")),i=s(n("17x9")),a=s(n("i8i4")),l=s(n("5pch")),u=n("reBI"),p=s(n("7xiW")),d=s(n("eMwK")),c=s(n("Atlv")),h=s(n("uBl0")),f=n("j8wP"),g=s(n("7BBF")),m=n("zahm"),y=s(n("p8fL"));function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}const{assert:b}=y.default,{keypadElementPropType:w}=u.propTypes,k=function(e,t){return[""+e,""+t]},M=function(e){return b(l.default.isArray(e)&&2===e.length),+e[0]},x=function(e){return b(l.default.isArray(e)&&2===e.length),+e[1]},P=function(e){return"answer"+M(e)+","+x(e)};class C extends o.Component{constructor(...e){super(...e),this._getRows=()=>this.props.answers.length,this._getColumns=()=>this.props.answers[0].length,this.getUserInput=()=>l.default.map(this.props.answers,l.default.clone),this.onValueChange=(e,t,n)=>{const s=l.default.map(this.props.answers,l.default.clone);s[e][t]=n.target?n.target.value:n,this.props.onChange({answers:s}),this.props.trackInteraction()},this.onHeaderChange=(e,t)=>{const n=this.props.headers.slice();n[e]=t.content,this.props.onChange({headers:n})},this.simpleValidate=e=>C.validate(this.getUserInput(),e),this._handleFocus=e=>{this.props.onFocus(e)},this._handleBlur=e=>{this.props.onBlur(e)},this.focus=()=>(this.focusInputPath(k(0,0)),!0),this.focusInputPath=e=>{const t=P(e),n=this.refs[t];this.props.apiOptions.customKeypad||this.props.apiOptions.staticRender?n.focus():a.default.findDOMNode(n).focus()},this.blurInputPath=e=>{const t=P(e),n=this.refs[t];this.props.apiOptions.customKeypad||this.props.apiOptions.staticRender?n.blur():a.default.findDOMNode(n).blur()},this.getDOMNodeForPath=e=>{const t=P(e);return a.default.findDOMNode(this.refs[t])},this.getInputPaths=()=>{const e=this._getRows(),t=this._getColumns(),n=[];return(0,l.default)(e).times((e=>{(0,l.default)(t).times((t=>{const s=k(e,t);n.push(s)}))})),n},this.getGrammarTypeForPath=e=>"number",this.setInputValue=(e,t,n)=>{const s=M(e),r=x(e),o=l.default.map(this.props.answers,l.default.clone);o[s][r]=t,this.props.onChange({answers:o},n)}}render(){const e=this._getRows(),t=this._getColumns(),n=this.props.headers;let s,i;const a={};return this.props.apiOptions.customKeypad?(s=d.default,i={width:80},a.keypadElement=this.props.keypadElement):this.props.apiOptions.staticRender?(s=p.default,i={}):(s="input",i={}),o.createElement("table",{className:"perseus-widget-table-of-values non-markdown"},o.createElement("thead",null,o.createElement("tr",null,l.default.map(n,((e,t)=>this.props.editableHeaders?o.createElement("th",{key:t},o.createElement(this.props.Editor,{ref:"columnHeader"+t,apiOptions:this.props.apiOptions,content:e,widgetEnabled:!1,onChange:l.default.partial(this.onHeaderChange,t)})):o.createElement("th",{key:t},o.createElement(c.default,{content:e,linterContext:this.props.linterContext})))))),o.createElement("tbody",null,(0,l.default)(e).times((e=>o.createElement("tr",{key:e},(0,l.default)(t).times((t=>o.createElement("td",{key:t},o.createElement(s,(0,r.default)({ref:P(k(e,t)),type:"text",value:this.props.answers[e][t],disabled:this.props.apiOptions.readOnly,onFocus:l.default.partial(this._handleFocus,k(e,t)),onBlur:l.default.partial(this._handleBlur,k(e,t)),onChange:l.default.partial(this.onValueChange,e,t),style:i},a))))))))))}}C.propTypes={answers:i.default.arrayOf(i.default.arrayOf(i.default.string)),editableHeaders:i.default.bool,Editor:i.default.func,headers:i.default.arrayOf(i.default.string),keypadElement:w,trackInteraction:i.default.func.isRequired,linterContext:m.linterContextProps},C.defaultProps=function(){const e=(0,l.default)(4).times((function(){return h.default.stringArrayOfSize(1)}));return{apiOptions:f.ApiOptions.defaults,headers:[""],editableHeaders:!1,rows:4,columns:1,answers:e,linterContext:m.linterContextDefault}}(),l.default.extend(C,{validate:function(e,t){const n=function(e){return l.default.filter(e,(function(e){return l.default.some(e,l.default.identity)}))},s=n(t.answers),r=n(e);if(l.default.some(r,(function(e){return l.default.some(e,(function(e){return""===e}))}))||!r.length)return{type:"invalid",message:null};if(r.length!==s.length)return{type:"points",earned:0,total:1,message:null};const o=g.default.number.createValidatorFunctional;let i=null;return{type:"points",earned:l.default.every(s,(function(e){let t;for(t=0;t<r.length;t++){const n=r[t];if(l.default.every(n,(function(t,n){const s=e[n],r=o(s,{simplify:!0})(t);return r.message&&(i=r.message),r.correct})))return r.splice(t,1),!0}return!1}))?1:0,total:1,message:i}}});var E={name:"table",displayName:"Table of values",accessible:!0,widget:C,transform:e=>{const t=e.answers.length,n=e.answers[0].length,s=(0,l.default)(t).times((function(){return h.default.stringArrayOfSize(n)}));return l.default.extend({},e,{answers:s})},hidden:!0,isLintable:!0};t.default=E},fQFx:function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(s,o,i):s[o]=e[o]}s.default=e,n&&n.set(e,s);return s}(n("q1tI")),o=n("mR6N"),i=s(n("4PhQ")),a=n("6OHE"),l=n("La43"),u=s(n("EIXS"));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}class d extends r.PureComponent{componentDidUpdate(e){var t;this.props.focusNode===e.focusNode&&this.props.focusOffset===e.focusOffset&&this.props.offsetParent===e.offsetParent||(null==(t=this._tooltip)||t.remeasure())}_getFocusRect(){const{focusNode:e,focusOffset:t,offsetParent:n}=this.props,s=document.createRange();s.setStart(e,t),s.setEnd(e,t);const r=s.getClientRects()[0];if(!r)return i.default.log('[Highlighting] Known bug: Could not determine the focus position, so did not show an "Add Highlight" tooltip. https://app.asana.com/0/329800276300868/413878480039713 (see also /r/asana-links)'),null;const{left:o,top:a}=n.getBoundingClientRect();return(0,l.getRelativeRect)({left:r.left,top:r.top,width:r.width,height:r.height},{left:o,top:a})}render(){const e=this._getFocusRect();if(!e)return null;const t=r.createElement("div",{className:(0,o.css)(c.tooltipLabel)},this.props.label);return r.createElement(u.default,{content:t,color:a.colors.kaBlue,inverted:!0,onClick:this.props.onClick,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,toggleOnHover:!1,showOnMount:!0,ref:e=>this._tooltip=e},r.createElement("div",{style:{position:"absolute",left:e.left,top:e.top,height:e.height}}))}}const c=o.StyleSheet.create({tooltipLabel:{userSelect:"none"}});var h=d;t.default=h},fYWP:function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n("pVnL")),o=s(n("TSYQ")),i=k(n("q1tI")),a=s(n("5pch")),l=s(n("wa3X")),u=k(n("HEOz")),p=s(n("qRKg")),d=n("j8wP"),c=k(n("+jAD")),h=n("/4Qb"),f=s(n("APgo")),g=s(n("Atlv")),m=s(n("e46u")),y=n("UcaO"),v=n("mR6N"),b=n("zahm");function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(w=function(e){return e?n:t})(e)}function k(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=w(t);if(n&&n.has(e))return n.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(s,o,i):s[o]=e[o]}return s.default=e,n&&n.set(e,s),s}const M="ungraded",x="correct",P="incorrect",C="invalid",E=(e,t)=>{switch(e){case"HIDDEN":return t?"ACTIVE":e;case"ACTIVE":return t?e:"INACTIVE";case"INACTIVE":return t?"ACTIVE":e;case"INCORRECT":return t?"ACTIVE":"INACTIVE";default:return e}},O=u._("We couldn't grade your answer."),_=u._("It looks like you left something blank or ")+u._("entered in an invalid answer.");class T extends i.Component{constructor(...e){super(...e),this.state={status:M,showHint:!1,message:"",answerBarState:"HIDDEN"},this.change=(...e)=>c.change.apply(this,e),this._onInteractWithWidget=e=>{if(this.setState({status:M,message:""}),this.refs.renderer){this.change("widgets",this.props.widgets);const e=0===this.refs.renderer.emptyWidgets().length,t=this.state.answerBarState;this.setState({answerBarState:E(t,e)})}},this._checkAnswer=()=>{this.refs.renderer.showRationalesForCurrentlySelectedChoices();const e=this.refs.renderer.score(),t="points"===e.type?e.total===e.earned?x:P:C,n="points"===e.type?e.message||"":e.message?`${O} ${e.message}`:`${O} ${_}`;this.setState({status:t,message:n,answerBarState:"correct"===t?"CORRECT":"INCORRECT"}),this.props.trackInteraction({status:t})},this.getInputPaths=()=>this.refs.renderer.getInputPaths(),this.setInputValue=(e,t,n)=>this.refs.renderer.setInputValue(e,t,n),this.focus=()=>this.refs.renderer.focus(),this.focusInputPath=e=>{this.refs.renderer.focusPath(e)},this.blurInputPath=e=>{this.refs.renderer.blurPath(e)}}shouldComponentUpdate(e,t){return e!==this.props||t!==this.state}render(){const e=a.default.extend({},d.ApiOptions.defaults,this.props.apiOptions,{onFocusChange:(e,t)=>{t&&this.props.onBlur(t),e&&this.props.onFocus(e)}});let t=null,n=null;this.state.status===x?(n=i.createElement(f.default,(0,r.default)({},h.iconOk,{style:{color:"#526f03"}})),t=u._("Correct")):this.state.status===P&&(n=i.createElement(f.default,(0,r.default)({},h.iconRemove,{style:{color:"#ff5454"}})),t=u._("Incorrect"));const s=this.props.inGradedGroupSet?(0,v.css)(S.gradedGroupInSet):(0,v.css)(S.gradedGroup),c=(0,o.default)({[s]:e.isMobile,"perseus-graded-group":!0,"answer-correct":!e.isMobile&&this.state.status===x,"answer-incorrect":!e.isMobile&&this.state.status===P}),{answerBarState:y}=this.state,b="CORRECT"===y,w=e.readOnly||e.isMobile&&b;return i.createElement("div",{className:c},!!this.props.title&&i.createElement("div",{className:(0,v.css)(S.title)},this.props.title),i.createElement(g.default,(0,r.default)({},this.props,{ref:"renderer",apiOptions:(0,r.default)({},e,{readOnly:w}),onInteractWithWidget:this._onInteractWithWidget,linterContext:this.props.linterContext})),!e.isMobile&&n&&i.createElement("div",{className:"group-icon"},n),!e.isMobile&&t&&i.createElement("div",{className:(0,v.css)(p.default.srOnly),role:"alert","aria-label":t},t),!e.isMobile&&i.createElement("p",null,this.state.message),!e.isMobile&&i.createElement(l.default,{kind:"secondary",disabled:this.props.apiOptions.readOnly,onClick:this._checkAnswer},u._("Check")),!e.isMobile&&b&&this.props.onNextQuestion&&i.createElement(l.default,{kind:"secondary",disabled:this.props.apiOptions.readOnly,onClick:this.props.onNextQuestion,style:{marginLeft:5}},u._("Next question")),this.props.hint&&this.props.hint.content&&(this.state.showHint?i.createElement("div",null,i.createElement("button",{tabIndex:"0",className:(0,v.css)(S.explanationTitle),onClick:()=>this.setState({showHint:!1}),onKeyPress:e=>{e.preventDefault(),this.setState({showHint:!1})}},u._("Hide explanation")),i.createElement(g.default,(0,r.default)({},this.props.hint,{ref:"hints-renderer",apiOptions:e,linterContext:this.props.linterContext}))):i.createElement("button",{tabIndex:"0",onClick:()=>this.setState({showHint:!0}),onKeyPress:e=>{e.preventDefault(),this.setState({showHint:!0})},className:(0,v.css)(S.showHintLink)},u._("Explain"))),e.isMobile&&"HIDDEN"!==y&&i.createElement(m.default,{apiOptions:e,answerBarState:y,onCheckAnswer:this._checkAnswer,onNextQuestion:this.props.onNextQuestion}))}}T.defaultProps={title:"",content:"",widgets:{},images:{},hint:null,hasHint:!1,linterContext:b.linterContextDefault};const S=v.StyleSheet.create({gradedGroupInSet:{marginLeft:0,paddingLeft:0},gradedGroup:{borderTop:`1px solid ${y.gray76}`,borderBottom:`1px solid ${y.gray76}`,backgroundColor:y.tableBackgroundAccent,marginLeft:y.negativePhoneMargin,marginRight:y.negativePhoneMargin,paddingBottom:y.phoneMargin,paddingLeft:y.phoneMargin,paddingRight:y.phoneMargin,paddingTop:10,width:"auto"},showHintLink:{backgroundColor:"unset",fontSize:14,padding:0,border:"none",marginTop:20,color:y.kaGreen,cursor:"pointer",display:"block",clear:"both"},explanationTitle:{backgroundColor:"unset",marginTop:20,color:y.kaGreen,marginBottom:10,cursor:"pointer",fontSize:14,padding:0,border:"none",display:"block",clear:"both"},title:{fontSize:12,color:y.gray76,textTransform:"uppercase",marginBottom:11,letterSpacing:.8}});var I={name:"graded-group",displayName:"Graded group (articles only)",widget:T,traverseChildWidgets:function(e,t){return a.default.extend({},e,t(e))},hidden:!1,tracking:"all",isLintable:!0};t.default=I},"h/OD":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=r?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(s,i,a):s[i]=e[i]}s.default=e,n&&n.set(e,s);return s}(n("q1tI")),r=n("4PhQ");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}class i extends s.PureComponent{componentDidMount(){this._sendWordsUpdate()}componentDidUpdate(){this._sendWordsUpdate()}_sendWordsUpdate(){this.props.onWordsUpdate(this._getWordRanges())}_getWordRanges(){const e=this._container;if(!e)throw new r.KAError("invariant violation: `this._container` is not defined, but this method is only called after mount/update",r.Errors.Internal);const t=e.ownerDocument.createTreeWalker(e,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT,(()=>NodeFilter.FILTER_ACCEPT),!1),n=[];let s=null;for(;t.nextNode();){const e=t.currentNode;if(e.nodeType===Node.ELEMENT_NODE){"inline"!==getComputedStyle(e).display&&(s=null)}else if(e.nodeType===Node.TEXT_NODE){const t=e.nodeValue,r=/\S+/g;let o,i=null;for(;null!==(o=r.exec(t));){const r=o.index,a=o.index+o[0].length;let l;0===r&&s?(l=s,l.setEnd(e,a)):(l=e.ownerDocument.createRange(),l.setStart(e,r),l.setEnd(e,a),n.push(l)),a===t.length&&(i=l)}s=i}}return n}render(){return s.createElement("div",{ref:e=>this._container=e},this.props.children)}}var a=i;t.default=a},"h/tm":function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n("pVnL")),o=m(n("q1tI")),i=s(n("17x9")),a=s(n("i8i4")),l=s(n("5pch")),u=s(n("96rG")),p=m(n("4PhQ")),d=s(n("Atlv")),c=s(n("uBl0")),h=n("j8wP"),f=n("zahm");function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function m(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(s,o,i):s[o]=e[o]}return s.default=e,n&&n.set(e,s),s}class y extends o.Component{render(){return o.createElement("div",{className:"card-wrap "+h.ClassNames.INTERACTIVE,style:{width:this.props.width}},o.createElement("div",{className:"card placeholder",style:{height:this.props.height}}))}}y.propTypes={width:i.default.number.isRequired,height:i.default.number.isRequired};class v extends o.Component{render(){return o.createElement("div",{className:"card-wrap "+h.ClassNames.INTERACTIVE},o.createElement("div",{className:"card drag-hint"}))}}const b=i.default.shape({left:i.default.number,top:i.default.number});class w extends o.Component{constructor(...e){super(...e),this.state={dragging:!1},this.bindMouseMoveUp=()=>{this.mouseMoveUpBound=!0,(0,u.default)(document).on("mousemove",this.onMouseMove),(0,u.default)(document).on("mouseup",this.onMouseUp)},this.unbindMouseMoveUp=()=>{this.mouseMoveUpBound=!1,(0,u.default)(document).off("mousemove",this.onMouseMove),(0,u.default)(document).off("mouseup",this.onMouseUp)},this.onMouseDown=e=>{e.preventDefault();const t=c.default.extractPointerLocation(e);t&&(this.setState({dragging:!0}),this.bindMouseMoveUp(),this.props.onMouseDown&&this.props.onMouseDown(t,this))},this.onMouseMove=e=>{if(!this.state.dragging)return;e.preventDefault();const t=c.default.extractPointerLocation(e);t&&this.props.onMouseMove&&this.props.onMouseMove(t)},this.onMouseUp=e=>{e.preventDefault();const t=c.default.extractPointerLocation(e);t&&(this.setState({dragging:!1}),this.unbindMouseMoveUp(),this.props.onMouseUp&&this.props.onMouseUp(t))}}render(){let e={};this.props.floating&&(e={position:"absolute",left:this.props.startOffset.left,top:this.props.startOffset.top}),this.props.width&&(e.width=this.props.width);const t=["card"];this.props.stack&&t.push("stack"),this.props.floating&&!this.props.animating&&(t.push("dragging"),e.left+=this.props.mouse.left-this.props.startMouse.left,e.top+=this.props.mouse.top-this.props.startMouse.top);const n=l.default.pick(this.props,"content"),s=this.props.animating?u.default.noop:this.onMouseDown;return o.createElement("div",{className:"card-wrap "+h.ClassNames.INTERACTIVE,style:e,onMouseDown:s,onTouchStart:s,onTouchEnd:this.onMouseUp,onTouchCancel:this.onMouseUp},o.createElement("div",{className:t.join(" ")},o.createElement(d.default,(0,r.default)({},n,{linterContext:this.props.linterContext}))))}shouldComponentUpdate(e,t){return this.props.floating||e.floating||this.props.content!==e.content||this.props.fakeRef!==e.fakeRef}componentDidMount(){this.mouseMoveUpBound=!1,document.addEventListener("touchmove",this.onMouseMove,!!c.default.supportsPassiveEvents()&&{passive:!1})}componentDidUpdate(e,t){if(this.props.animating&&!e.animating){const e=15*Math.sqrt(Math.sqrt(Math.pow(this.props.animateTo.left-this.props.startOffset.left,2)+Math.pow(this.props.animateTo.top-this.props.startOffset.top,2)));(0,u.default)(a.default.findDOMNode(this)).animate(this.props.animateTo,Math.max(e,1),this.props.onAnimationEnd)}}componentWillUnmount(){this.mouseMoveUpBound&&(p.default.error("Removing an element with bound event handlers.",p.Errors.Internal),this.unbindMouseMoveUp(),c.default.resetTouchHandlers()),document.removeEventListener("touchmove",this.onMouseMove)}}w.propTypes={floating:i.default.bool.isRequired,animating:i.default.bool,width:i.default.number,stack:i.default.bool,onMouseDown:i.default.func,onMouseMove:i.default.func,onMouseUp:i.default.func,startMouse:b,startOffset:b,animateTo:b,onAnimationEnd:i.default.func,linterContext:f.linterContextProps},w.defaultProps={stack:!1,animating:!1,linterContext:f.linterContextDefault};const k="normal",M="horizontal";class x extends o.Component{constructor(...e){super(...e),this.state={current:[],dragging:!1,placeholderIndex:null},this.onClick=(e,t,n,s)=>{const r=(0,u.default)(a.default.findDOMNode(s)),o=this.state.current.slice();let i,l=null;"current"===e?(o.splice(t,1),i=this.state.current[t],l=t):"bank"===e&&(i=this.props.options[t]),this.setState({current:o,dragging:!0,placeholderIndex:l,dragKey:i.key,dragContent:i.content,dragWidth:r.width(),dragHeight:r.height(),grabPos:n,mousePos:n,offsetPos:r.position()})},this.onRelease=e=>{const t=this.refs.dragging;if(null==t)return;const n=this.isCardInBank(t),s=this.state.placeholderIndex,r=()=>{const e=this.state.current.slice();if(!n){const t={content:this.state.dragContent,key:l.default.uniqueId("perseus_draggable_card_"),width:this.state.dragWidth};e.splice(s,0,t)}this.props.onChange({current:e}),this.setState({current:e,dragging:!1,placeholderIndex:null,animating:!1}),this.props.trackInteraction()},o=(0,u.default)(a.default.findDOMNode(t)).position();let i=null;n?l.default.each(this.props.options,(function(e,t){if(e.content===this.state.dragContent){const e=a.default.findDOMNode(this.refs["bank"+t]);i=(0,u.default)(e).position()}}),this):null!=this.refs.placeholder&&(i=(0,u.default)(a.default.findDOMNode(this.refs.placeholder)).position()),null==i?r():this.setState({offsetPos:o,animateTo:i,onAnimationEnd:r,animating:!0,dragging:!1})},this.onMouseMove=e=>{const t=this.refs.dragging;if(null==t)return;let n;n=this.isCardInBank(t)?null:this.findCorrectIndex(t,this.state.current),this.setState({mousePos:e,placeholderIndex:n})},this.findCorrectIndex=(e,t)=>{const n=this.props.layout===M,s=(0,u.default)(a.default.findDOMNode(this.refs.dragList)),r=s.offset().left,o=s.offset().top,i=(0,u.default)(a.default.findDOMNode(e)).offset().left-r,p=(0,u.default)(a.default.findDOMNode(e)).offset().top-o;let d=0,c=0,h=0;return n?l.default.each(t,(function(e,t){const n=a.default.findDOMNode(this.refs["sortable"+t]),s=(0,u.default)(n).outerWidth(!0);i>c+s/2&&(d+=1),c+=s}),this):l.default.each(t,(function(e,t){const n=a.default.findDOMNode(this.refs["sortable"+t]),s=(0,u.default)(n).outerHeight(!0);p>h+s/2&&(d+=1),h+=s}),this),d},this.isCardInBank=e=>{if(null==e)return!1;const t=this.props.layout===M,n=(0,u.default)(a.default.findDOMNode(e)),s=(0,u.default)(a.default.findDOMNode(this.refs.bank)),r=n.offset(),o=s.offset(),i=n.outerHeight(!0),l=s.outerHeight(!0),p=s.outerWidth(!0),d=a.default.findDOMNode(this.refs.dragList),c=((0,u.default)(d).width(),n.outerWidth(!0));return t?r.top+i/2<o.top+l:r.left+c/2<o.left+p},this.getUserInput=()=>({current:l.default.map(this.props.current,(function(e){return e.content}))}),this.simpleValidate=e=>x.validate(this.getUserInput(),e)}UNSAFE_componentWillReceiveProps(e){l.default.isEqual(this.props.current,e.current)||this.setState({current:e.current})}render(){const e=this.state.dragging&&o.createElement(w,{ref:"dragging",floating:!0,content:this.state.dragContent,startOffset:this.state.offsetPos,startMouse:this.state.grabPos,mouse:this.state.mousePos,width:this.state.dragWidth,onMouseUp:this.onRelease,onMouseMove:this.onMouseMove,key:this.state.dragKey||"draggingCard",linterContext:this.props.linterContext}),t=this.state.animating&&o.createElement(w,{floating:!0,animating:!0,content:this.state.dragContent,startOffset:this.state.offsetPos,width:this.state.dragWidth,animateTo:this.state.animateTo,onAnimationEnd:this.state.onAnimationEnd,key:this.state.dragKey||"draggingCard",linterContext:this.props.linterContext}),n=l.default.map(this.state.current,(function(e,t){return o.createElement(w,{key:`sortableCard${t}`,ref:"sortable"+t,fakeRef:"sortable"+t,floating:!1,content:e.content,width:e.width,linterContext:this.props.linterContext,onMouseDown:this.state.animating?u.default.noop:this.onClick.bind(null,"current",t)})}),this);if(null!=this.state.placeholderIndex){const e=o.createElement(y,{ref:"placeholder",width:this.state.dragWidth,height:this.state.dragHeight,key:"placeholder"});n.splice(this.state.placeholderIndex,0,e)}const s=n.length>0;n.push(e,t);const r=o.createElement("div",{className:"perseus-clearfix draggable-box"},!s&&o.createElement(v,null),o.createElement("div",{ref:"dragList"},n)),i=o.createElement("div",{ref:"bank",className:"bank perseus-clearfix"},l.default.map(this.props.options,((e,t)=>o.createElement(w,{ref:"bank"+t,floating:!1,content:e.content,stack:!0,key:t,linterContext:this.props.linterContext,onMouseDown:this.state.animating?u.default.noop:this.onClick.bind(null,"bank",t),onMouseMove:this.onMouseMove,onMouseUp:this.onRelease})),this));return o.createElement("div",{className:"draggy-boxy-thing orderer height-"+this.props.height+" layout-"+this.props.layout+" above-scratchpad blank-background perseus-clearfix "+h.ClassNames.INTERACTIVE,ref:"orderer"},i,r)}}x.propTypes={correctOptions:i.default.array,current:i.default.array,height:i.default.oneOf([k,"auto"]),layout:i.default.oneOf([M,"vertical"]),options:i.default.array,trackInteraction:i.default.func.isRequired,linterContext:f.linterContextProps},x.defaultProps={current:[],options:[],correctOptions:[],height:k,layout:M,linterContext:f.linterContextDefault},l.default.extend(x,{validate:function(e,t){if(0===e.current.length)return{type:"invalid",message:null};return{type:"points",earned:l.default.isEqual(e.current,l.default.pluck(t.correctOptions,"content"))?1:0,total:1,message:null}}});var P={name:"orderer",displayName:"Orderer",widget:x,isLintable:!0};t.default=P},h1Z3:function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Categorizer=void 0;var r=n("mR6N"),o=w(n("q1tI")),i=s(n("TSYQ")),a=s(n("5pch")),l=w(n("+jAD")),u=s(n("fUCW")),p=w(n("HEOz")),d=n("j8wP"),c=n("/4Qb"),h=s(n("APgo")),f=s(n("Atlv")),g=s(n("uBl0")),m=s(n("TBZ3")),y=s(n("MG0i")),v=n("zahm");function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}function w(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=b(t);if(n&&n.has(e))return n.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(s,o,i):s[o]=e[o]}return s.default=e,n&&n.set(e,s),s}class k extends o.Component{constructor(...e){super(...e),this.state={uniqueId:a.default.uniqueId("perseus_radio_")},this.change=(...e)=>l.change.apply(this,e),this.getUserInput=()=>k.getUserInputFromProps(this.props),this.onChange=(e,t)=>{const n=[].concat(this.props.values);n[e]=t,this.change("values",n),this.props.trackInteraction()},this.simpleValidate=e=>k.validate(this.getUserInput(),e)}render(){const e=this,t=this.props.apiOptions.isMobile;let n=this.props.items.map(((e,t)=>[e,t]));this.props.randomizeItems&&(n=g.default.shuffle(n,this.props.problemNum));const s=o.createElement("table",{className:"categorizer-table "+(0,r.css)(M.mobileTable)},o.createElement("thead",null,o.createElement("tr",null,o.createElement("th",null," "),this.props.categories.map(((e,t)=>o.createElement("th",{className:(0,r.css)(M.header),key:t},o.createElement(f.default,{content:e,linterContext:this.props.linterContext})))))),o.createElement("tbody",null,n.map((n=>{const s=n[0],i=n[1],a=e.state.uniqueId+"_"+i;return o.createElement("tr",{key:i},o.createElement("td",null,o.createElement(f.default,{content:s,linterContext:this.props.linterContext})),e.props.categories.map(((n,s)=>{const l=e.props.values[i]===s;return o.createElement("td",{className:"category "+(0,r.css)(M.cell),key:s},o.createElement("div",{className:d.ClassNames.INTERACTIVE,role:"button","aria-label":n,onClick:this.onChange.bind(this,i,s)},t&&o.createElement("input",{type:"radio",name:a,className:(0,r.css)(y.default.responsiveInput,y.default.responsiveRadioInput),checked:l,onChange:this.onChange.bind(this,i,s),onClick:e=>e.stopPropagation()}),!t&&o.createElement("span",{className:(0,r.css)(M.radioSpan,l&&M.checkedRadioSpan,this.props.static&&l&&M.staticCheckedRadioSpan)},l?o.createElement(h.default,c.iconCircle):o.createElement(h.default,c.iconCircleThin))))})))})))),a=(0,i.default)({"categorizer-container":!0,"static-mode":this.props.static}),l=this.props.apiOptions.isMobile?[M.fullBleedContainer]:[];return o.createElement("div",{className:a+" "+r.css.apply(void 0,l)},s)}static validate(e,t){let n=!0,s=!0;return a.default.each(t.values,(function(t,r){null==e.values[r]&&(n=!1),e.values[r]!==t&&(s=!1)})),n?{type:"points",earned:s?1:0,total:1,message:null}:{type:"invalid",message:p._("Make sure you select something for every row.")}}static getUserInputFromProps(e){return u.default.getUserInputFromProps(e)}}t.Categorizer=k,k.defaultProps={items:[],categories:[],values:[],linterContext:v.linterContextDefault};const M=r.StyleSheet.create({mobileTable:{[m.default.smOrSmaller]:{minWidth:"auto"}},fullBleedContainer:{[m.default.mdOrSmaller]:{marginLeft:-16,marginRight:-16,overflowX:"auto"}},header:{textAlign:"center",verticalAlign:"bottom"},cell:{textAlign:"center",padding:0,color:"#ccc",verticalAlign:"middle"},radioSpan:{fontSize:30,paddingRight:3,":hover":{color:"#999"}},checkedRadioSpan:{color:"#333"},staticCheckedRadioSpan:{color:"#888"}});var x={name:"categorizer",displayName:"Categorizer",widget:k,transform:e=>a.default.pick(e,"items","categories","randomizeItems"),staticTransform:e=>a.default.pick(e,"items","categories","values","randomizeItems"),isLintable:!0};t.default=x},iUos:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=r?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(s,o,a):s[o]=e[o]}s.default=e,n&&n.set(e,s);return s}(n("q1tI")),r=n("mR6N"),o=n("La43");function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}class a extends s.PureComponent{constructor(...e){super(...e),this.state={cachedHighlightRects:this._computeRects(this.props),tooltipIsHovered:!1}}UNSAFE_componentWillReceiveProps(e){this.props.highlight===e.highlight&&this.props.offsetParent===e.offsetParent||this.setState({cachedHighlightRects:this._computeRects(e)})}_computeRects(e){const{highlight:t,offsetParent:n}=e,s=(0,o.getClientRectsForTextInRange)(t.domRange),{left:r,top:i}=n.getBoundingClientRect();return s.map((e=>(0,o.getRelativeRect)(e,{left:r,top:i})))}_rectIsHovered(e,t){const n=(0,o.getRelativePosition)(t,{left:e.left,top:e.top});return 0<=n.left&&n.left<e.width&&0<=n.top&&n.top<e.height}isHovered(e){if(!e)return!1;const{offsetParent:t}=this.props,{cachedHighlightRects:n}=this.state,{left:s,top:r}=t.getBoundingClientRect(),i=(0,o.getRelativePosition)(e,{left:s,top:r});return n.some((e=>this._rectIsHovered(e,i)))}render(){const e=this.state.cachedHighlightRects;return s.createElement("div",null,e.map(((e,t)=>s.createElement("div",{key:t,className:(0,r.css)(l.highlightRect),style:{position:"absolute",width:e.width,height:e.height,top:e.top,left:e.left,zIndex:this.props.zIndexes.belowContent}}))))}}const l=r.StyleSheet.create({highlightRect:{background:"#fffabe"}});var u=a;t.default=u},ipxt:function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=v(n("q1tI")),o=s(n("17x9")),i=s(n("i8i4")),a=s(n("5pch")),l=s(n("96rG")),u=n("j8wP"),p=s(n("uBl0")),d=s(n("XwLL")),c=s(n("yfnS")),h=s(n("NT9k")),f=v(n("HEOz")),g=s(n("bHYm")),m=s(n("T2HF"));function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}function v(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(s,o,i):s[o]=e[o]}return s.default=e,n&&n.set(e,s),s}const{deepEq:b}=p.default,w="bar",k="line",M="pic",x="histogram",P="dotplot";o.default.oneOf([w,k,M,x,P]),o.default.arrayOf(o.default.string),o.default.arrayOf(o.default.oneOfType([o.default.number,o.default.string])),o.default.number,o.default.number,o.default.number,o.default.number,o.default.number,o.default.string,o.default.arrayOf(o.default.number),o.default.number,o.default.arrayOf(o.default.number),o.default.bool;class C extends r.Component{constructor(...e){super(...e),this._isMounted=!1,this.state={values:this.props.starting||[1],categoryHeights:{}},this.DOT_PLOT_POINT_SIZE=()=>this.props.apiOptions.isMobile?6:4,this.DOT_PLOT_POINT_PADDING=()=>8,this.DOT_TICK_POINT_SIZE=()=>2,this.setupGraphie=e=>{const t=this;t.shouldSetupGraphie=!1;const n=i.default.findDOMNode(t.refs.graphieDiv);(0,l.default)(n).empty();const s=h.default.createGraphie(n);t.graphie=s,t.graphie.pics=[],t.graphie.dotTicks=[];const r=t.props.type===w,o=t.props.type===k,u=t.props.type===M,p=t.props.type===x,g=t.props.type===P,y=u||g,v={},b=v,C=this.props.apiOptions.isMobile;b.graph={lines:[],bars:[],points:[],dividers:[]},b.scaleY=t.props.scaleY,b.dimX=t.props.categories.length;const E=C?[288,336]:t.props.plotDimensions;if(o)b.dimX+=C?-.2:1;else if(p)b.barPad=0,b.barWidth=1;else if(r)b.barPad=C?.08:.15,b.barWidth=1-2*b.barPad,b.dimX+=(C?-2:2)*b.barPad;else if(y){b.picBoxHeight=t.props.picBoxHeight,b.picBoxWidthPx=E[0]/t.props.categories.length;const e=E[0]-b.dimX*b.picBoxWidthPx;b.picPad=e/(2*b.dimX+2);const n=b.picBoxWidthPx+2*b.picPad;b.picPad=b.picPad/n,b.picBoxWidth=b.picBoxWidthPx/n,b.dimX+=2*b.picPad}g&&(b.picBoxHeight=2*this.DOT_PLOT_POINT_SIZE()+this.DOT_PLOT_POINT_PADDING()),b.dimY=Math.ceil(t.props.maxY/b.scaleY)*b.scaleY;let O=25;(r||o)&&C&&(O=0!==t.props.labels[1].length?17:11),g&&(O/=2),C&&y&&0===t.props.labels[1].length&&(O=0);let _=25,T=75;if(C&&(r||y)){const e=Math.max.apply(Math,[0].concat(Object.values(t.state.categoryHeights)));if(e){let t=25;y&&(t+=10),T=t+e}}if(b.scale=C?[(E[0]-4*O)/b.dimX,(E[1]-(_+T))/b.dimY]:a.default.map([b.dimX,b.dimY],(function(e,t){return E[t]/e})),y&&(b.scale[1]=b.picBoxHeight/b.scaleY),O/=b.scale[0],_/=b.scale[1],T/=b.scale[1],s.init({range:[[-3*O,b.dimX+O],[-T,b.dimY+_]],scale:b.scale,isMobile:this.props.apiOptions.isMobile}),s.addMouseLayer({allowScratchpad:!0,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable}),!y){for(let e=C?b.scaleY:0;e<=b.dimY;e+=b.scaleY)s.label([0,e],d.default.roundToApprox(e,2),"left",!0),s.style({stroke:C?"#e9ebec":"#000",strokeWidth:1,opacity:C?1:.3},(function(){s.line([0,e],[b.dimX,e])}))}(r||o)&&C&&(t.graphie.dragPrompt=s.label([b.dimX/2,b.dimY/2],f._("Drag handles to make graph"),"center",!1).css("font-weight","bold").css("color",c.default.KA_GREEN).css("display","none")),t.setupCategories(v),y&&C&&(t.graphie.dotPrompt=s.label([b.dimX/2,b.dimY/2],f._("Tap to add points"),"center",!1).css("font-weight","bold").css("color",c.default.KA_GREEN).css("display","none")),y&&t.drawPicHeights(t.state.values,e.values),s.style({stroke:"#000",strokeWidth:2,opacity:1},(function(){y?g?s.style({stroke:C?c.default.GRAY_G:"#000",strokeWidth:C?1:2},(()=>s.line([C?0:.5,0],[b.dimX-(C?0:.5),0]))):(s.line([0,0],[b.dimX,0]),0===t.props.labels[1].length&&C||s.style({stroke:C?c.default.GRAY_G:"#000",strokeWidth:C?1:2},(()=>s.line([0,0],[0,b.dimY])))):(s.style({stroke:C?c.default.GRAY_G:"#000",strokeWidth:C?1:2},(()=>s.line([C?3*-O:0,0],[b.dimX+(C?O:0),0]))),(r||o)&&C||s.style({stroke:C?c.default.GRAY_G:"#000",strokeWidth:C?1:2},(()=>s.line([0,0],[0,b.dimY]))))})),s.label([b.dimX/2,C?-T:-35/b.scale[1]],t.props.labels[0],C?"above":"below",!1).css("font-weight","bold").css("color",C&&c.default.GRAY_F),s.label([(C?-35:-60)/b.scale[0],b.dimY/2],t.props.labels[1],"center",!1).css("font-weight","bold").css("color",C&&c.default.GRAY_F).addClass("rotate"),this.props.apiOptions.isMobile&&(this.horizHairline=new m.default(this.graphie,[0,0],[0,0],{normalStyle:{strokeWidth:1}}),this.horizHairline.attr({stroke:c.default.INTERACTIVE}),this.horizHairline.hide(),this.hairlineRange=[[0,b.dimX],[0,b.dimY]])},this.showHairlines=e=>{this.props.apiOptions.isMobile&&"none"!==this.props.markings&&(this.horizHairline.moveTo([this.hairlineRange[0][0],e[1]],[this.hairlineRange[0][1],e[1]]),this.horizHairline.show())},this.hideHairlines=()=>{this.props.apiOptions.isMobile&&this.horizHairline.hide()},this.labelCategory=(e,t)=>{const n=this.props.apiOptions.isMobile,s=this.graphie;let r=!1;const o=(t+="").match(/^\$(.*)\$$/);o&&(t=o[1],r=!0);const i=Math.PI/180*45,a=n&&!o;return new Promise((o=>{s.style({color:n?c.default.GRAY_G:"inherit",transform:a?"translateX(-50%) translateX(5px) translateY(-50%) rotate(-45deg)":"none",transformOrigin:"100%"},(()=>{const l=s.label([e,n?-.5:0],t,"below",r),u=14+(a?Math.round(l.height()*Math.cos(i)+(l.width()+5)*Math.sin(i)):l.height());o({category:t,height:u})}))}))},this.setupCategories=e=>{const t=this,n=e,s=t.graphie,r=this.props.apiOptions.isMobile,o=[];t.props.type===x?(a.default.times(t.props.categories.length-1,(function(n){t.setupBar({index:n,startHeight:t.state.values[n],config:e,isHistogram:!0})})),a.default.each(t.props.categories,(function(e,i){const a=.5+i*n.barWidth;o.push(t.labelCategory(a,e));const l=6/n.scale[1];s.style({stroke:"#000",strokeWidth:r?1:2,opacity:1},(function(){s.line([a,-l],[a,0])}))}))):a.default.each(t.props.categories,(function(i,a){const l=t.state.values[a];let u;t.props.type===w?u=t.setupBar({index:a,startHeight:l,config:e,isHistogram:!1}):t.props.type===k?u=t.setupLine(a,l,e):t.props.type===M?u=t.setupPic(a,e):t.props.type===P&&(u=t.setupDotplot(a,e));let p=0,d=-6/n.scale[1];t.props.type!==P||r||(p=-d),t.props.type===P?a%t.props.labelInterval!=0&&a!==t.props.categories.length-1||(o.push(t.labelCategory(u,i)),p*=1.5,d*=1.5):o.push(t.labelCategory(u,i)),s.style({stroke:r?c.default.GRAY_G:"#000",strokeWidth:r?1:2,opacity:1},(function(){s.line([u,p],[u,d])}))})),Promise.all(o).then((e=>{if(t._isMounted){const n={};e.forEach((({category:e,height:t})=>n[e]=t)),t.setState({categoryHeights:n})}}))},this._clampValue=(e,t,n)=>Math.max(Math.min(e,n),t),this._maybeShowDragPrompt=()=>{null!=this.graphie.dragPrompt&&(this.graphie.dragPrompt[0].style.display="inline")},this._maybeHideDragPrompt=()=>{null!=this.graphie.dragPrompt&&(this.graphie.dragPrompt[0].style.display="none")},this.setupBar=e=>{const t=this.props.apiOptions.isMobile,n=e.index,s=e.startHeight,r=e.config,o=e.isHistogram,i=this,l=i.graphie,u=r.barWidth/2;let p;p=o?.5+n*r.barWidth+u:(t?u:.5+r.barPad)+n;const d=function(e,n){const s=l.scalePoint(0);if(r.graph.bars[e].scale(1,Math.max(t?.2:.01,n/r.scaleY),s[0],s[1]),o){const t=r.graph.dividers[e-1],o=r.graph.dividers[e];if(t){const o=Math.min(i.state.values[e-1],n);t.scale(1,Math.max(.01,o/r.scaleY),s[0],s[1])}if(o){const t=Math.min(i.state.values[e+1],n);o.scale(1,Math.max(.01,t/r.scaleY),s[0],s[1])}}};if(l.style({stroke:"none",fill:t?c.default.BLUE_C:c.default.LIGHT_BLUE,opacity:1},(function(){r.graph.bars[n]=l.path([[p-u,0],[p-u,r.scaleY],[p+u,r.scaleY],[p+u,0],[p-u,0]])})),o&&n>0&&l.style({stroke:"#000",strokeWidth:1,opacity:.3},(function(){r.graph.dividers.push(l.path([[p-u,0],[p-u,r.scaleY]]))})),t){const e=r.scaleY/i.props.snapsPerLine;r.graph.lines[n]=g.default.addMaybeMobileMovablePoint(this,{coord:[p,s],constraints:[(t,n,s)=>[p,this._clampValue(Math.round(t[1]/e)*e,0,r.dimY)]],onMoveStart:function(){r.graph.bars[n].attr({fill:c.default.INTERACTIVE})},onMove:function(){const e=r.graph.lines[n].coord()[1],t=a.default.clone(i.state.values);t[n]=e,i.setState({values:t}),i.changeAndTrack({values:t}),i._maybeHideDragPrompt(),d(n,e)},onMoveEnd:function(){r.graph.bars[n].attr({fill:c.default.BLUE_C})}}),r.graph.lines[n].state.visibleShape.wrapper.style.zIndex="1",i._maybeShowDragPrompt()}else r.graph.lines[n]=l.addMovableLineSegment({coordA:[p-u,s],coordZ:[p+u,s],snapY:r.scaleY/i.props.snapsPerLine,constraints:{constrainX:!0},normalStyle:{stroke:c.default.INTERACTIVE,"stroke-width":this.props.static?0:4}}),r.graph.lines[n].onMove=function(e,t){let s=this.coordA[1];(s<0||s>r.dimY)&&(s=Math.min(Math.max(s,0),r.dimY),this.coordA[1]=this.coordZ[1]=s,this.transform());const o=a.default.clone(i.state.values);o[n]=s,i.setState({values:o}),i.changeAndTrack({values:o}),d(n,s)};return d(n,s),p},this.setupLine=(e,t,n)=>{const s=this.props.apiOptions.isMobile,r=this,o=n,i=r.graphie,l=e+(s?.4:1);if(s){const s=n.scaleY/r.props.snapsPerLine;o.graph.points[e]=g.default.addMaybeMobileMovablePoint(this,{coord:[l,t],constraints:[(e,t,r)=>[l,this._clampValue(Math.round(e[1]/s)*s,0,n.dimY)]],onMove:function(){const t=o.graph.points[e].coord()[1],n=a.default.clone(r.state.values);n[e]=t,r.setState({values:n}),r.changeAndTrack({values:n}),r._maybeHideDragPrompt()}}),r._maybeShowDragPrompt(),e>0&&(o.graph.lines[e]=g.default.addMovableLine(i,{points:[o.graph.points[e-1],o.graph.points[e]],constraints:g.default.MovablePoint.constraints.fixed(),normalStyle:{stroke:c.default.BLUE_C,"stroke-width":2},highlightStyle:{stroke:c.default.BLUE_C,"stroke-width":2}}))}else o.graph.points[e]=i.addMovablePoint({coord:[l,t],constraints:{constrainX:!0},normalStyle:{fill:c.default.INTERACTIVE,stroke:c.default.INTERACTIVE},snapY:o.scaleY/r.props.snapsPerLine}),o.graph.points[e].onMove=function(t,n){n=Math.min(Math.max(n,0),o.dimY);const s=a.default.clone(r.state.values);return s[e]=n,r.setState({values:s}),r.changeAndTrack({values:s}),[t,n]},e>0&&(o.graph.lines[e]=i.addMovableLineSegment({pointA:o.graph.points[e-1],pointZ:o.graph.points[e],constraints:{fixed:!0},normalStyle:{stroke:"#9ab8ed","stroke-width":2}}));return l},this.setupDotplot=(e,t)=>{const n=this.graphie,s=this.props.apiOptions.isMobile;return this.setupTiledPlot(e,s?.5:1,t,((e,t)=>n.ellipse([e,t],[this.DOT_PLOT_POINT_SIZE()/n.scale[0],this.DOT_PLOT_POINT_SIZE()/n.scale[1]],{fill:c.default.INTERACTIVE,stroke:c.default.INTERACTIVE})))},this.setupPic=(e,t)=>{const n=this.graphie;return this.setupTiledPlot(e,0,t,((e,t)=>{const s=n.scalePoint([e,t]),r=this.props.picSize;return n.raphael.image(this.props.picUrl,s[0]-r/2,s[1]-r/2,r,r)}))},this.setupTiledPlot=(e,t,n,s)=>{const r=this,o=n,i=r.graphie,u=i.pics,p=i.dotTicks,d=e+.5+o.picPad;i.mouselayer.canvas.style.touchAction="none",u[e]=[],p[e]=[];const c=Math.round(o.dimY/o.scaleY)+1;return(0,a.default)(c).times((function(n){const a=((n-=1)+.5)*o.scaleY,c=d-o.picBoxWidth/2,h=a+.5*o.scaleY,f=i.scalePoint([c,h+t]),g=i.mouselayer.rect(f[0],f[1],o.picBoxWidthPx,o.picBoxHeight);(0,l.default)(g[0]).css({fill:"#000",opacity:0,cursor:"pointer"}).on("vmousedown",(function(n){n.preventDefault(),r.whichPicClicked=e,r.setPicHeight(e,h),(0,l.default)(document).on("vmouseup.plotTile",(function(e){(0,l.default)(document).unbind(".plotTile")})),(0,l.default)(document).on("vmousemove.plotTile",(function(e){e.preventDefault();const n=i.getMouseCoord(e)[1],s=Math.floor(n-t),a=(Math.max(-1,Math.floor(s/o.scaleY))+.5)*o.scaleY,l=Math.min(a+.5*o.scaleY,o.dimY);r.setPicHeight(r.whichPicClicked,l)}))})),n<0||(u[e][n]=s(d,a+t),p[e][n]=i.ellipse([d,a+t],[r.DOT_TICK_POINT_SIZE()/i.scale[0],r.DOT_TICK_POINT_SIZE()/i.scale[1]],{fill:"#dee1e3",stroke:"#dee1e3"}))})),d},this.setPicHeight=(e,t)=>{const n=a.default.clone(this.state.values);n[e]=t,this.drawPicHeights(n,this.state.values),this.setState({values:n}),this.changeAndTrack({values:n})},this.changeAndTrack=e=>{this.props.onChange(e),this.props.trackInteraction()},this.drawPicHeights=(e,t)=>{const n=this,s=n.graphie,r=s.pics,o=this.props.apiOptions.isMobile;if(o){const t=e.every((e=>0===e));s.dotPrompt[0].style.display=t?"inline":"none"}a.default.each(r,(function(r,i){a.default.each(r,(function(r,a){const u=(a+1)*n.props.scaleY,p=u<=e[i];if(n.props.type===P){const e=u<=t[i];p&&!e&&r.animate({"stroke-width":8},75,(()=>r.animate({"stroke-width":2},75)))}(0,l.default)(r[0]).css({display:p?"inline":"none"}),s.dotTicks[i][a][0].style.display=p||!o?"none":"inline"}))}))},this.getUserInput=()=>this.state.values,this.simpleValidate=e=>C.validate(this.getUserInput(),e)}render(){const e={marginBottom:this.props.labels[0]?75:0};return r.createElement("div",{className:"perseus-widget-plotter graphie "+u.ClassNames.INTERACTIVE,ref:"graphieDiv",style:e})}componentDidUpdate(e,t){this.shouldSetupGraphie=this.shouldSetupGraphie||!a.default.isEqual(this.state.categoryHeights,t.categoryHeights),this.shouldSetupGraphie&&this.setupGraphie(t)}componentDidMount(){this._isMounted=!0,this.setupGraphie(this.state)}UNSAFE_componentWillReceiveProps(e){this.shouldSetupGraphie=a.default.any(["type","labels","categories","scaleY","maxY","snapsPerLine","picUrl","labelInterval","static"],(function(t){return!a.default.isEqual(this.props[t],e[t])}),this),a.default.isEqual(this.props.starting,e.starting)||a.default.isEqual(this.state.values,e.starting)||(this.shouldSetupGraphie=!0,this.setState({values:e.starting}))}componentWillUnmount(){this._isMounted=!1}}C.propTypes={onChange:o.default.func.isRequired,trackInteraction:o.default.func.isRequired},C.defaultProps={type:w,labels:["",""],categories:[""],scaleY:1,maxY:10,snapsPerLine:2,picSize:40,picBoxHeight:48,picUrl:"",plotDimensions:[380,300],labelInterval:1},a.default.extend(C,{validate:function(e,t){return b(e,t.starting)?{type:"invalid",message:null}:{type:"points",earned:b(e,t.correct)?1:0,total:1,message:null}}});const E=a.default.identity;var O={name:"plotter",displayName:"Plotter",widget:C,staticTransform:E};t.default=O},"j+Ew":function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(s,o,i):s[o]=e[o]}s.default=e,n&&n.set(e,s);return s}(n("q1tI")),o=s(n("17x9")),i=n("mR6N"),a=s(n("5pch")),l=n("yhei"),u=s(n("Atlv")),p=s(n("oBkO")),d=n("j8wP"),c=s(n("uBl0")),h=n("zahm"),f=n("yBUS");function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}const{shuffle:m,seededRNG:y}=c.default;class v extends r.Component{constructor(...e){super(...e),this.state={leftHeight:0,rightHeight:0,katex:null},this.changeAndTrack=e=>{this.props.onChange(e),this.props.trackInteraction()},this.onMeasureLeft=e=>{const t=a.default.max(e.heights);this.setState({leftHeight:t})},this.onMeasureRight=e=>{const t=a.default.max(e.heights);this.setState({rightHeight:t})},this.getUserInput=()=>this.state.katex?{left:this.refs.left.getOptions(),right:this.refs.right.getOptions()}:{left:[],right:[]},this.simpleValidate=e=>v.validate(this.getUserInput(),e)}componentDidMount(){(0,f.getKaTeX)().then((e=>this.setState({katex:e})))}render(){if(!this.state.katex)return r.createElement(l.CircularSpinner,null);const e=y(this.props.problemNum);let t;t=this.props.orderMatters?m(this.props.left,e,!0):this.props.left;const n=m(this.props.right,e,!0),s=a.default.any(this.props.labels),o={height:a.default.max([this.state.leftHeight,this.state.rightHeight])},d=this.props.apiOptions.isMobile?8:5;return r.createElement("table",{className:(0,i.css)(w.widget)+" perseus-widget-matcher"},r.createElement("tbody",null,s&&r.createElement("tr",{className:(0,i.css)(w.row)},r.createElement("th",{className:(0,i.css)(w.column,w.columnLabel)},r.createElement(u.default,{content:this.props.labels[0]||"...",linterContext:this.props.linterContext})),r.createElement("th",{className:(0,i.css)(w.column,w.columnRight,w.columnLabel)},r.createElement(u.default,{content:this.props.labels[1]||"...",linterContext:this.props.linterContext}))),r.createElement("tr",{className:(0,i.css)(w.row)},r.createElement("td",{className:(0,i.css)(w.column)},r.createElement(p.default,{options:t,layout:"vertical",padding:this.props.padding,disabled:!this.props.orderMatters,constraints:o,onMeasure:this.onMeasureLeft,onChange:this.changeAndTrack,margin:d,linterContext:this.props.linterContext,ref:"left"})),r.createElement("td",{className:(0,i.css)(w.column,w.columnRight)},r.createElement(p.default,{options:n,layout:"vertical",padding:this.props.padding,constraints:o,onMeasure:this.onMeasureRight,onChange:this.changeAndTrack,margin:d,linterContext:this.props.linterContext,ref:"right"})))))}}v.propTypes={apiOptions:d.ApiOptions.propTypes,labels:o.default.array,left:o.default.array,onChange:o.default.func,orderMatters:o.default.bool,padding:o.default.bool,problemNum:o.default.number,right:o.default.array,trackInteraction:o.default.func.isRequired,linterContext:h.linterContextProps},v.defaultProps={left:[],right:[],labels:["",""],orderMatters:!1,padding:!0,problemNum:0,onChange:function(){},linterContext:h.linterContextDefault},a.default.extend(v,{validate:function(e,t){return{type:"points",earned:a.default.isEqual(e.left,t.left)&&a.default.isEqual(e.right,t.right)?1:0,total:1,message:null}}});const b="1px solid #444",w=i.StyleSheet.create({widget:{paddingTop:5,maxWidth:"100%",minWidth:"auto"},row:{border:0},column:{padding:0,border:0},columnRight:{borderLeft:b},columnLabel:{fontWeight:"inherit",borderBottom:b,padding:"0 5px 5px 5px",textAlign:"center"}});var k={name:"matcher",displayName:"Two column matcher",widget:v,isLintable:!0};t.default=k},jDkz:function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(s,o,i):s[o]=e[o]}s.default=e,n&&n.set(e,s);return s}(n("q1tI")),o=s(n("17x9")),i=s(n("5pch")),a=s(n("oBkO")),l=n("j8wP"),u=s(n("uBl0")),p=n("zahm");function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}const{shuffle:c}=u.default,h="horizontal";class f extends r.Component{constructor(...e){super(...e),this.state={changed:!1},this.handleChange=e=>{this._isMounted&&this.setState({changed:!0},(()=>{setTimeout((()=>{this.props.onChange(e),this.props.trackInteraction()}),0)}))},this.getUserInput=()=>({options:this.refs.sortable.getOptions()}),this.simpleValidate=e=>this.state.changed?f.validate(this.getUserInput(),e):{type:"invalid",message:null}}static validate(e,t){return{type:"points",earned:i.default.isEqual(e.options,t.correct)?1:0,total:1,message:null}}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}render(){const e=c(this.props.correct,this.props.problemNum,!0),{apiOptions:t}=this.props,n=t.isMobile?8:5;return r.createElement("div",{className:"perseus-widget-sorter perseus-clearfix"},r.createElement(a.default,{options:e,layout:this.props.layout,margin:n,padding:this.props.padding,onChange:this.handleChange,linterContext:this.props.linterContext,ref:"sortable"}))}}f.propTypes={apiOptions:l.ApiOptions.propTypes,correct:o.default.array,layout:o.default.oneOf([h,"vertical"]),onChange:o.default.func,padding:o.default.bool,problemNum:o.default.number,trackInteraction:o.default.func.isRequired,linterContext:p.linterContextProps},f.defaultProps={correct:[],layout:h,padding:!0,problemNum:0,onChange:function(){},linterContext:p.linterContextDefault};var g={name:"sorter",displayName:"Sorter",widget:f,isLintable:!0};t.default=g},jH0K:function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(s,o,i):s[o]=e[o]}s.default=e,n&&n.set(e,s);return s}(n("q1tI")),o=s(n("17x9")),i=s(n("i8i4")),a=s(n("5pch")),l=s(n("96rG")),u=s(n("uBl0")),p=s(n("NT9k")),d=n("UcaO"),c=s(n("yPu2"));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}const f={fontStyle:"italic",fontWeight:"bold",fontSize:"32px",width:"100%",height:"100%",textAlign:"center",backgroundColor:"white",position:"absolute",zIndex:1,transition:"opacity .25s ease-in-out","-moz-transition":"opacity .25s ease-in-out","-webkit-transition":"opacity .25s ease-in-out"},g={position:"relative",top:"25%"};class m extends r.Component{constructor(...e){super(...e),this.reset=()=>{this._setupGraphie(!1)},this.graphie=()=>this._graphie,this.pointsFromNormalized=(e,t)=>{const n=this;return a.default.map(e,(function(e){return a.default.map(e,(function(e,s){const r=n.props.range[s];if(t)return r[0]+(r[1]-r[0])*e;const o=n.props.step[s],i=function(e,t){return Math.floor((e[1]-e[0])/t)}(r,o),a=Math.round(e*i);return r[0]+o*a}))}))},this._setupGraphie=e=>{if(this._hasSetupGraphieThisUpdate)return;const t=i.default.findDOMNode(this.refs.graphieDiv);(0,l.default)(t).empty();const n=this.props.labels.map((e=>u.default.unescapeMathMode(e))),s=this.props.range,r=this._graphie=p.default.createGraphie(t),o=this._getGridConfig();r.snap=this.props.snapStep,"graph"===this.props.markings?(r.graphInit({range:s,scale:a.default.pluck(o,"scale"),axisArrows:"<->",labelFormat:function(e){return"\\small{"+e+"}"},gridStep:this.props.gridStep,tickStep:a.default.pluck(o,"tickStep"),labelStep:1,unityLabels:a.default.pluck(o,"unityLabel"),isMobile:this.props.isMobile}),r.label([0,s[1][1]],n[1],this.props.isMobile?"below right":"above"),r.label([s[0][1],0],n[0],this.props.isMobile?"above left":"right")):"grid"===this.props.markings?r.graphInit({range:s,scale:a.default.pluck(o,"scale"),gridStep:this.props.gridStep,axes:!1,ticks:!1,labels:!1,isMobile:this.props.isMobile}):"none"===this.props.markings&&r.init({range:s,scale:a.default.pluck(o,"scale"),isMobile:this.props.isMobile});let d;if(this.props.instructions){d=(0,l.default)("<div/>"),a.default.each(f,(function(e,t){d.css(t,e)})),d.css("opacity",.5);const e=(0,l.default)("<span/>",{text:this.props.instructions});a.default.each(g,(function(t,n){e.css(n,t)})),d.append(e),(0,l.default)(t).append(d)}else d=void 0;const c=d||this.props.onMouseDown?a.default.bind((function(e){d&&(d.remove(),d=null),this.props.onMouseDown(e)}),this):null,h=d?function(){d&&d.css("opacity",0)}:null,m=d?function(){d&&d.css("opacity",.5)}:null;r.addMouseLayer({onClick:this.props.onClick,onMouseDown:c,onMouseOver:h,onMouseOut:m,onMouseUp:this.props.onMouseUp,onMouseMove:this.props.onMouseMove,allowScratchpad:!0,setDrawingAreaAvailable:this.props.setDrawingAreaAvailable}),this._updateProtractor(),this._updateRuler(),this._hasSetupGraphieThisUpdate=!0,!e&&this.props.onGraphieUpdated&&this.props.onGraphieUpdated(r)},this._getGridConfig=()=>{const e=this;return a.default.map(e.props.step,(function(t,n){return u.default.gridDimensionConfig(t,e.props.range[n],e.props.box[n],e.props.gridStep[n])}))},this._updateProtractor=()=>{if(this.protractor&&this.protractor.remove(),this.props.showProtractor){const e=this.pointsFromNormalized([[.5,.05]])[0];this.protractor=this._graphie.protractor(e)}},this._updateRuler=()=>{if(this.ruler&&this.ruler.remove(),this.props.showRuler){const e=this.pointsFromNormalized([[.5,.25]])[0],t=this._graphie.range[0][1]-this._graphie.range[0][0];this.ruler=this._graphie.ruler({center:e,label:this.props.rulerLabel,pixelsPerUnit:this._graphie.scale[0],ticksPerUnit:this.props.rulerTicks,units:Math.round(.8*t)})}},this.toJSON=()=>a.default.pick(this.props,"range","step","markings","labels","backgroundImage","showProtractor","showRuler","rulerLabel","rulerTicks","gridStep","snapStep")}render(){let e;const t=this.props.backgroundImage;if(t.url){const n=this.props.box[0]/d.interactiveSizes.defaultBoxSize;e=r.createElement(c.default,{src:t.url,width:t.width,height:t.height,scale:n,responsive:!1})}else e=null;return r.createElement("div",{className:"graphie-container above-scratchpad",style:{width:this.props.box[0],height:this.props.box[1]},onMouseOut:this.onMouseOut,onMouseOver:this.onMouseOver,onClick:this.onClick},e,r.createElement("div",{className:"graphie",ref:"graphieDiv"}))}componentDidMount(){this._setupGraphie(!0)}componentDidUpdate(){this._hasSetupGraphieThisUpdate=!1,this._shouldSetupGraphie&&(this._setupGraphie(!1),this._shouldSetupGraphie=!1)}UNSAFE_componentWillReceiveProps(e){const t=this;a.default.each(["labels","range","step","markings","showProtractor","showRuler","rulerLabel","rulerTicks","gridStep","snapStep"],(function(n){a.default.isEqual(t.props[n],e[n])||(t._shouldSetupGraphie=!0)}))}}m.propTypes={box:o.default.array.isRequired,labels:o.default.arrayOf(o.default.string),range:o.default.arrayOf(o.default.arrayOf(o.default.number)),step:o.default.arrayOf(o.default.number),gridStep:o.default.arrayOf(o.default.number),snapStep:o.default.arrayOf(o.default.number),markings:o.default.string,backgroundImage:o.default.shape({url:o.default.string}),showProtractor:o.default.bool,showRuler:o.default.bool,rulerLabel:o.default.string,rulerTicks:o.default.number,onGraphieUpdated:o.default.func,instructions:o.default.string,onClick:o.default.func,setDrawingAreaAvailable:o.default.func,isMobile:o.default.bool},m.defaultProps={labels:["x","y"],range:[[-10,10],[-10,10]],step:[1,1],gridStep:[1,1],snapStep:[.5,.5],markings:"graph",backgroundImage:{url:null},showProtractor:!1,showRuler:!1,rulerLabel:"",rulerTicks:10,instructions:null,onGraphieUpdated:null,onClick:null,onMouseDown:null,isMobile:!1};var y=m;t.default=y},"k1y+":function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n("pVnL")),o=s(n("TSYQ")),i=x(n("q1tI")),a=s(n("17x9")),l=s(n("i8i4")),u=s(n("5pch")),p=n("reBI"),d=x(n("HEOz")),c=s(n("M++g")),h=s(n("Atlv")),f=s(n("G6Ta")),g=s(n("7xiW")),m=s(n("eMwK")),y=n("j8wP"),v=s(n("7BBF")),b=s(n("p8fL")),w=s(n("uBl0")),k=n("zahm");function M(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(M=function(e){return e?n:t})(e)}function x(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=M(t);if(n&&n.has(e))return n.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(s,o,i):s[o]=e[o]}return s.default=e,n&&n.set(e,s),s}const{assert:P}=b.default,{stringArrayOfSize:C}=w.default,{keypadElementPropType:E}=p.propTypes,O={INPUT_MARGIN:4,INPUT_HEIGHT:38,INPUT_WIDTH:82},_={INPUT_MARGIN:3,INPUT_HEIGHT:30,INPUT_WIDTH:40},T={INPUT_MARGIN:4,INPUT_HEIGHT:36,INPUT_WIDTH:64},S=function(e,t){return[""+e,""+t]},I=function(){return S(0,0)},N=function(e){return P(u.default.isArray(e)&&2===e.length),+e[0]},R=function(e){return P(u.default.isArray(e)&&2===e.length),+e[1]},A=function(e){return"answer"+N(e)+","+R(e)},D=function(e){const t=[1,1];return(0,u.default)(e).each(((e,n)=>{let s=0;(0,u.default)(e).each(((e,t)=>{null!=e&&e.toString().length&&(s=t+1)})),t[1]=Math.max(t[1],s),s>0&&(t[0]=Math.max(t[0],n+1))})),t};class j extends i.Component{constructor(...e){super(...e),this.state={enterTheMatrix:0},this.getInputPaths=()=>{const e=[],t=this.props.matrixBoardSize[0],n=this.props.matrixBoardSize[1];return(0,u.default)(t).times((t=>{(0,u.default)(n).times((n=>{const s=S(t,n);e.push(s)}))})),e},this.getGrammarTypeForPath=e=>"number",this._handleFocus=(e,t)=>{this.props.onFocus(S(e,t))},this._handleBlur=(e,t)=>{this.props.onBlur(S(e,t))},this.focus=()=>(this.focusInputPath(I()),!0),this.focusInputPath=e=>{const t=A(e);this.refs[t].focus()},this.blurInputPath=e=>{0===e.length&&(e=I());const t=A(e);this.refs[t].blur()},this.getDOMNodeForPath=e=>{const t=A(e);return l.default.findDOMNode(this.refs[t])},this.setInputValue=(e,t,n)=>{const s=N(e),r=R(e);this.onValueChange(s,r,t,n)},this.handleKeyDown=(e,t,n)=>{const s=this.props.matrixBoardSize[0],r=this.props.matrixBoardSize[1];let o=null;const i=this.refs[A(S(e,t))],a=i.getStringValue(),l=i.getSelectionStart(),u=i.getSelectionEnd();let p=null;if("ArrowUp"===n.key&&e>0?p=S(e-1,t):"ArrowDown"===n.key&&e+1<s?p=S(e+1,t):"ArrowLeft"===n.key&&t>0?0===l&&0===u&&(p=S(e,t-1)):"ArrowRight"===n.key&&t+1<r?l===a.length&&(p=S(e,t+1)):"Enter"===n.key?o=this.state.enterTheMatrix+1:"Escape"===n.key&&(o=0),p){n.preventDefault();const e=this.refs[A(p)],t=2*e.getStringValue().length;e.focus(),"ArrowRight"===n.key?e.setSelectionRange(0,0):e.setSelectionRange(t,t)}null!=o&&this.setState({enterTheMatrix:o})},this.onValueChange=(e,t,n,s)=>{const r=u.default.map(this.props.answers,u.default.clone);r[e]||(r[e]=[]),r[e][t]=n,this.props.onChange({answers:r},s),this.props.trackInteraction()},this.getUserInput=()=>({answers:this.props.answers}),this.simpleValidate=e=>j.validate(this.getUserInput(),e)}componentDidMount(){this.cursorPosition=[0,0]}render(){let e;e=this.props.apiOptions.customKeypad?T:this.props.apiOptions.staticRender?O:_;const{INPUT_MARGIN:t,INPUT_HEIGHT:n,INPUT_WIDTH:s}=e,a=D(this.props.answers),l=this.props.matrixBoardSize[0],p=this.props.matrixBoardSize[1],d=this.props.cursorPosition[0],y=this.props.cursorPosition[1],v=Math.max(d,a[0]-1),b=Math.max(y,a[1]-1),w=(v+1)*(n+2*t),k=(b+1)*(s+2*t),M=(0,o.default)({"perseus-matrix":!0,"static-mode":this.props.static,"the-matrix":this.state.enterTheMatrix>=5});return i.createElement("div",{className:M},this.props.prefix&&i.createElement("div",{className:"matrix-prefix"},i.createElement(h.default,{content:this.props.prefix,linterContext:this.props.linterContext})),i.createElement("div",{className:"matrix-input"},i.createElement("div",{className:"matrix-bracket bracket-left",style:{height:w}}),i.createElement("div",{className:"matrix-bracket bracket-right",style:{height:w,left:k}}),(0,u.default)(l).times((e=>{const o=this.props.answers[e];return i.createElement("div",{className:"matrix-row",key:e},(0,u.default)(p).times((a=>{const l=e>v||a>b,u={className:l?"outside":"inside",ref:A(S(e,a)),value:o?o[a]:null,style:{height:n,width:s,margin:t},disabled:this.props.apiOptions.readOnly,onFocus:()=>{this.cursorPosition=[e,a],this.props.onChange({cursorPosition:[e,a]},(()=>!1)),this._handleFocus(e,a)},onBlur:()=>{e===this.cursorPosition[0]&&a===this.cursorPosition[1]&&this.props.onChange({cursorPosition:[0,0]},(()=>!1)),this._handleBlur(e,a)},onKeyDown:t=>{this.handleKeyDown(e,a,t)},onChange:(t,n)=>{this.onValueChange(e,a,t,n)}};let p;if(this.props.apiOptions.customKeypad){const e={margin:t,minWidth:s,minHeight:n,boxSizing:"border-box",backgroundColor:l?"#f3f3f3":"#fff"};p=i.createElement(m.default,(0,r.default)({},u,{style:e,scrollable:!0,keypadElement:this.props.keypadElement}))}else p=this.props.apiOptions.staticRender?i.createElement(g.default,u):this.props.numericInput?i.createElement(c.default,u):i.createElement(f.default,u);return i.createElement("span",{key:a,className:"matrix-input-field"},p)})))}))),this.props.suffix&&i.createElement("div",{className:"matrix-suffix"},i.createElement(h.default,{content:this.props.suffix,linterContext:this.props.linterContext})))}}j.propTypes={answers:a.default.arrayOf(a.default.arrayOf(a.default.oneOfType([a.default.string,a.default.number]))),apiOptions:y.ApiOptions.propTypes,cursorPosition:a.default.arrayOf(a.default.number),keypadElement:E,matrixBoardSize:a.default.arrayOf(a.default.number).isRequired,prefix:a.default.string,suffix:a.default.string,trackInteraction:a.default.func.isRequired,linterContext:k.linterContextProps},j.defaultProps={matrixBoardSize:[3,3],answers:[[]],prefix:"",suffix:"",cursorPosition:[0,0],apiOptions:y.ApiOptions.defaults,linterContext:k.linterContextDefault},u.default.extend(j,{validate:function(e,t){const n=t.answers,s=e.answers,r=D(n),o=D(s),i=r[0]!==o[0]||r[1]!==o[1],a=v.default.number.createValidatorFunctional;let l=null,p=!1,c=!1;return(0,u.default)(o[0]).times((e=>{(0,u.default)(o[1]).times((t=>{if(null!=s[e][t]&&0!==s[e][t].toString().length||(p=!0),!i){const r=a(n[e][t],{simplify:!0})(s[e][t]);r.message&&(l=r.message),r.correct||(c=!0)}}))})),p?{type:"invalid",message:d._("Make sure you fill in all cells in the matrix.")}:i?{type:"points",earned:0,total:1,message:null}:{type:"points",earned:c?0:1,total:1,message:l}}});var L={name:"matrix",displayName:"Matrix",widget:j,transform:e=>{const t=(0,u.default)(e.matrixBoardSize[0]).times((function(){return C(e.matrixBoardSize[1])}));return e=u.default.pick(e,"matrixBoardSize","prefix","suffix"),u.default.extend(e,{answers:t})},staticTransform:e=>{const t=u.default.pick(e,"matrixBoardSize","prefix","suffix");return t.answers=u.default.map(e.answers,(e=>u.default.map(e,(e=>null!=e?String(e):"")))),t},isLintable:!0};t.default=L},o0j1:function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n("pVnL")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(s,o,i):s[o]=e[o]}s.default=e,n&&n.set(e,s);return s}(n("q1tI")),i=n("mR6N"),a=s(n("473Y")),l=s(n("h/OD")),u=n("VMUI");function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}class d extends o.PureComponent{constructor(...e){super(...e),this.state={wordRanges:[]},this._handleAddHighlight=e=>{const t=(0,u.addHighlight)(this._getDOMHighlights(),e),n={};for(const e of Object.keys(t))n[e]=(0,u.serializeHighlight)(t[e]);this.props.onSerializedHighlightsUpdate(n)},this._handleRemoveHighlight=e=>{const{serializedHighlights:t}=this.props,n=(0,r.default)({},t);delete n[e],this.props.onSerializedHighlightsUpdate(n)},this._handleWordsUpdate=e=>{this.setState({wordRanges:e})}}_buildHighlight(e){return(0,u.buildHighlight)(this._getDOMHighlights(),this.state.wordRanges,e)}_getDOMHighlights(){const{serializedHighlights:e}=this.props,{wordRanges:t}=this.state,n={};for(const s of Object.keys(e))n[s]=(0,u.deserializeHighlight)(e[s],t);return n}render(){const e=this._getDOMHighlights();return o.createElement("div",{className:(0,i.css)(c.container),ref:e=>this._container=e},o.createElement("div",null,this.props.enabled&&this._container&&this._content&&o.createElement(a.default,{buildHighlight:e=>this._buildHighlight(e),contentNode:this._content,editable:this.props.editable,highlights:e,offsetParent:this._container,zIndexes:{belowContent:0},onAddHighlight:this._handleAddHighlight,onRemoveHighlight:this._handleRemoveHighlight})),o.createElement("div",{className:(0,i.css)(c.content),ref:e=>this._content=e},o.createElement(l.default,{onWordsUpdate:this._handleWordsUpdate},this.props.children)))}}const c=i.StyleSheet.create({container:{position:"relative",zIndex:0},content:{position:"relative",zIndex:1}});var h=d;t.default=h},oBkO:function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(s,o,i):s[o]=e[o]}s.default=e,n&&n.set(e,s);return s}(n("q1tI")),o=s(n("17x9")),i=s(n("fhzG")),a=s(n("i8i4")),l=n("mR6N"),u=s(n("5pch")),p=s(n("96rG")),d=n("yhei"),c=s(n("uBl0")),h=s(n("Atlv")),f=n("j8wP"),g=s(n("Boyy")),m=n("zahm"),y=n("yBUS");function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}const b="horizontal",w="vertical",k="static",M="dragging",x="animating",P="disabled",C=(e,t)=>{const n=e.offsetParent();return{top:t.top+n.scrollTop(),left:t.left+n.scrollLeft()}};class E extends r.Component{render(){const{layout:e}=this.props,t=(0,l.css)(T.card,T.placeholder,e===b&&T.horizontalCard),n={width:this.props.width,height:this.props.height};return null!=this.props.margin&&(n.margin=this.props.margin),r.createElement("li",{className:t,style:n})}}E.propTypes={layout:o.default.oneOf([b,w]),width:o.default.number.isRequired,height:o.default.number.isRequired};class O extends r.Component{constructor(...e){super(...e),this.animationFrameRequest=null,this.state={startPosition:{left:0,top:0},startMouse:{left:0,top:0},mouse:{left:0,top:0}},this.getCurrentPosition=()=>({left:this.state.startPosition.left+this.state.mouse.left-this.state.startMouse.left,top:this.state.startPosition.top+this.state.mouse.top-this.state.startMouse.top}),this.bindMouseMoveUp=()=>{this.isMouseMoveUpBound=!0,(0,p.default)(document).on("mousemove",this.onMouseMove),(0,p.default)(document).on("mouseup",this.onMouseUp)},this.unbindMouseMoveUp=()=>{this.isMouseMoveUpBound=!1,(0,p.default)(document).off("mousemove",this.onMouseMove),(0,p.default)(document).off("mouseup",this.onMouseUp)},this.onMouseDown=e=>{if(this.props.type!==k)return;if(0!==e.button&&(null==e.touches||1!==e.touches.length))return;e.preventDefault();const t=c.default.extractPointerLocation(e);this.animationFrameRequest=requestAnimationFrame((()=>{const e=(0,p.default)(a.default.findDOMNode(this)),n=e.position(),s=C(e,n);t&&this._mounted&&this.setState({startPosition:s,startMouse:t,mouse:t,dragging:!0},(function(){this.bindMouseMoveUp(),this.props.onMouseDown()}))}))},this.onMouseMove=e=>{if(this.props.type!==M||!this.state.dragging)return;e.preventDefault();const t=c.default.extractPointerLocation(e);t&&(this.animationFrameRequest=requestAnimationFrame((()=>{this.setState({mouse:t},this.props.onMouseMove)})))},this.onMouseUp=e=>{if(this.props.type!==M||!this.state.dragging)return;e.preventDefault();c.default.extractPointerLocation(e)&&(this.setState({dragging:!1}),this.unbindMouseMoveUp(),this.props.onMouseUp())}}componentDidMount(){this._mounted=!0,this.isMouseMoveUpBound=!1,document.addEventListener("touchmove",this.onMouseMove,!!c.default.supportsPassiveEvents()&&{passive:!1})}componentWillUnmount(){this._mounted=!1,this.isMouseMoveUpBound&&this.unbindMouseMoveUp(),this.animationFrameRequest&&cancelAnimationFrame(this.animationFrameRequest),document.removeEventListener("touchmove",this.onMouseMove)}render(){const{includePadding:e,layout:t,type:n}=this.props;let s=(0,l.css)(T.card,T.draggable,t===b&&T.horizontalCard,t===w&&T.verticalCard,n===M&&T.dragging,n===P&&T.disabled,!e&&T.unpaddedCard)+" "+f.ClassNames.INTERACTIVE+" perseus-sortable-draggable";e||(s+=" perseus-sortable-draggable-unpadded");const o={position:"static"};return this.props.type!==M&&this.props.type!==x||u.default.extend(o,{position:"absolute"},this.getCurrentPosition()),this.props.width&&(o.width=this.props.width+1),this.props.height&&(o.height=this.props.height),null!=this.props.margin&&(o.margin=this.props.margin),r.createElement("li",{className:s,style:o,onMouseDown:this.onMouseDown,onTouchStart:this.onMouseDown,onTouchMove:this.onMouseMove,onTouchEnd:this.onMouseUp,onTouchCancel:this.onMouseUp},r.createElement(h.default,{content:this.props.content,linterContext:g.default.pushContextStack(this.props.linterContext,"draggable"),onRender:this.props.onRender}))}componentDidUpdate(e){if(this.props.type!==e.type)if(this.props.type===x){const e=this.getCurrentPosition(),t=15*Math.sqrt(Math.sqrt(Math.pow(this.props.endPosition.left-e.left,2)+Math.pow(this.props.endPosition.top-e.top,2)));(0,p.default)(a.default.findDOMNode(this)).animate(this.props.endPosition,{duration:Math.max(t,1),complete:this.props.onAnimationEnd})}else this.props.type===k&&(0,p.default)(a.default.findDOMNode(this)).finish()}}O.propTypes={content:o.default.string.isRequired,endPosition:o.default.object.isRequired,includePadding:o.default.bool,layout:o.default.oneOf([b,w]),onAnimationEnd:o.default.func.isRequired,onMouseDown:o.default.func.isRequired,onMouseMove:o.default.func.isRequired,onMouseUp:o.default.func.isRequired,onRender:o.default.func.isRequired,type:o.default.oneOf([k,M,x,P]),linterContext:m.linterContextProps},O.defaultProps={includePadding:!0,type:k,linterContext:m.linterContextDefault};const _=(0,i.default)({displayName:"Sortable",propTypes:{constraints:o.default.object,disabled:o.default.bool,layout:o.default.oneOf([b,w]),margin:o.default.number,onChange:o.default.func,onMeasure:o.default.func,options:o.default.array.isRequired,padding:o.default.bool,linterContext:m.linterContextProps},getDefaultProps:function(){return{layout:b,padding:!0,disabled:!1,constraints:{},onMeasure:function(){},margin:5,onChange:function(){},linterContext:m.linterContextDefault}},getInitialState:function(){return{items:this.itemsFromProps(this.props),katex:null}},UNSAFE_componentWillReceiveProps:function(e){const t=this.props;u.default.isEqual(e.options,t.options)?e.layout===t.layout&&e.padding===t.padding&&e.disabled===t.disabled&&u.default.isEqual(e.constraints,t.constraints)||this.setState({items:this.clearItemMeasurements(this.state.items)}):this.setState({items:this.itemsFromProps(e)})},componentDidUpdate:function(){!this.state.items.length||this.state.items[0].width||this.state.items[0].height||setTimeout((()=>{this.measureItems()}),0)},componentDidMount:function(){(0,y.getKaTeX)().then((e=>this.setState({katex:e})))},itemsFromProps:function(e){const t=e.disabled?P:k;return u.default.map(e.options,(function(e,n){return{option:e,key:n,type:t,endPosition:{},width:0,height:0}}))},clearItemMeasurements:function(e){return u.default.map(e,(function(e){return u.default.extend(e,{width:0,height:0})}))},measureItems:function(){let e=u.default.clone(this.state.items);const t=u.default.map(e,(function(e){return(0,p.default)(a.default.findDOMNode(this.refs[e.key]))}),this),n=u.default.invoke(t,"outerWidth"),s=u.default.invoke(t,"outerHeight"),r=this.props.constraints,o=this.props.layout;let i,l;r.width?i=u.default.max(n.concat(r.width)):o===w&&(i=u.default.max(n)),r.height?l=u.default.max(s.concat(r.height)):o===b&&(l=u.default.max(s)),e=u.default.map(e,(function(e,t){return e.width=i||n[t],e.height=l||s[t],e})),this.setState({items:e},(()=>{this.props.onMeasure({widths:n,heights:s})}))},remeasureItems:u.default.debounce((function(){this.setState({items:this.clearItemMeasurements(this.state.items)})}),20),render:function(){if(!this.state.katex)return r.createElement(d.CircularSpinner,null);const e=[],{layout:t}=this.props,n=(0,l.css)(T.sortable)+" perseus-sortable",s=this.props.constraints.width||t===w,o=this.props.constraints.height||t===b;return u.default.each(this.state.items,(function(n,i,a){const l=i===a.length-1,u=n.type===k||n.type===P;let p;this.props.layout===b?p="0 "+this.props.margin+"px 0 0":this.props.layout===w&&(p="0 0 "+this.props.margin+"px 0"),e.push(r.createElement(O,{content:n.option,key:n.key,type:n.type,ref:n.key,width:s?n.width:void 0,height:o?n.height:void 0,layout:t,includePadding:this.props.padding,margin:l&&u?0:p,endPosition:n.endPosition,linterContext:g.default.pushContextStack(this.props.linterContext,"sortable"),onRender:this.remeasureItems,onMouseDown:this.onMouseDown.bind(this,n.key),onMouseMove:this.onMouseMove.bind(this,n.key),onMouseUp:this.onMouseUp.bind(this,n.key),onTouchMove:this.onMouseMove.bind(this,n.key),onTouchEnd:this.onMouseUp.bind(this,n.key),onTouchCancel:this.onMouseUp.bind(this,n.key),onAnimationEnd:this.onAnimationEnd.bind(this,n.key)})),n.type!==M&&n.type!==x||e.push(r.createElement(E,{key:"placeholder_"+n.key,ref:"placeholder_"+n.key,width:n.width,height:n.height,layout:t,margin:l?0:p}))}),this),r.createElement("ul",{className:n},e)},onMouseDown:function(e){const t=u.default.map(this.state.items,(function(t){return t.key===e&&(t.type=M),t}));this.setState({items:t})},onMouseMove:function(e){const t=(0,p.default)(a.default.findDOMNode(this.refs[e])),n=(0,p.default)(a.default.findDOMNode(this)),s=u.default.clone(this.state.items),r=u.default.findWhere(this.state.items,{key:e}),o=this.props.margin,i=u.default.indexOf(s,r);let l=0;if(s.splice(i,1),this.props.layout===b){const e=t.offset().left-n.offset().left;let r,i=0;u.default.each(s,(function(t){r=t.width,e>i+r/2&&(l+=1),i+=r+o}))}else{const e=t.offset().top-n.offset().top;let r,i=0;u.default.each(s,(function(t){r=t.height,e>i+r/2&&(l+=1),i+=r+o}))}l!==i&&(s.splice(l,0,r),this.setState({items:s}))},onMouseUp:function(e){this.animationFrameRequest=requestAnimationFrame((()=>{const t=u.default.map(this.state.items,(function(t){if(t.key===e){t.type=x;const n=(0,p.default)(a.default.findDOMNode(this.refs["placeholder_"+e])),s=n.position(),r=C(n,s);t.endPosition=r}return t}),this);this.setState({items:t}),this.props.onChange({})}))},onAnimationEnd:function(e){const t=u.default.map(this.state.items,(function(t){return t.key===e&&(t.type=k),t}));this.setState({items:t})},getOptions:function(){return u.default.pluck(this.state.items,"option")}}),T=l.StyleSheet.create({sortable:{boxSizing:"border-box",float:"left",padding:0,margin:0},card:{boxSizing:"border-box",background:"#fff",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",minWidth:25,minHeight:44,padding:10,listStyleType:"none",userSelect:"none",touchAction:"none"},placeholder:{background:"#ddd",border:"1px solid #ccc"},draggable:{textAlign:"center"},horizontalCard:{float:"left",cursor:"ew-resize"},verticalCard:{maxWidth:"100%",cursor:"ns-resize"},unpaddedCard:{padding:0},dragging:{background:"#ffedcd",opacity:.8},disabled:{backgroundColor:"inherit",border:"1px solid transparent",cursor:"default"}});var S=_;t.default=S},oaDE:function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n("mR6N"),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(s,o,i):s[o]=e[o]}s.default=e,n&&n.set(e,s);return s}(n("q1tI")),i=n("6OHE"),a=s(n("6wxr")),l=n("/4Qb");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}class p extends o.Component{constructor(...e){super(...e),this.state={isFocused:!1}}handleFocus(){this.setState({isFocused:!0})}handleBlur(){this.setState({isFocused:!1})}renderIcon(){const{selected:e,showCorrectness:t,showSelected:n,showPulsate:s}=this.props,{isFocused:u}=this.state,p=n||u;let d,c;return t?(d=o.createElement(a.default,{icon:"correct"===t?l.iconCheck:l.iconMinus,size:24,color:i.colors.white}),c="correct"===t?[f.markerCorrect,p&&f.markerCorrectSelected]:[f.markerIncorrect,p&&f.markerIncorrectSelected]):c=e&&e.length>0?[f.markerFilled,p&&f.markerFilledSelected]:[p?f.markerUnfilledSelected:s&&f.markerUnfilledPulsate],o.createElement("div",{className:r.css.apply(void 0,[f.markerIcon].concat(c)),ref:e=>this._icon=e},d)}render(){const{label:e,x:t,y:n,showCorrectness:s}=this.props,i="correct"===s;return o.createElement("button",{"aria-label":e,className:(0,r.css)(f.unstyledButton,f.marker,i&&f.disabled),style:{left:`${t}%`,top:`${n}%`},tabIndex:i?-1:0,onFocus:()=>this.handleFocus(),onBlur:()=>this.handleBlur(),onClick:e=>this.props.onClick(e),onKeyDown:e=>this.props.onKeyDown(e)},this.renderIcon())}}t.default=p,p.defaultProps={selected:[]};const d="#2552b0",c=d,h="rgba(33, 36, 44, 0.16)",f=r.StyleSheet.create({unstyledButton:{padding:0,overflow:"visible",color:"inherit",font:"inherit",lineHeight:"normal",background:"none",border:"none"},marker:{position:"absolute",width:30,height:30,marginLeft:-15,marginTop:-15},disabled:{pointerEvents:"none"},markerIcon:{display:"flex",position:"relative",boxSizing:"content-box",width:16,height:16,marginLeft:5,cursor:"pointer",backgroundColor:"#1865f2",border:"solid 2px #ffffff",borderRadius:16,boxShadow:"0 2px 6px 0 rgba(33, 36, 44, 0.32)"},markerUnfilledPulsate:{animationName:{"0%":{transform:"scale(1)"},"100%":{transform:"scale(1.5)"}},animationDirection:"alternate",animationDuration:"0.8s",animationIterationCount:"infinite",animationTimingFunction:"ease-in",transformOrigin:"50% 50%"},markerUnfilledSelected:{"::before":{content:"''",display:"inline-block",position:"absolute",width:20,height:20,marginLeft:-4,marginTop:-4,border:"solid 2px #2552b0",borderRadius:20},":active":{backgroundColor:c,boxShadow:"none","::before":{display:"none"}}},markerFilled:{width:8,height:8,marginLeft:9,borderRadius:8,boxShadow:`0 1px 1px 0 ${h}`},markerFilledSelected:{"::before":{content:"''",display:"inline-block",position:"absolute",width:12,height:12,marginLeft:-4,marginTop:-4,border:"solid 2px #2552b0",borderRadius:12},":active":{backgroundColor:c,boxShadow:"none","::before":{display:"none"}}},markerCorrect:{width:24,height:24,marginLeft:1,marginTop:1,justifyContent:"center",alignItems:"center",background:"#00a60e",boxShadow:`0 1px 1px 0 ${h}`},markerCorrectSelected:{"::before":{content:"''",display:"inline-block",position:"absolute",width:28,height:28,border:"solid 2px #2552b0",borderRadius:28},":active":{backgroundColor:"#167b1f",boxShadow:"none","::before":{display:"none"}}},markerIncorrect:{width:24,height:24,marginLeft:1,marginTop:1,justifyContent:"center",alignItems:"center",background:"#909195",boxShadow:`0 1px 1px 0 ${h}`},markerIncorrectSelected:{"::before":{content:"''",display:"inline-block",position:"absolute",width:28,height:28,border:"solid 2px #2552b0",borderRadius:28},":active":{backgroundColor:"#6c6e73",boxShadow:"none","::before":{display:"none"}}}})},qRYE:function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n("pVnL")),o=M(n("q1tI")),i=s(n("17x9")),a=s(n("i8i4")),l=s(n("5pch")),u=n("eAf/"),p=M(n("+jAD")),d=s(n("M++g")),c=s(n("7xiW")),h=s(n("eMwK")),f=n("j8wP"),g=n("reBI"),m=s(n("Giaf")),y=s(n("XwLL")),v=s(n("yfnS")),b=M(n("HEOz")),w=s(n("p8fL"));function k(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(k=function(e){return e?n:t})(e)}function M(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=k(t);if(n&&n.has(e))return n.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(s,o,i):s[o]=e[o]}return s.default=e,n&&n.set(e,s),s}const x=m.default.MovablePoint,P=m.default.Line,{assert:C}=w.default,E={ge:"le",gt:"lt",le:"ge",lt:"gt"},O={ge:"gt",gt:"ge",le:"lt",lt:"le"};function _(e,t){return 1===t?""+e:`\\dfrac{${e}}{${t}}`}function T(e,t){if(e<0)return"-"+T(-e,t);const n=Math.floor(e/t);return 0===n?_(e,t):e-n*t==0?""+n:n+_(e-n*t,t)}const S=(e,t,n,s,r)=>{if(s=s||n,"decimal"===t||"decimal ticks"===t)return e.label([n,-.53],Math.round(100*s)/100,"center");if("improper"===t){const t=y.default.toFraction(s);return e.label([n,-.17],_(t[0],t[1]),"below")}if("mixed"===t){const t=y.default.toFraction(s);return e.label([n,-.17],T(t[0],t[1]),"below")}if("non-reduced"===t){const t=y.default.toFraction(s);return e.label([n,-.17],function(e,t,n){return _(e*Math.floor(n/t),n)}(t[0],t[1],r),"below")}},I=m.default.createSimpleClass(((e,t)=>{if(!l.default.isFinite(t.tickStep)||t.tickStep<=0)return[];const n=[],s=t.range,r=t.labelRange,o=null==r[0]?s[0]:r[0],i=null==r[1]?s[1]:r[1];let a;if("non-reduced"===t.labelStyle){const e=[o,i];for(let n=0;n<=t.numDivisions;n++){const r=s[0]+n*t.tickStep;e.push(r)}const n=e=>u.number.toFraction(e)[1],r=l.default.map(e,n);a=l.default.reduce(r,((e,t)=>y.default.getLCM(e,t)))}else a=void 0;for(let r=0;r<=t.numDivisions;r++){const o=s[0]+r*t.tickStep;n.push(e.line([o,-.2],[o,.2]));(t.labelTicks||"decimal ticks"===t.labelStyle)&&n.push(S(e,t.labelStyle,o,o,a))}return n.push(e.style(t.isMobile?{color:v.default.BLUE_D}:{},(()=>S(e,t.labelStyle,o,o,a)))),n.push(e.style(t.isMobile?{color:v.default.BLUE_D}:{},(()=>S(e,t.labelStyle,i,i,a)))),e.style({stroke:t.isMobile?v.default.BLUE_D:v.default.DYNAMIC,strokeWidth:3.5},(()=>{n.push(e.line([o,-.2],[o,.2])),n.push(e.line([i,-.2],[i,.2]))})),n}));class N extends o.Component{constructor(...e){super(...e),this.state={numDivisionsEmpty:!1},this.change=(...e)=>p.change.apply(this,e),this.isValid=()=>{const e=this.props.range;let t=this.props.numLinePosition;const n=this.props.divisionRange;return t=null==t?e[0]:t,e[0]<e[1]&&u.number.sign(t-e[0])>=0&&u.number.sign(t-e[1])<=0&&n[0]<n[1]&&0<this.props.numDivisions&&0<this.props.snapDivisions},this.onNumDivisionsChange=(e,t)=>{const n=this.props.divisionRange.slice(),s=this.props.range[1]-this.props.range[0];if(e=(e=Math.round(e))<0?-1*e:e){const r=l.default.extend({},this.props,{tickStep:s/e}),o=this.snapNumLinePosition(r,this.props.numLinePosition);this.setState({numDivisionsEmpty:!1},(()=>{this.props.onChange({divisionRange:n,numDivisions:e,numLinePosition:o},t)}))}else this.setState({numDivisionsEmpty:!0},t)},this._handleTickCtrlFocus=()=>{this.props.onFocus(["tick-ctrl"])},this._handleTickCtrlBlur=()=>{this.props.onBlur(["tick-ctrl"])},this.focus=()=>{if(this.props.isTickCtrl)return this.refs["tick-ctrl"].focus(),!0},this.focusInputPath=e=>{1===e.length&&this.refs[e[0]].focus()},this.blurInputPath=e=>{1===e.length&&this.refs[e[0]].blur()},this.getInputPaths=()=>this.props.isTickCtrl?[["tick-ctrl"]]:[],this.getDOMNodeForPath=e=>{if(1===e.length)return a.default.findDOMNode(this.refs[e[0]])},this.getGrammarTypeForPath=e=>{if(1===e.length&&"tick-ctrl"===e[0])return"number"},this.setInputValue=(e,t,n)=>{1===e.length&&"tick-ctrl"===e[0]&&this.onNumDivisionsChange(t,n)},this._renderGraphie=()=>{const e=this.props.range,t=e[1]-e[0],n=l.default.pick(this.props,["range","isTickCtrl"]),s=l.default.extend({},this.props,{tickStep:t/this.props.numDivisions});return o.createElement(m.default,{ref:"graphie",key:this.props.labelStyle,box:[this.props.apiOptions.isMobile?288:460,80],options:n,onMouseDown:e=>{this.refs.graphie.movables.numberLinePoint.grab(e)},setup:this._setupGraphie,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable,isMobile:this.props.apiOptions.isMobile},o.createElement(I,(0,r.default)({},l.default.pick(s,["range","numDivisions","labelTicks","labelStyle","labelRange","tickStep"]),{isMobile:this.props.apiOptions.isMobile})),this._renderInequality(s),this._renderNumberLinePoint(s))},this.snapNumLinePosition=(e,t)=>{const n=e.range[0],s=e.range[1],r=e.tickStep/e.snapDivisions;let o=((e,t,n)=>Math.min(Math.max(e,t),n))(t,n,s);return o=n+u.number.roundTo(o-n,r),C(l.default.isFinite(o)),o},this._renderNumberLinePoint=e=>{const t=(0,l.default)(["lt","gt"]).contains(e.rel);let n;n=t?v.default._BACKGROUND:e.static?v.default.DYNAMIC:v.default.INTERACTIVE;const s={fill:n,stroke:e.static?v.default.DYNAMIC:v.default.INTERACTIVE,"stroke-width":t?3:1},r={fill:t?v.default._BACKGROUND:v.default.INTERACTING,"stroke-width":t?3:1},i=e.isInequality?{stroke:v.default.INTERACTIVE,"fill-opacity":t?0:1}:{};return o.createElement(x,{ref:"numberLinePoint",pointSize:6,coord:[e.numLinePosition,0],constraints:[(e,t)=>[e[0],t[1]],(t,n)=>[this.snapNumLinePosition(e,t[0]),t[1]]],normalStyle:s,highlightStyle:r,onMove:e=>{this.change({numLinePosition:e[0]}),this.props.trackInteraction()},isMobile:this.props.apiOptions.isMobile,mobileStyleOverride:i,showTooltips:this.props.showTooltips,xOnlyTooltip:!0})},this.handleReverse=()=>{const e=E[this.props.rel];this.props.onChange({rel:e})},this.handleToggleStrict=()=>{const e=O[this.props.rel];this.props.onChange({rel:e})},this._getInequalityEndpoint=e=>{const t=(0,l.default)(["ge","gt"]).contains(e.rel),n=e.range,s=30*((n[1]-n[0])/400),r=n[0]-s,o=n[1]+s;return t?[o,0]:[r,0]},this._renderInequality=e=>{if(e.isInequality){const t=this._getInequalityEndpoint(e),n={arrows:"->",stroke:this.props.apiOptions.isMobile?v.default.INTERACTIVE:v.default.DYNAMIC,strokeWidth:3.5},s=["ge","gt"].includes(e.rel);return o.createElement(P,{start:[(s?.4:-.4)+e.numLinePosition,0],end:t,style:n})}return null},this._setupGraphie=(e,t)=>{if(!this.isValid())return;const n=this.props.apiOptions.isMobile?228:400,s=t.range,r=(s[1]-s[0])/n,o=30*r,i=s[0]-o,a=s[1]+o,l="improper"===this.props.labelStyle||"mixed"===this.props.labelStyle||"non-reduced"===this.props.labelStyle?-1.5:-1;e.init({range:[[i,a],[l,1]],scale:[1/r,40],isMobile:this.props.apiOptions.isMobile});const u=(s[0]+s[1])/2;e.line([u,0],[a,0],{arrows:"->"}),e.line([u,0],[i,0],{arrows:"->"})},this.getUserInput=()=>({numLinePosition:this.props.numLinePosition,rel:this.props.isInequality?this.props.rel:"eq",numDivisions:this.props.numDivisions,divisionRange:this.props.divisionRange}),this.simpleValidate=e=>N.validate(this.getUserInput(),e)}render(){const e=this.props.divisionRange,t=e[0]+"–"+e[1],n=this.props.numDivisions<e[0]||this.props.numDivisions>e[1],s=o.createElement("div",null,o.createElement("input",{type:"button",className:"simple-button",value:b._("Switch direction"),onClick:this.handleReverse}),o.createElement("input",{type:"button",className:"simple-button",value:(0,l.default)(["le","ge"]).contains(this.props.rel)?b._("Make circle open"):b._("Make circle filled"),onClick:this.handleToggleStrict}));let r;if(this.props.isTickCtrl){let t;t=this.props.apiOptions.customKeypad?h.default:this.props.apiOptions.staticRender?c.default:d.default,r=o.createElement("label",null,b._("Number of divisions:")," ",o.createElement(t,{ref:"tick-ctrl",value:this.state.numDivisionsEmpty?null:this.props.numDivisions||e[0],checkValidity:t=>t>=e[0]&&t<=e[1],onChange:this.onNumDivisionsChange,onFocus:this._handleTickCtrlFocus,onBlur:this._handleTickCtrlBlur,useArrowKeys:!0,keypadElement:this.props.keypadElement}))}return o.createElement("div",{className:"perseus-widget perseus-widget-interactive-number-line"},r,this.isValid()?this.props.isTickCtrl&&n?o.createElement("div",{className:"perseus-error"},b.$_("Please make sure the number of divisions is in the range %(divRangeString)s.",{divRangeString:t})):this._renderGraphie():o.createElement("div",{className:"perseus-error"},b.doNotTranslate("Invalid number line configuration.")),!this.props.static&&this.props.isInequality&&s)}}N.propTypes=(0,r.default)({},p.propTypes,{range:i.default.arrayOf(i.default.number).isRequired,labelRange:i.default.arrayOf(i.default.number).isRequired,labelStyle:i.default.string.isRequired,labelTicks:i.default.bool.isRequired,divisionRange:i.default.arrayOf(i.default.number).isRequired,numDivisions:i.default.number.isRequired,snapDivisions:i.default.number.isRequired,isTickCtrl:i.default.bool.isRequired,isInequality:i.default.bool.isRequired,numLinePosition:i.default.number.isRequired,rel:i.default.oneOf(["lt","gt","le","ge"]),onFocus:i.default.func.isRequired,onBlur:i.default.func.isRequired,onChange:i.default.func.isRequired,apiOptions:f.ApiOptions.propTypes,keypadElement:g.propTypes,static:i.default.bool,showTooltips:i.default.bool,trackInteraction:i.default.func.isRequired}),N.defaultProps={range:[0,10],labelStyle:"decimal",labelRange:[null,null],divisionRange:[1,12],labelTicks:!0,isTickCtrl:!1,isInequality:!1,numLinePosition:0,snapDivisions:2,showTooltips:!1,rel:"ge",apiOptions:f.ApiOptions.defaults},l.default.extend(N,{validate:function(e,t){const n=t.range,s=e.divisionRange,r=null!=t.initialX?t.initialX:n[0],o=t.isInequality?"ge":"eq",i=t.correctRel||"eq",a=u.number.equal(e.numLinePosition,t.correctX||0),l=e.numDivisions>s[1]||e.numDivisions<s[0];return e.isTickCrtl&&l?{type:"invalid",message:"Number of divisions is outside the allowed range."}:a&&i===e.rel?{type:"points",earned:1,total:1,message:null}:e.numLinePosition===r&&e.rel===o?{type:"invalid",message:null}:{type:"points",earned:0,total:1,message:null}}});var R={name:"number-line",displayName:"Number line",widget:N,transform:e=>{const t=l.default.pick(e,["range","labelRange","labelStyle","labelTicks","divisionRange","snapDivisions","isTickCtrl","isInequality","showTooltips"]),n=null!=e.initialX?e.initialX:e.range[0],s=e.range[1]-e.range[0];let r;return r=null!=e.numDivisions?e.numDivisions:null!=e.tickStep?s/e.tickStep:void 0,l.default.extend(t,{numLinePosition:n,numDivisions:r,snapDivisions:t.snapDivisions||void 0}),t},staticTransform:e=>{const t=l.default.pick(e,["range","labelRange","labelStyle","labelTicks","divisionRange","snapDivisions","isInequality"]),n=null!=e.correctX?e.correctX:e.range[0],s=e.range[1]-e.range[0];let r;return r=null!=e.numDivisions?e.numDivisions:null!=e.tickStep?s/e.tickStep:void 0,l.default.extend(t,{numLinePosition:n,numDivisions:r,rel:e.isInequality?e.correctRel:null,snapDivisions:t.snapDivisions||void 0}),t}};t.default=R},qoj5:function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=r?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(s,o,a):s[o]=e[o]}s.default=e,n&&n.set(e,s);return s}(n("q1tI")),o=s(n("aeDP"));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}class a extends r.Component{constructor(...e){super(...e),this.state={didMount:!1}}componentDidMount(){this.setState({didMount:!0})}render(){return this.state.didMount?r.createElement(o.default,this.props):r.createElement("div",null)}}var l=a;t.default=l},vUnj:function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n("mR6N"),o=h(n("q1tI")),i=s(n("5pch")),a=h(n("+jAD")),l=s(n("Atlv")),u=s(n("TBZ3")),p=h(n("UcaO")),d=n("zahm");function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function h(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(s,o,i):s[o]=e[o]}return s.default=e,n&&n.set(e,s),s}class f extends o.Component{constructor(...e){super(...e),this.state={expanded:!1},this.change=(...e)=>a.change.apply(this,e),this._onClick=()=>{this.setState({expanded:!this.state.expanded}),this.props.trackInteraction()},this.getUserInput=()=>({}),this.simpleValidate=e=>f.validate(this.getUserInput(),e)}static validate(e,t){return{type:"points",earned:0,total:0,message:null}}render(){const{Link:e}=this.props.apiOptions.baseElements,{isArticle:t,isMobile:n}=this.props.apiOptions,s=this.state.expanded?this.props.hidePrompt:this.props.showPrompt;let i;const a="javascript:void(0)",u=this._onClick;i=n?o.createElement("div",{className:(0,r.css)(v.linkContainer)},o.createElement("a",{className:(0,r.css)(v.mobileExplanationLink),href:a,onClick:u,role:"button","aria-expanded":this.state.expanded},s),this.state.expanded&&o.createElement("svg",{className:(0,r.css)(v.disclosureArrow)},o.createElement("polygon",{style:{fill:y},points:`0,${m} ${g},${m} `+g/2+",0"}))):t?o.createElement("div",{className:(0,r.css)(v.linkContainer,v.articleLink)},o.createElement(e,{className:(0,r.css)(v.explanationLink),style:v.explanationLink,href:a,onClick:u,role:"button","aria-expanded":this.state.expanded},`[${s}]`)):o.createElement("div",{className:(0,r.css)(v.linkContainer,v.exerciseLink)},o.createElement(e,{className:(0,r.css)(v.explanationLink),href:a,onClick:u,role:"button","aria-expanded":this.state.expanded},`[${s}]`));const p=n?v.contentExpandedMobile:v.contentExpanded;return o.createElement("div",{className:(0,r.css)(v.container)},i,this.state.expanded&&o.createElement("div",{className:(0,r.css)(v.content,n&&v.contentMobile,this.state.expanded&&p),ref:"content"},o.createElement(l.default,{apiOptions:this.props.apiOptions,content:this.props.explanation,widgets:this.props.widgets,linterContext:this.props.linterContext})))}}f.defaultProps={showPrompt:"Explain",hidePrompt:"Hide explanation",explanation:"explanation goes here\n\nmore explanation",widgets:{},linterContext:d.linterContextDefault};const g=30,m=14,y=p.gray95,v=r.StyleSheet.create({container:{display:"inline",position:"relative"},linkContainer:{display:"inline-block"},explanationLink:{fontStyle:"italic",color:"#007d96"},articleLink:{fontSize:20,lineHeight:"30px"},exerciseLink:{fontSize:14,lineHeight:"19.6px"},mobileExplanationLink:{color:p.kaGreen,borderBottom:`dashed 1px ${p.kaGreen}`,textDecoration:"none",[u.default.xl]:{fontSize:22,lineHeight:1.4},[u.default.lgOrSmaller]:{fontSize:20,lineHeight:1.5},[u.default.smOrSmaller]:{fontSize:18,lineHeight:1.2}},content:{position:"relative",transition:"margin-top 0.1s"},contentExpanded:{borderLeft:"5px solid #ccc",marginLeft:-23,paddingLeft:23,paddingBottom:10,marginBottom:m,marginTop:m},contentExpandedMobile:{boxSizing:"content-box",paddingTop:32,paddingBottom:32,marginTop:m},contentMobile:{background:y,marginLeft:p.negativePhoneMargin,marginRight:p.negativePhoneMargin,paddingLeft:p.phoneMargin,paddingRight:p.phoneMargin},disclosureArrow:{bottom:-(m+5),height:m,left:"50%",marginLeft:-g/2,position:"absolute",width:g}});var b={name:"explanation",displayName:"Explanation",accessible:!0,defaultAlignment:"inline",widget:f,transform:i.default.identity,isLintable:!0};t.default=b},w4kA:function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(s,o,i):s[o]=e[o]}s.default=e,n&&n.set(e,s);return s}(n("q1tI")),o=s(n("17x9")),i=s(n("fhzG")),a=s(n("i8i4")),l=s(n("5pch")),u=s(n("96rG")),p=n("j8wP"),d=s(n("NT9k")),c=s(n("yPu2"));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}const f={url:null,top:0,left:0},g=(0,i.default)({displayName:"Measurer",propTypes:{apiOptions:p.ApiOptions.propTypes,box:o.default.arrayOf(o.default.number),image:o.default.shape({url:o.default.string,top:o.default.number,left:o.default.number}),showProtractor:o.default.bool,protractorX:o.default.number,protractorY:o.default.number,showRuler:o.default.bool,rulerLabel:o.default.string,rulerTicks:o.default.number,rulerPixels:o.default.number,rulerLength:o.default.number},getDefaultProps:function(){return{box:[480,480],image:{},showProtractor:!0,protractorX:7.5,protractorY:.5,showRuler:!1,rulerLabel:"",rulerTicks:10,rulerPixels:40,rulerLength:10}},getInitialState:function(){return{}},render:function(){const e=l.default.extend({},f,this.props.image);return r.createElement("div",{className:"perseus-widget perseus-widget-measurer graphie-container above-scratchpad",style:{width:this.props.box[0],height:this.props.box[1]}},e.url&&r.createElement("div",{style:{position:"relative",top:e.top,left:e.left}},r.createElement(c.default,{src:e.url})),r.createElement("div",{className:"graphie",ref:"graphieDiv"}))},componentDidMount:function(){this.setupGraphie()},componentDidUpdate:function(e){l.default.any(["box","showProtractor","showRuler","rulerLabel","rulerTicks","rulerPixels","rulerLength"],(function(t){return e[t]!==this.props[t]}),this)&&this.setupGraphie()},setupGraphie:function(){const e=a.default.findDOMNode(this.refs.graphieDiv);(0,u.default)(e).empty();const t=this.graphie=d.default.createGraphie(e),n=[40,40],s=[[0,this.props.box[0]/n[0]],[0,this.props.box[1]/n[1]]];t.init({range:s,scale:n}),t.addMouseLayer({allowScratchpad:!0,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable}),this.protractor&&this.protractor.remove(),this.props.showProtractor&&(this.protractor=t.protractor([this.props.protractorX,this.props.protractorY])),this.ruler&&this.ruler.remove(),this.props.showRuler&&(this.ruler=t.ruler({center:[(s[0][0]+s[0][1])/2,(s[1][0]+s[1][1])/2],label:this.props.rulerLabel,pixelsPerUnit:this.props.rulerPixels,ticksPerUnit:this.props.rulerTicks,units:this.props.rulerLength}))},getUserInput:function(){return{}},simpleValidate:function(e){return g.validate(this.getUserInput(),e)},focus:u.default.noop});l.default.extend(g,{validate:function(e,t){return{type:"points",earned:1,total:1,message:null}}});var m={name:"measurer",displayName:"Measurer",widget:g,version:{major:1,minor:0},propUpgrades:{1:e=>(0,l.default)(e).chain().omit("imageUrl","imageTop","imageLeft").extend({image:{url:e.imageUrl,top:e.imageTop,left:e.imageLeft}}).value()}};t.default=m},y1hP:function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n("TSYQ")),o=n("mR6N"),i=f(n("q1tI")),a=(s(n("5pch")),n("UcaO")),l=f(n("+jAD")),u=s(n("TBZ3")),p=s(n("Atlv")),d=s(n("yPu2")),c=n("zahm");function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function f(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(s,o,i):s[o]=e[o]}return s.default=e,n&&n.set(e,s),s}const g=[0,10],m="block";class y extends i.Component{constructor(...e){super(...e),this.change=(...e)=>l.change.apply(this,e),this.getUserInput=()=>null,this.simpleValidate=e=>y.validate(this.getUserInput(),e),this.focus=()=>{}}render(){let e,t;const{apiOptions:n}=this.props,s=this.props.backgroundImage;if(s.url&&(e=i.createElement(d.default,{src:s.url,alt:this.props.alt,overrideAriaHidden:!0,width:s.width,height:s.height,preloader:n.imagePreloader,extraGraphie:{box:this.props.box,range:this.props.range,labels:this.props.labels},trackInteraction:this.props.trackInteraction,zoomToFullSizeOnMobile:n.isMobile,constrainHeight:n.isMobile,allowFullBleed:n.isMobile})),this.props.alt&&(t=i.createElement("span",{className:"perseus-sr-only"},i.createElement(p.default,{content:this.props.alt,apiOptions:n,linterContext:this.props.linterContext}))),n.isMobile){let s;if(this.props.title||this.props.caption){let e=this.props.title;e&&(this.props.caption&&!/[.?!"']\s*$/.test(e)&&(e+="."),e=`**${e}** `);const t=(0,r.default)({"perseus-image-caption":!0,"has-title":!!e}),a=this.props.alignment,l="block"===a||"full-width"===a?null:"0 !important";s=i.createElement("div",{className:t},i.createElement("div",{className:(0,o.css)(v.caption),style:{minWidth:l}},i.createElement(p.default,{content:e+this.props.caption,apiOptions:n,linterContext:this.props.linterContext})))}return i.createElement("div",{className:"perseus-image-widget"},e,t,s)}let a,l;return this.props.title&&(a=i.createElement("div",{className:"perseus-image-title"},i.createElement(p.default,{content:this.props.title,apiOptions:n,linterContext:this.props.linterContext}))),this.props.caption&&(l=i.createElement("div",{className:"perseus-image-caption"},i.createElement(p.default,{content:this.props.caption,apiOptions:n,linterContext:this.props.linterContext}))),i.createElement("div",{className:"perseus-image-widget"},a,e,t,l)}static validate(e,t){return{type:"points",earned:0,total:0,message:null}}}y.defaultProps={alignment:m,title:"",range:[g,g],box:[400,400],backgroundImage:{url:null,width:0,height:0},labels:[],alt:"",caption:"",linterContext:c.linterContextDefault};const v=o.StyleSheet.create({caption:{display:"inline-block",marginTop:a.baseUnitPx,maxWidth:640,[u.default.lgOrSmaller]:{maxWidth:540},[u.default.smOrSmaller]:{maxWidth:450}}});var b={name:"image",accessible:e=>{const t=e.backgroundImage;return!(t&&t.url&&!e.alt)},defaultAlignment:m,supportedAlignments:["block","full-width"],displayName:"Image",widget:y,isLintable:!0};t.default=b},ydm1:function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(s,o,i):s[o]=e[o]}s.default=e,n&&n.set(e,s);return s}(n("q1tI")),o=n("mR6N"),i=s(n("ZWnV"));function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}class l extends r.Component{componentWillUnmount(){this.container=null}focus(){if(this.container)return this.container.focus(),!0}toggleSelect(e){const t=this.props.value;this.props.allowEmpty?this.props.onChange(t!==e?e:null):this.props.onChange(e)}render(){const e=this.props.value,t=this.props.buttons.map(((t,n)=>r.createElement("button",{title:t.title,type:"button",id:""+n,ref:"button"+n,key:""+n,className:(0,o.css)(i.default.button.buttonStyle,t.value===e&&i.default.button.selectedStyle),onClick:()=>this.toggleSelect(t.value)},t.content||""+t.value)));return r.createElement("div",{style:{display:"inline-block"},ref:e=>this.container=e},t)}}l.defaultProps={value:null,allowEmpty:!0};var u=l;t.default=u},zyiX:function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n("pVnL")),o=f(n("q1tI")),i=s(n("17x9")),a=s(n("5pch")),l=s(n("96rG")),u=s(n("8Kom")),p=f(n("+jAD")),d=s(n("fUCW")),c=s(n("uBl0"));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function f(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(s,o,i):s[o]=e[o]}return s.default=e,n&&n.set(e,s),s}const{updateQueryString:g}=c.default;class m extends o.Component{constructor(...e){super(...e),this.getUserInput=()=>d.default.getUserInput.call(this),this.handleMessageEvent=e=>{let t={};try{t=JSON.parse(e.originalEvent.data)}catch(e){return}if(a.default.isUndefined(t.testsPassed))return;const n=t.testsPassed?"correct":"incorrect";this.change({status:n,message:t.message})},this.change=(...e)=>p.change.apply(this,e),this.simpleValidate=e=>m.validate(this.getUserInput(),e)}componentDidMount(){(0,l.default)(window).on("message",this.handleMessageEvent)}componentWillUnmount(){(0,l.default)(window).off("message",this.handleMessageEvent)}render(){const e={width:String(this.props.width),height:String(this.props.height)};Object.entries(e).forEach((([t,n])=>{n.endsWith("%")||n.endsWith("px")||(e[t]=n+"px")}));let t=this.props.url;if(t&&t.length&&0!==t.indexOf("http")&&(t="https://www.khanacademy.org/computer-programming/program/"+t+"/embedded?buttons=no&embed=yes&editor=no&author=no",t=g(t,"width",this.props.width),t=g(t,"height",this.props.height),t=g(t,"origin",u.default.origin)),this.props.settings){const e={};a.default.each(this.props.settings,(function(t){t.name&&t.value&&(e[t.name]=t.value)})),t=g(t,"settings",JSON.stringify(e))}let n="allow-same-origin allow-scripts";return n+=" allow-top-navigation",o.createElement("iframe",{sandbox:"allow-same-origin allow-scripts allow-top-navigation",style:e,src:t,allowFullScreen:this.props.allowFullScreen})}}m.propTypes=(0,r.default)({},p.propTypes,{width:i.default.oneOfType([i.default.string,i.default.number]),height:i.default.oneOfType([i.default.string,i.default.number]),url:i.default.string,settings:i.default.array,status:i.default.oneOf(["incomplete","incorrect","correct"]),message:i.default.string,allowFullScreen:i.default.bool,allowTopNavigation:i.default.bool}),m.defaultProps={status:"incomplete",message:null,allowFullScreen:!1,allowTopNavigation:!1},a.default.extend(m,{validate:function(e,t){return"correct"===e.status?{type:"points",earned:1,total:1,message:e.message||null}:"incorrect"===e.status?{type:"points",earned:0,total:1,message:e.message||null}:{type:"invalid",message:"Keep going, you're not there yet!"}}});var y={name:"iframe",displayName:"Iframe",widget:m,hidden:!0};t.default=y}}]);
//# sourceMappingURL=../../sourcemaps/en/1Peh.44fd46b185acbc7d6ad0.js.map