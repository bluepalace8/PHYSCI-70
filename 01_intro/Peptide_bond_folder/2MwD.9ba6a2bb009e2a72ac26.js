(window.webpackJsonp=window.webpackJsonp||[]).push([["2MwD"],{"08lt":function(e,t,r){"use strict";var o=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ServerItemRenderer=void 0;var s=o(r("pVnL")),n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=m(t);if(r&&r.has(e))return r.get(e);var o={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var i=s?Object.getOwnPropertyDescriptor(e,n):null;i&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n]}o.default=e,r&&r.set(e,o);return o}(r("q1tI")),i=o(r("5pch")),a=r("mR6N"),l=r("j8wP"),u=o(r("YH1v")),c=o(r("Atlv")),p=o(r("uBl0")),d=o(r("vNny")),h=o(r("9cGa")),f=o(r("KGvg"));function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(m=function(e){return e?r:t})(e)}const{mapObject:g}=d.default;class y extends n.Component{constructor(e){super(e),this._handleFocusChange=(e,t)=>{null!=e?this._setCurrentFocus(e):this._onRendererBlur(t)},this.handleInteractWithWidget=e=>{const t=i.default.difference(this.state.questionHighlightedWidgets,[e]);this.setState({questionCompleted:!1,questionHighlightedWidgets:t}),this.props.apiOptions.interactionCallback&&this.props.apiOptions.interactionCallback()},this.setAssetStatus=(e,t)=>{const r=(0,s.default)({},this.state.assetStatuses,{[e]:t});this.setState({assetStatuses:r})},this.state={questionCompleted:!1,questionHighlightedWidgets:[],assetStatuses:{}},this._fullyRendered=!1}componentDidMount(){this._currentFocus=null,this._fullyRendered=!1}UNSAFE_componentWillReceiveProps(e){this.setState({questionHighlightedWidgets:[]})}componentDidUpdate(e,t){if(this.props.apiOptions.answerableCallback){const e=0===this.questionRenderer.emptyWidgets().length,{answerableCallback:t}=this.props.apiOptions;t&&t(e)}if(!this._fullyRendered){Object.values(this.state.assetStatuses).every(Boolean)&&(this._fullyRendered=!0,this.props.onRendered(!0))}}componentWillUnmount(){null!=this.blurTimeoutID&&(clearTimeout(this.blurTimeoutID),this.blurTimeoutID=null)}_setCurrentFocus(e){const{apiOptions:{isMobile:t,onFocusChange:r},keypadElement:o}=this.props,s=this._currentFocus;this._currentFocus=e;const n=this.getInputPaths(),i=this._currentFocus&&n.some((e=>p.default.inputPathsEqual(e,this._currentFocus)));null!=r&&r(this._currentFocus,s,i&&o&&o.getDOMNode(),i&&this.questionRenderer.getDOMNodeForPath(e)),o&&t&&(i?o.activate():o.dismiss())}_onRendererBlur(e){const t=this._currentFocus;i.default.isEqual(e,t)&&(this.blurTimeoutID=setTimeout((()=>{i.default.isEqual(this._currentFocus,t)&&this._setCurrentFocus(null)}),0))}_setWidgetProps(e,t,r){this.questionRenderer._setWidgetProps(e,t,r)}setInputValue(e,t,r){return this.questionRenderer.setInputValue(e,t,r)}focusPath(e){return this.questionRenderer.focusPath(e)}blurPath(e){return this.questionRenderer.blurPath(e)}getDOMNodeForPath(e){return this.questionRenderer.getDOMNodeForPath(e)}getGrammarTypeForPath(e){return this.questionRenderer.getGrammarTypeForPath(e)}getInputPaths(){return this.questionRenderer.getInputPaths()}focus(){return this.questionRenderer.focus()}blur(){this._currentFocus&&this.blurPath(this._currentFocus)}getNumHints(){return this.props.item.hints.length}scoreInput(){const e=this.questionRenderer.guessAndScore(),t=e[0],r=e[1],o=[t,[]],s=p.default.keScoreFromPerseusScore(r,o,this.questionRenderer.getSerializedState()),n=this.questionRenderer.emptyWidgets();return this.setState({questionCompleted:s.correct,questionHighlightedWidgets:n}),s}getWidgetIds(){return this.questionRenderer.getWidgetIds()}scoreWidgets(){const e=this.questionRenderer.scoreWidgets(),t=this.questionRenderer.getUserInputForWidgets(),r=this.questionRenderer.getSerializedState();return g(e,((e,o)=>p.default.keScoreFromPerseusScore(e,t[o],r)))}getSerializedState(){return{question:this.questionRenderer.getSerializedState(),hints:this.hintsRenderer.getSerializedState()}}restoreSerializedState(e,t){let r=2;const o=()=>{--r,t&&0===r&&t()};this.questionRenderer.restoreSerializedState(e.question,o),this.hintsRenderer.restoreSerializedState(e.hints,o)}showRationalesForCurrentlySelectedChoices(){this.questionRenderer.showRationalesForCurrentlySelectedChoices()}deselectIncorrectSelectedChoices(){this.questionRenderer.deselectIncorrectSelectedChoices()}render(){const e=(0,s.default)({},l.ApiOptions.defaults,this.props.apiOptions,{onFocusChange:this._handleFocusChange}),t={assetStatuses:this.state.assetStatuses,setAssetStatus:this.setAssetStatus},r=n.createElement(h.default.Provider,{value:t},n.createElement(c.default,{keypadElement:this.props.keypadElement,problemNum:this.props.problemNum,onInteractWithWidget:this.handleInteractWithWidget,highlightedWidgets:this.state.questionHighlightedWidgets,apiOptions:e,questionCompleted:this.state.questionCompleted,reviewMode:this.props.reviewMode,ref:e=>{null!=e&&(this.questionRenderer=e)},content:this.props.item.question.content,widgets:this.props.item.question.widgets,images:this.props.item.question.images})),o=n.createElement(u.default,{hints:this.props.item.hints,hintsVisible:this.props.hintsVisible,apiOptions:e,ref:e=>this.hintsRenderer=e});return n.createElement("div",null,n.createElement("div",null,r),n.createElement("div",{className:e.isMobile?void 0:(0,a.css)(b.hintsContainer)},o))}}t.ServerItemRenderer=y,y.defaultProps={apiOptions:{},onRendered:e=>{}};const b=a.StyleSheet.create({hintsContainer:{marginLeft:50}});var v=n.forwardRef(((e,t)=>n.createElement(f.default.Consumer,null,(({onRendered:r})=>n.createElement(y,(0,s.default)({},e,{onRendered:r,ref:t}))))));t.default=v},"11Vm":function(e,t,r){"use strict";var o=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.itemDataVersion=t.init=t.apiVersion=t.ServerItemRenderer=t.Renderer=t.MultiItems=t.ItemRenderer=t.HintsRenderer=t.ArticleRenderer=void 0;var s=o(r("Ogi5")),n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var o={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var i=s?Object.getOwnPropertyDescriptor(e,n):null;i&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n]}o.default=e,r&&r.set(e,o);return o}(r("4Zwh")),i=o(r("Hpzc")),a=o(r("Pnbu")),l=o(r("ZM/w")),u=o(r("YqAk")),c=o(r("08lt")),p=o(r("YH1v")),d=o(r("Atlv")),h=o(r("fiwv"));function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}n.registerWidgets(i.default);const m=s.default.apiVersion;t.apiVersion=m;const g=s.default.itemDataVersion;t.itemDataVersion=g;const y=a.default;t.init=y;const b=l.default;t.ArticleRenderer=b;const v=u.default;t.ItemRenderer=v;const O=c.default;t.ServerItemRenderer=O;const w=p.default;t.HintsRenderer=w;const C=d.default;t.Renderer=C;const k=h.default;t.MultiItems=k},"16F6":function(e,t,r){"use strict";var o=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=o(r("TSYQ")),n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=d(t);if(r&&r.has(e))return r.get(e);var o={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var i=s?Object.getOwnPropertyDescriptor(e,n):null;i&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n]}o.default=e,r&&r.set(e,o);return o}(r("q1tI")),i=o(r("17x9")),a=o(r("i8i4")),l=o(r("5pch")),u=o(r("96rG")),c=o(r("BWOr")),p=o(r("jskG"));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(d=function(e){return e?r:t})(e)}const h=i.default;class f extends n.Component{constructor(...e){super(...e),this.state={focused:!1},this.handleFocus=()=>{this.setState({focused:!0})},this.handleMouseDown=e=>{const t=a.default.findDOMNode(this).contains(e.target);this.mouseDown=t,t||this.setState({focused:!1})},this.handleMouseUp=()=>{this.mouseDown&&this.focus(),this.mouseDown=!1},this.handleBlur=e=>{this.mouseDown||a.default.findDOMNode(this).contains(e.relatedTarget)||this.setState({focused:!1})},this._shouldShowButtons=()=>"always"===this.props.buttonsVisible||"never"!==this.props.buttonsVisible&&this.state.focused,this.insert=e=>{const t=this.mathField();(0,l.default)(e).isFunction()?e(t):"\\"===e[0]?t.cmd(e).focus():t.write(e).focus(),t.focus()},this.mathField=e=>c.default.getInterface(2).MathField(a.default.findDOMNode(this.refs.mathinput),e),this.focus=()=>{this.mathField().focus(),this.setState({focused:!0})},this.blur=()=>{this.mathField().blur(),this.setState({focused:!1})}}render(){let e=(0,s.default)({"perseus-math-input":!0,"mq-editable-field":!0,"mq-math-mode":!0});this.props.className&&(e=e+" "+this.props.className);let t=null;return this._shouldShowButtons()&&(t=n.createElement(p.default,{sets:this.props.buttonSets,className:"math-input-buttons absolute",convertDotToTimes:this.props.convertDotToTimes,onInsert:this.insert})),n.createElement("div",{style:{display:"inline-block"}},n.createElement("div",{style:{display:"inline-block"}},n.createElement("span",{className:e,ref:"mathinput","aria-label":this.props.labelText,onFocus:this.handleFocus,onBlur:this.handleBlur})),n.createElement("div",{style:{position:"relative"},onBlur:this.handleBlur},t))}componentWillUnmount(){window.removeEventListener("mousedown",this.handleMouseDown),window.removeEventListener("mouseup",this.handleMouseUp)}componentDidMount(){window.addEventListener("mousedown",this.handleMouseDown),window.addEventListener("mouseup",this.handleMouseUp);let e=!1;this.mathField({autoCommands:"pi theta phi sqrt nthroot",charsThatBreakOutOfSupSub:"+-*/=<>≠≤≥",supSubsRequireOperand:!0,spaceBehavesLikeTab:!0,handlers:{edited:t=>{let r=t.latex();if(r=r.replace(/<>/g,"\\ne"),this.props.convertDotToTimes){r=r.replace(/\\cdot/g,"\\times");const e=t.__controller.cursor[c.default.L];e&&"\\cdot "===e.ctrlSeq&&(t.__controller.backspace(),t.cmd("\\times"))}else r=r.replace(/\\times/g,"\\cdot");e&&this.props.value!==r&&this.props.onChange(r)},enter:()=>{(0,u.default)(a.default.findDOMNode(this.refs.mathinput)).submit()},upOutOf:e=>{e.typedText("^")}}}),this.mathField().latex(this.props.value),e=!0}}f.propTypes={value:h.string,onChange:h.func.isRequired,convertDotToTimes:h.bool,buttonsVisible:h.oneOf(["always","never","focused"]),buttonSets:p.default.buttonSetsType.isRequired,labelText:i.default.string,onFocus:h.func,onBlur:h.func},f.defaultProps={value:"",convertDotToTimes:!1,buttonsVisible:"focused"};var m=f;t.default=m},"Akm+":function(e,t,r){"use strict";var o=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=o(r("pVnL")),n=o(r("8OQS")),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var o={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var i=s?Object.getOwnPropertyDescriptor(e,n):null;i&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n]}o.default=e,r&&r.set(e,o);return o}(r("q1tI")),a=o(r("17x9"));o(r("5pch"));const l=["inputRef","onChecked","goToPrevChoice","goToNextChoice"];function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}class c extends i.Component{constructor(...e){super(...e),this.handleClick=e=>{this.props.onChecked(!this.props.checked)},this.handleKeyUp=e=>{" "===e.key&&(this.props.onChecked(!this.props.checked),e.preventDefault())},this.handleChange=e=>{!this.props.checked&&e.target.checked&&this.props.onChecked(!0)},this.handleKeyDown=e=>{" "===e.key?e.preventDefault():"ArrowUp"===e.key||"ArrowLeft"===e.key?(this.props.goToPrevChoice(),e.preventDefault()):"ArrowDown"!==e.key&&"ArrowRight"!==e.key||(this.props.goToNextChoice(),e.preventDefault())},this.handleRef=e=>{this._inputElement=e,this.props.inputRef&&this.props.inputRef(e)}}render(){const e=this.props,t=(0,n.default)(e,l);return i.createElement("input",(0,s.default)({},t,{type:"radio",onChange:this.handleChange,onClick:this.handleClick,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,ref:this.handleRef}))}}c.propTypes={checked:a.default.bool.isRequired,inputRef:a.default.func,onChecked:a.default.func.isRequired,goToPrevChoice:a.default.func.isRequired,goToNextChoice:a.default.func.isRequired};var p=c;t.default=p},Bkj0:function(e,t,r){"use strict";var o=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=h(r("q1tI")),n=r("mR6N"),i=o(r("Pwnf")),a=r("Vxy9"),l=r("6OHE"),u=o(r("GLX1")),c=r("bGTE"),p=h(r("HEOz"));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(d=function(e){return e?r:t})(e)}function h(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=d(t);if(r&&r.has(e))return r.get(e);var o={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var i=s?Object.getOwnPropertyDescriptor(e,n):null;i&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n]}return o.default=e,r&&r.set(e,o),o}class f extends s.PureComponent{constructor(...e){super(...e),this._handleTooltipButtonRef=e=>{e&&this.props.usingKeyboardFocus&&e.focus()}}_getAriaLabel(){const{crossedOut:e,pos:t}=this.props,r=(0,c.getChoiceLetter)(t);return e?p._("Bring back Choice %(letter)s",{letter:r}):p._("Cross out Choice %(letter)s",{letter:r})}render(){const{crossedOut:e,pos:t,primaryProductColor:r,theme:o}=this.props,l="day"===o?r:i.default.white;return s.createElement("button",{type:"button","aria-label":this._getAriaLabel(),className:(0,n.css)([m.tooltipButton]),onClick:()=>this.props.onClick(),onMouseDown:e=>e.preventDefault(),onFocus:()=>this.props.onFocus(),onBlur:()=>this.props.onBlur(),disabled:this.props.disabled,tabIndex:this.props.tabFocusable?0:-1,ref:this._handleTooltipButtonRef},s.createElement(u.default,{pos:t,product:"library",crossedOut:!this.props.crossedOut,primaryProductColor:l,pressed:!0,checked:!1,focused:!1,correct:!1,showCorrectness:!1,reviewMode:!1,previouslyAnswered:!1,transparentBackground:!0}),s.createElement(a.LabelLarge,{style:{color:l}},e?p._("Bring back"):p._("Cross out")))}}t.default=f,f.defaultProps={primaryProductColor:l.colors.kaGreen};const m=n.StyleSheet.create({tooltipButton:{background:"none",border:"none",font:"inherit",padding:0,cursor:"pointer",textDecoration:"none",display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center"}})},DUcE:function(e,t,r){"use strict";var o=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r("mR6N"),n=o(r("TSYQ")),i=w(r("q1tI")),a=o(r("17x9")),l=o(r("i8i4")),u=o(r("5pch")),c=r("8SBg"),p=w(r("4PhQ")),d=r("j8wP"),h=o(r("MG0i")),f=w(r("UcaO")),m=o(r("TBZ3")),g=o(r("uBl0")),y=o(r("N2wX")),b=o(r("Eo51")),v=w(r("HEOz"));function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(O=function(e){return e?r:t})(e)}function w(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=O(t);if(r&&r.has(e))return r.get(e);var o={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var i=s?Object.getOwnPropertyDescriptor(e,n):null;i&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n]}return o.default=e,r&&r.set(e,o),o}const{captureScratchpadTouchStart:C}=g.default,k=a.default.arrayOf(a.default.shape({checked:a.default.bool,crossedOut:a.default.bool,content:a.default.node,rationale:a.default.node,hasRationale:a.default.bool,showRationale:a.default.bool,showCorrectness:a.default.bool,correct:a.default.bool,originalIndex:a.default.number,isNoneOfTheAbove:a.default.bool})),_=f.radioBorderColor;class S extends i.Component{constructor(...e){super(...e),this.state={radioGroupName:u.default.uniqueId("perseus_radio_")},this.updateChoice=(e,t)=>{let r;r=t.checked&&!this.props.multipleSelect?this.props.choices.map((e=>!1)):this.props.choices.map((e=>e.checked));const o=this.props.choices.map((e=>e.crossedOut));r[e]=t.checked,o[e]=t.crossedOut,this.props.onChange({checked:r,crossedOut:o})},this.focus=e=>(l.default.findDOMNode(this.refs["radio"+(e||0)]).focus(),!0),this.getInstructionsText=()=>this.props.multipleSelect?this.props.countChoices?v._("Choose %(numCorrect)s answers:",{numCorrect:this.props.numCorrect}):v._("Choose all answers that apply:"):v._("Choose 1 answer:"),this.deselectEnabled=()=>this.props.apiOptions.isMobile||this.props.deselectEnabled,this.goToChoice=e=>{const t=this.props.choices.length;e<0&&(e+=t),e>=t&&(e-=t);const r=this.refs[`radio${e}`];if(!r)return void p.default.error(`found no choice at index ${e}, even after wrapping it to be within bounds`,p.Errors.Internal);r.focusInput();const o=this.props.choices.map((e=>e.crossedOut)),s=this.props.choices.map((e=>!1));this.props.choices[e].crossedOut||(s[e]=!0),this.props.onChange({checked:s,crossedOut:o})}}componentDidUpdate(e){const{apiOptions:t,choices:r,isLastUsedWidget:o,reviewModeRubric:s}=this.props;if(t.canScrollPage&&o&&s&&!e.reviewModeRubric){const e=r.findIndex((e=>e.checked));if(e>=0){const t=l.default.findDOMNode(this.refs["radio"+e]);(0,c.scrollElementIntoView)(t)}}}render(){const e=this.props.multipleSelect?"checkbox":"radio",t=this.props.reviewModeRubric,r=!!t,o=S.styles,a=this.props.apiOptions.satStyling,l=this.props.apiOptions.isMobile,c=this.props.choices,p=c[0].highlighted,f=c[c.length-1].highlighted,m=(0,n.default)("perseus-widget-radio",!this.props.editMode&&"perseus-rendered-radio",(0,s.css)(o.radio,!a&&o.responsiveRadioContainer,!a&&p&&l&&o.radioContainerFirstHighlighted,!a&&f&&l&&o.radioContainerLastHighlighted,a&&o.satRadio)),g=(0,n.default)("instructions",(0,s.css)(o.instructions,l&&o.instructionsMobile)),v=this.getInstructionsText(),O=!a,w=(0,s.css)(o.responsiveFieldset),k=i.createElement("fieldset",{className:`perseus-widget-radio-fieldset ${w}`},i.createElement("legend",{className:"perseus-sr-only"},v),O&&i.createElement("div",{className:g},v),i.createElement("ul",{className:m},this.props.choices.map((function(l,c){let p=y.default;const f={ref:`radio${c}`,apiOptions:this.props.apiOptions,checked:l.checked,crossedOut:l.crossedOut,previouslyAnswered:l.previouslyAnswered,reviewMode:r,correct:l.correct,rationale:l.rationale,content:l.content,disabled:this.props.apiOptions.readOnly||l.disabled,editMode:this.props.editMode,groupName:this.state.radioGroupName,isLastChoice:c===this.props.choices.length-1,showCorrectness:r||!!l.showCorrectness,showRationale:l.hasRationale&&(r||l.showRationale),type:e,pos:c,deselectEnabled:this.deselectEnabled(),onChange:e=>{this.updateChoice(c,e)},goToPrevChoice:()=>this.goToChoice(c-1),goToNextChoice:()=>this.goToChoice(c+1)};l.isNoneOfTheAbove&&(p=b.default,u.default.extend(f,{showContent:l.revealNoneOfTheAbove}));const m=this.props.choices[c+1],g=!!m&&m.highlighted,v=e=>{const n=a&&r&&e,i=a&&r&&m&&m.checked;return(0,s.css)(h.default.aboveScratchpad,o.item,!a&&o.responsiveItem,!a&&e&&o.selectedItem,!a&&e&&l.highlighted&&o.aboveBackdrop,!a&&e&&l.highlighted&&this.props.apiOptions.isMobile&&o.aboveBackdropMobile,!a&&g&&this.props.apiOptions.isMobile&&o.nextHighlighted,a&&o.satRadioOption,n&&!l.correct&&o.satRadioOptionIncorrect,n&&l.correct&&o.satRadioOptionCorrect,i&&!m.correct&&o.satRadioOptionNextIncorrect,i&&m.correct&&o.satRadioOptionNextCorrect,a&&t&&o.satReviewRadioOption)};v(!0);const O=(0,n.default)(v(l.checked),d.ClassNames.RADIO.OPTION,l.checked&&d.ClassNames.RADIO.SELECTED,r&&t.choices[c].correct&&d.ClassNames.CORRECT,r&&!t.choices[c].correct&&d.ClassNames.INCORRECT);let w=null,k=null;return this.props.editMode&&(k=e=>{let t=e.target;for(;t&&t!==w;){if(t.getAttribute("data-is-radio-icon"))return void this.updateChoice(c,{checked:!l.checked});t=t.parentNode}}),i.createElement("li",{key:c,ref:e=>w=e,className:O,onClick:k,onTouchStart:this.props.labelWrap?C:null},i.createElement(p,f))}),this)));return i.createElement("div",{className:(0,s.css)(!a&&o.responsiveContainer)},k)}}S.propTypes={apiOptions:a.default.shape({readOnly:a.default.bool,satStyling:a.default.bool,isMobile:a.default.bool,styling:a.default.shape({radioStyleVersion:a.default.oneOf(["intermediate","final"])}),canScrollPage:a.default.bool}),choices:k,deselectEnabled:a.default.bool,editMode:a.default.bool,labelWrap:a.default.bool,countChoices:a.default.bool,numCorrect:a.default.number,multipleSelect:a.default.bool,reviewModeRubric:a.default.shape({choices:k}),onChange:a.default.func,isLastUsedWidget:a.default.bool},S.styles=s.StyleSheet.create({instructions:{display:"block",color:f.gray17,fontSize:14,lineHeight:1.25,fontStyle:"normal",fontWeight:"bold",marginBottom:16},instructionsMobile:{fontSize:18,[m.default.smOrSmaller]:{fontSize:16},[m.default.xl]:{fontSize:20}},radio:{width:"100%"},responsiveRadioContainer:{borderBottom:`1px solid ${_}`,borderTop:`1px solid ${_}`,width:"auto",[m.default.smOrSmaller]:{marginLeft:f.negativePhoneMargin,marginRight:f.negativePhoneMargin}},radioContainerFirstHighlighted:{borderTop:"1px solid rgba(0, 0, 0, 0)"},radioContainerLastHighlighted:{borderBottom:"1px solid rgba(0, 0, 0, 0)"},satRadio:{background:"none",marginLeft:0,userSelect:"none"},satRadioOption:{margin:0,padding:0,borderBottom:"1px solid #ccc",":first-child":{borderTop:"1px solid #ccc"}},satRadioOptionCorrect:{borderBottomColor:f.satCorrectBorderColor,":first-child":{borderTopColor:f.satCorrectBorderColor}},satRadioOptionIncorrect:{borderBottomColor:f.satIncorrectBorderColor,":first-child":{borderTopColor:f.satIncorrectBorderColor}},satRadioOptionNextCorrect:{borderBottomColor:f.satCorrectBorderColor},satRadioOptionNextIncorrect:{borderBottomColor:f.satIncorrectBorderColor},satReviewRadioOption:{pointerEvents:"none"},item:{marginLeft:20},inlineItem:{display:"inline-block",paddingLeft:20,verticalAlign:"middle"},responsiveItem:{marginLeft:0,padding:0,":not(:last-child)":{borderBottom:`1px solid ${_}`}},selectedItem:{background:"white"},aboveBackdrop:{position:"relative",zIndex:1062},aboveBackdropMobile:{boxShadow:"0 0 4px 0 rgba(0, 0, 0, 0.2),0 0 2px 0 rgba(0, 0, 0, 0.1)",":not(:last-child)":{borderBottom:"1px solid rgba(0, 0, 0, 0)"}},nextHighlighted:{":not(:last-child)":{borderBottom:"1px solid rgba(0, 0, 0, 0)"}},responsiveContainer:{overflow:"auto",marginLeft:f.negativePhoneMargin,marginRight:f.negativePhoneMargin,paddingLeft:f.phoneMargin},responsiveFieldset:{paddingRight:f.phoneMargin}}),S.defaultProps={editMode:!1};var x=S;t.default=x},Eo51:function(e,t,r){"use strict";var o=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=o(r("pVnL")),n=o(r("TSYQ")),i=d(r("q1tI")),a=o(r("17x9")),l=d(r("HEOz")),u=o(r("Atlv")),c=o(r("N2wX"));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}function d(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var o={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var i=s?Object.getOwnPropertyDescriptor(e,n):null;i&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n]}return o.default=e,r&&r.set(e,o),o}class h extends i.Component{constructor(...e){super(...e),this.focusInput=()=>{this._choice.focusInput()}}render(){const e=(0,s.default)({},this.props,{className:(0,n.default)(this.props.className,"none-of-above"),content:this.props.showContent?this.props.content:i.createElement(u.default,{key:"noneOfTheAboveRenderer",content:l._("None of the above")}),ref:e=>this._choice=e});return i.createElement(c.default,e)}}h.propTypes={className:a.default.string,content:a.default.node,showContent:a.default.bool},h.defaultProps={showContent:!0};var f=h;t.default=f},G4Rg:function(e,t,r){"use strict";var o=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=l(t);if(r&&r.has(e))return r.get(e);var o={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var i=s?Object.getOwnPropertyDescriptor(e,n):null;i&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n]}o.default=e,r&&r.set(e,o);return o}(r("q1tI")),n=o(r("EIXS")),i=o(r("Bkj0")),a=o(r("TBZ3"));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(l=function(e){return e?r:t})(e)}class u extends s.PureComponent{constructor(...e){super(...e),this._handleKeyDown=e=>{"Tab"===e.key&&(this.props.onDismiss(),e.preventDefault())}}_renderTooltipContent(){return s.createElement("div",{onKeyDown:this._handleKeyDown},s.createElement(i.default,this.props.buttonProps))}render(){return s.createElement("div",null,s.createElement(n.default,{content:this._renderTooltipContent(),offsetFrom:"arrow",offset:10,dismissed:this.props.dismissed,showOnMount:!0,toggleOnHover:!1,onClick:()=>this.props.buttonProps.onClick(),media:a.default.mdOrLarger},this.props.children),!this.props.dismissed&&s.createElement(c,{onDismiss:this.props.onDismiss}))}}t.default=u;class c extends s.PureComponent{constructor(...e){super(...e),this._handleGlobalClick=()=>{this.props.onDismiss()},this._handleGlobalKeyup=e=>{"Escape"===e.key&&this.props.onDismiss()}}componentDidMount(){setTimeout((()=>{window.addEventListener("click",this._handleGlobalClick),window.addEventListener("keyup",this._handleGlobalKeyup)}),0)}componentWillUnmount(){window.removeEventListener("click",this._handleGlobalClick),window.removeEventListener("keyup",this._handleGlobalKeyup)}render(){return null}}},GLX1:function(e,t,r){"use strict";var o=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=o(r("pVnL")),n=f(r("q1tI")),i=r("mR6N"),a=f(r("HEOz")),l=r("bGTE"),u=r("/4Qb"),c=o(r("APgo")),p=o(r("gP8R")),d=f(r("UcaO"));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}function f(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var o={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var i=s?Object.getOwnPropertyDescriptor(e,n):null;i&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n]}return o.default=e,r&&r.set(e,o),o}const m=25;class g extends n.Component{constructStyles(e,t,r){let o,s=d.satBlue,n=d.satBlue;return e?t?(s=d.satCorrectColor,n=r?d.white:d.satCorrectColor,o=r?d.satCorrectColor:d.white):r&&(s=d.satIncorrectColor,n=d.white,o=d.satIncorrectColor):r&&(n=d.white,o=d.satBlue),{color:n,backgroundColor:o,borderColor:s}}render(){const{letter:e,a11yText:t,reviewMode:r,checked:o,correct:s,crossedOut:a}=this.props,{color:l,backgroundColor:u,borderColor:c}=this.constructStyles(r,s,o);return n.createElement("div",{className:(0,i.css)(w.iconWrapper)},n.createElement("div",{className:(0,i.css)(w.satCircle),style:{backgroundColor:u,borderColor:c}}),n.createElement("div",{style:{color:l},className:(0,i.css)(w.letter)},n.createElement("span",{className:"perseus-sr-only"},t),n.createElement("span",{"aria-hidden":"true"},e)),a&&n.createElement(v,{color:c,sat:!0}))}}const y=24;class b extends n.Component{getChoiceInner(){const{letter:e,showCorrectness:t,correct:r}=this.props;return t?r?n.createElement(c.default,(0,s.default)({},u.iconCheck,{style:{position:"relative",top:-1}})):n.createElement(c.default,u.iconMinus):e}getDynamicStyles(){const{checked:e,showCorrectness:t,pressed:r,primaryProductColor:o,correct:s,transparentBackground:n}=this.props;if(!t&&r)return{borderColor:o,color:o,backgroundColor:n?"transparent":d.white};if(e){const e=t&&s?d.kaGreen:o;return{color:d.white,backgroundColor:e,borderColor:e}}return{borderColor:d.gray68,color:d.gray68}}render(){const{a11yText:e,checked:t,crossedOut:r,showCorrectness:o,correct:s,focused:a,primaryProductColor:l,previouslyAnswered:u}=this.props,c=this.getDynamicStyles();return n.createElement("div",{className:(0,i.css)(w.iconWrapper)},n.createElement(p.default,{color:l,visible:a},n.createElement("div",{style:c,className:(0,i.css)(w.libraryCircle,o&&s&&w.libraryCircleCorrect,o&&!s&&w.libraryCircleIncorrect,o&&!s&&(t||u)&&w.libraryCircleIncorrectAnswered),"data-is-radio-icon":!0},n.createElement("div",{className:"perseus-sr-only"},e),n.createElement("div",{"aria-hidden":!0},this.getChoiceInner()))),r&&n.createElement(v,{color:c.borderColor}))}}function v(e){const t=e.sat?29:28;return n.createElement("svg",{width:t,height:t,viewBox:`0 0 ${t} ${t}`,className:(0,i.css)(w.crossOutLine)},n.createElement("line",{x1:2,x2:t-2,y1:t-2,y2:2,stroke:e.color,strokeWidth:"2",strokeLinecap:"round"}))}class O extends n.Component{a11yText(e){const{checked:t,correct:r,crossedOut:o,showCorrectness:s}=this.props;return s&&r?t?a._("(Choice %(letter)s, Checked, Correct)",{letter:e}):o?a._("(Choice %(letter)s, Crossed out, Correct)",{letter:e}):a._("(Choice %(letter)s, Correct)",{letter:e}):s&&!r?t?a._("(Choice %(letter)s, Checked, Incorrect)",{letter:e}):o?a._("(Choice %(letter)s, Crossed out, Incorrect)",{letter:e}):a._("(Choice %(letter)s, Incorrect)",{letter:e}):t?a._("(Choice %(letter)s, Checked)",{letter:e}):o?a._("(Choice %(letter)s, Crossed out)",{letter:e}):a._("(Choice %(letter)s)",{letter:e})}render(){const{pos:e,reviewMode:t,checked:r,crossedOut:o,correct:s,product:i,showCorrectness:a,pressed:u,focused:c,primaryProductColor:p,previouslyAnswered:d,transparentBackground:h}=this.props,f=(0,l.getChoiceLetter)(e);return"sat"===i?n.createElement(g,{letter:f,a11yText:this.a11yText(f),reviewMode:t,checked:r,correct:s,crossedOut:o}):n.createElement(b,{letter:f,a11yText:this.a11yText(f),reviewMode:t,checked:r,crossedOut:o,pressed:u,focused:c,correct:s,showCorrectness:a,primaryProductColor:p,previouslyAnswered:d,transparentBackground:h})}}O.defaultProps={primaryProductColor:d.kaGreen};const w=i.StyleSheet.create({satCircle:{display:"block",borderRadius:m,borderStyle:"solid",borderWidth:2,content:"''",height:m,width:m,top:1,left:1},iconWrapper:{display:"inline-block",position:"relative"},crossOutLine:{position:"absolute",top:"calc(50% - 14px)",left:"calc(50% - 14px)"},libraryCircle:{width:y,height:y,boxSizing:"border-box",borderRadius:y,borderStyle:"solid",borderWidth:2,fontFamily:d.baseFontFamily,fontWeight:"bold",fontSize:12,display:"flex",alignItems:"center",justifyContent:"center",lineHeight:"1px"},libraryCircleCorrect:{fontSize:y},libraryCircleIncorrect:{fontSize:y,borderColor:d.gray68,color:d.gray68},libraryCircleIncorrectAnswered:{backgroundColor:d.warning1,borderColor:d.warning1,color:d.white},letter:{border:"2px solid transparent",width:m,height:m,position:"absolute",top:1,display:"flex",alignItems:"center",justifyContent:"center",fontFamily:d.boldFontFamily,fontSize:13}});var C=O;t.default=C},Hpzc:function(e,t,r){"use strict";var o=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=o(r("b5JB")),n=o(r("hxS7")),i=o(r("e04/")),a=o(r("IYtG")),l=[s.default,n.default,i.default,a.default];t.default=l},IYtG:function(e,t,r){"use strict";var o=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Expression=void 0;var s=w(r("q1tI")),n=o(r("5pch")),i=o(r("TSYQ")),a=o(r("mbWs")),l=r("reBI"),u=w(r("4PhQ")),c=o(r("Yw3Q")),p=r("j8wP"),d=w(r("+jAD")),h=o(r("7BBF")),f=o(r("APgo")),m=o(r("l+pH")),g=o(r("16F6")),y=r("zahm"),b=r("/4Qb"),v=w(r("HEOz"));function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(O=function(e){return e?r:t})(e)}function w(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=O(t);if(r&&r.has(e))return r.get(e);var o={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var i=s?Object.getOwnPropertyDescriptor(e,n):null;i&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n]}return o.default=e,r&&r.set(e,o),o}const{KeypadInput:C}=l.components,{KeypadTypes:k}=l.consts,_=v._("Sorry, I don't understand that!"),S=e=>e.replace(/([_^])([^{])/g,"$1{$2}");class x extends s.Component{constructor(...e){super(...e),this.displayName="Expression",this.state={showErrorTooltip:!1,showErrorText:!1},this.componentDidMount=()=>{this._isMounted=!0},this.componentDidUpdate=e=>{n.default.isEqual(this.props.value,e.value)&&n.default.isEqual(this.props.functions,e.functions)||(clearTimeout(this.errorTimeout),this.parse(this.props.value,this.props).parsed?this.setState({showErrorTooltip:!1}):this.errorTimeout=setTimeout((()=>{!1!==this.props.apiOptions.onInputError(null,this.props.value,_)&&this.setState({showErrorTooltip:!0})}),2e3))},this.componentWillUnmount=()=>{clearTimeout(this.errorTimeout),this._isMounted=!1},this._isMounted=!1,this.errorTimeout=null,this.simpleValidate=(e,t)=>(t=t||function(){},x.validate(this.getUserInput(),e,t)),this.getUserInput=()=>x.getUserInputFromProps(this.props),this.change=(...e)=>d.change.apply(this,e),this.parse=(e,t)=>{const r=n.default.pick(t||this.props,"functions");return n.default.extend(r,{decimal_separator:v.getDecimalSeparator()}),a.default.parse(S(e),r)},this.changeAndTrack=(e,t)=>{this.change("value",e,t),this.props.trackInteraction()},this._handleFocus=()=>{this.props.onFocus([])},this._handleBlur=()=>{this.props.onBlur([])},this.focus=()=>(this.props.apiOptions.customKeypad&&this.refs.input.focus(),!0),this.focusInputPath=e=>{this.refs.input.focus()},this.blurInputPath=e=>{this.refs.input.blur()},this.insert=e=>{this.props.apiOptions.staticRender||this.refs.input.insert(e)},this.getInputPaths=()=>[[]],this.getGrammarTypeForPath=e=>"expression",this.setInputValue=(e,t,r)=>{this.props.onChange({value:t},r)}}static validate(e,t,r=function(){}){const o=n.default.clone(t);n.default.extend(o,{decimal_separator:v.getDecimalSeparator()});const s=e=>{const r=a.default.parse(e.value,t);return r.parsed?h.default.expression.createValidatorFunctional(r.expr,(0,n.default)({}).extend(o,{simplify:e.simplify,form:e.form})):(u.default.error(`Unable to parse solution answer '${e.value}' for expression`,u.Errors.Internal),u.default.log("Rubric",null,t),null)};let i,l,c,p=!0;for(const r of t.answerForms||[]){const t=s(r);if(!t)continue;const o=t(e);if(o.correct){i=r,l=o.message||"";break}p=p&&o.empty,"correct"===r.considered&&o.ungraded&&!c&&(c=o)}if(!i)return c?{type:"invalid",message:c.message,suppressAlmostThere:c.suppressAlmostThere}:p?{type:"invalid",message:null}:{type:"points",earned:0,total:1};if("ungraded"===i.considered){return{type:"invalid",message:!1===r(null,e,l)?null:l}}return{type:"points",earned:"correct"===i.considered?1:0,total:1,message:l}}static getUserInputFromProps(e){return S(e.value)}static getOneCorrectAnswerFromRubric(e){const t=(e.answerForms||[]).filter((e=>"correct"===e.considered));if(0!==t.length)return t[0].value}render(){if(this.props.apiOptions.customKeypad)return s.createElement(C,{ref:"input",value:this.props.value,keypadElement:this.props.keypadElement,onChange:this.changeAndTrack,onFocus:()=>{var e;null==(e=this.props.keypadElement)||e.configure(this.props.keypadConfiguration,(()=>{this._isMounted&&this._handleFocus()}))},onBlur:this._handleBlur});if(this.props.apiOptions.staticRender)return s.createElement(m.default,{ref:"input",value:this.props.value,type:"tex",examples:[],shouldShowExamples:!1,onChange:this.changeAndTrack,onFocus:this._handleFocus,onBlur:this._handleBlur,id:this.props.widgetId,linterContext:this.props.linterContext});const e=s.createElement("span",{className:"error-tooltip",role:"tooltip"},s.createElement(c.default,{className:"error-text-container",horizontalPosition:"right",horizontalAlign:"left",verticalPosition:"top",arrowSize:10,borderColor:"#fcc335",show:this.state.showErrorText},s.createElement("span",{className:"error-icon","data-test-id":"test-error-icon",onMouseEnter:()=>{this.setState({showErrorText:!0})},onMouseLeave:()=>{this.setState({showErrorText:!1})},onClick:()=>{this.setState({showErrorText:!this.state.showErrorText})}},s.createElement(f.default,b.iconExclamationSign)),s.createElement("div",{className:"error-text"},_))),t=(0,i.default)({"perseus-widget-expression":!0,"show-error-tooltip":this.state.showErrorTooltip});return s.createElement("div",{className:t},s.createElement(g.default,{ref:"input",className:p.ClassNames.INTERACTIVE,value:this.props.value,onChange:this.changeAndTrack,convertDotToTimes:this.props.times,buttonsVisible:this.props.buttonsVisible||"focused",buttonSets:this.props.buttonSets,onFocus:this._handleFocus,onBlur:this._handleBlur}),this.state.showErrorTooltip&&e)}}t.Expression=x,x.defaultProps={value:"",times:!1,functions:[],buttonSets:["basic","trig","prealgebra","logarithms"],onFocus:()=>{},onBlur:()=>{},apiOptions:p.ApiOptions.defaults,linterContext:y.linterContextDefault};const E=e=>{const t=k.EXPRESSION,r={},o={};for(const t of e.answerForms){const s=a.default.parse(t.value,e);if(s.parsed){const e=s.expr,t=e=>"pi"===e||"theta"===e,n=e=>t(e)?e.toUpperCase():e;for(const t of e.getVars())r[n(t)]=!0;for(const t of e.getConsts())o[n(t)]=!0}}const s=Object.keys(r);s.sort();const n=Object.keys(o);n.sort();const i=[].concat(s,n);return i.length||i.push("PI"),{keypadType:t,extraKeys:i}};var P={name:"expression",displayName:"Expression / Equation",defaultAlignment:"inline-block",widget:x,transform:e=>{const{times:t,functions:r,buttonSets:o,buttonsVisible:s}=e;return{keypadConfiguration:E(e),times:t,functions:r,buttonSets:o,buttonsVisible:s}},version:{major:1,minor:0},propUpgrades:{1:e=>({times:e.times,buttonSets:e.buttonSets,functions:e.functions,buttonsVisible:e.buttonsVisible,answerForms:[{considered:"correct",form:e.form,simplify:e.simplify,value:e.value}]})},isLintable:!0};t.default=P},KGvg:function(e,t,r){"use strict";function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const s={onRendered:e=>{}};var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var s={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=n?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(s,i,a):s[i]=e[i]}s.default=e,r&&r.set(e,s);return s}(r("q1tI")).createContext(s);t.default=n},N2wX:function(e,t,r){"use strict";var o=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.TouchIgnoreTimeout=void 0;var s=o(r("pVnL")),n=r("mR6N"),i=(o(r("5pch")),b(r("q1tI"))),a=o(r("17x9")),l=o(r("TSYQ")),u=r("j8wP"),c=o(r("MG0i")),p=b(r("UcaO")),d=o(r("TBZ3")),h=o(r("Akm+")),f=o(r("GLX1")),m=o(r("TOec")),g=o(r("lCk0"));function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(y=function(e){return e?r:t})(e)}function b(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=y(t);if(r&&r.has(e))return r.get(e);var o={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var i=s?Object.getOwnPropertyDescriptor(e,n):null;i&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n]}return o.default=e,r&&r.set(e,o),o}const v={backgroundColor:p.satSelectedBackgroundColor,outline:`2px solid ${p.satBlue}`,zIndex:1},O="16px 16px",w="12px 16px";t.TouchIgnoreTimeout=10;class C extends i.Component{constructor(...e){super(...e),this.state={isInputFocused:!1,isInputActive:!1},this.onInputFocus=()=>{this.setState({isInputFocused:!0})},this.onInputBlur=()=>{this.setState({isInputFocused:!1})},this.onInputMouseDown=e=>{"mousedown"===e.type&&this.justFinishedTouch||(this.setState({isInputActive:!0}),this.props.apiOptions.satStyling&&this._input&&this._input.focus())},this.onInputMouseUp=e=>{if("mouseup"!==e.type||!this.justFinishedTouch){if("touchend"===e.type)return this.justFinishedTouch=!0,null!=this.justFinishedTimeoutID&&clearTimeout(this.justFinishedTimeoutID),void(this.justFinishedTimeoutID=setTimeout((()=>{this.setState({isInputActive:!1}),this.justFinishedTouch=!1}),10));this.setState({isInputActive:!1}),this.props.apiOptions.satStyling&&this._input&&this._input.focus()}},this.onInputMouseOut=()=>{this.setState({isInputActive:!1})},this.inputRef=e=>{this._input=e},this.renderOptionStatus=()=>{const{correct:e,checked:t,crossedOut:r,reviewMode:o,previouslyAnswered:s}=this.props;return this.props.apiOptions.satStyling?null:o||s?i.createElement(m.default,{checked:t,correct:e,crossedOut:r,previouslyAnswered:s}):null},this.renderChoiceIcon=()=>{const{radioStyleVersion:e,primaryProductColor:t}=this.props.apiOptions.styling;return void 0!==e&&"final"===e||this.props.apiOptions.satStyling?i.createElement(f.default,{pos:this.props.pos,correct:this.props.correct,crossedOut:this.props.crossedOut,pressed:this.state.isInputActive,focused:this.state.isInputFocused,checked:this.props.checked,showCorrectness:this.props.showCorrectness,reviewMode:this.props.reviewMode,product:this.props.apiOptions.satStyling?"sat":"library",primaryProductColor:t,previouslyAnswered:this.props.previouslyAnswered}):null},this._setChecked=e=>{e?this._sendChange({checked:!0,crossedOut:!1}):this._sendChange({checked:!1})},this._setCrossedOut=e=>{e?this._sendChange({checked:!1,crossedOut:!0}):this._sendChange({crossedOut:!1})},this._sendChange=e=>{const t=null!=e.checked?e.checked:this.props.checked,r=null!=e.crossedOut?e.crossedOut:this.props.crossedOut;this.props.onChange({checked:t,crossedOut:r})},this.focusInput=()=>{var e;null==(e=this._input)||e.focus()}}UNSAFE_componentWillUpdate(e){this.state.isInputFocused&&e.disabled&&this.setState({isInputFocused:!1})}componentWillUnmount(){null!=this.justFinishedTimeoutID&&clearTimeout(this.justFinishedTimeoutID)}render(){const e=this.props.apiOptions.satStyling,t=this.props.apiOptions.isMobile,{radioStyleVersion:r}=this.props.apiOptions.styling,o=void 0!==r&&"final"===r,a=(0,l.default)(this.props.className,"checkbox-label",(0,n.css)(k.label,t&&c.default.disableTextSelection,!e&&k.responsiveLabel,e&&k.satLabel)),p=(0,l.default)((0,n.css)(this.state.isInputFocused&&k.satDescriptionInputFocused,this.state.isInputActive&&k.satDescriptionInputActive)),d=this.props.showCorrectness&&!this.props.correct,f=this.props.checked&&!d,m={type:this.props.type,name:this.props.groupName,id:`${this.props.groupName}-choice-${this.props.pos}`,checked:f,disabled:this.props.disabled,onFocus:this.onInputFocus,onBlur:this.onInputBlur,className:(0,n.css)(!o&&c.default.perseusInteractive,!o&&k.input,!o&&c.default.responsiveInput,!o&&!e&&c.default.responsiveRadioInput,!o&&!e&&this.state.isInputActive&&c.default.responsiveRadioInputActive,o&&c.default.perseusSrOnly,e&&c.default.perseusSrOnly,e&&this.props.reviewMode&&k.satReviewInput)};let y=null;y="radio"===this.props.type?i.createElement(h.default,(0,s.default)({onChecked:e=>this._setChecked(e),goToPrevChoice:this.props.goToPrevChoice,goToNextChoice:this.props.goToNextChoice,inputRef:this.inputRef},m)):i.createElement("input",(0,s.default)({onChange:e=>this._setChecked(e.target.checked),ref:this.inputRef},m));const{reviewMode:b,correct:v,checked:O}=this.props,w=e&&b&&v,C=e&&b&&!v&&O,_=(0,l.default)("description",w&&"sat-correct",C&&"sat-incorrect",(0,n.css)(!e&&k.description,e&&k.satDescription,w&&k.satDescriptionCorrect,w&&O&&k.satDescriptionCorrectChecked,C&&k.satDescriptionIncorrectChecked)),S=(0,l.default)("checkbox",(0,n.css)(c.default.perseusInteractive,!e&&k.choiceIconWrapper,e&&k.satCheckboxOptionContent)),x=(0,l.default)("checkbox-and-option",(0,n.css)(!e&&k.intermediateResponsiveCheckbox,!e&&b&&k.intermediateResponsiveCheckboxReview)),E=(0,l.default)("perseus-radio-rationale-content",(0,n.css)(k.rationale,!e&&k.nonSatRationale,e&&k.satReviewRationale)),P=this.props.editMode?"div":"label",T=this.props.apiOptions.crossOutEnabled&&!this.props.showCorrectness,M=!e&&!b&&this.props.apiOptions.readOnly||T&&this.props.crossedOut;return i.createElement("div",{className:e?p:void 0},i.createElement(g.default,{enabled:T,pos:this.props.pos,primaryProductColor:this.props.apiOptions.styling.primaryProductColor,crossedOut:this.props.crossedOut,onCrossedOutChange:this._setCrossedOut,isSatProduct:e},i.createElement(P,{htmlFor:this.props.editMode?void 0:m.id,className:a,style:{opacity:M?.5:1}},i.createElement("div",{className:_,onMouseDown:this.onInputMouseDown,onMouseUp:this.onInputMouseUp,onMouseOut:this.onInputMouseOut,onTouchStart:this.onInputMouseDown,onTouchEnd:this.onInputMouseUp},i.createElement("div",{className:x},i.createElement("span",{className:S},y,this.renderChoiceIcon()),i.createElement("span",{className:(0,l.default)(u.ClassNames.RADIO.OPTION_CONTENT,u.ClassNames.INTERACTIVE,(0,n.css)(e&&k.satRadioOptionContent,e&&b&&k.satReviewRadioOptionContent)),style:{cursor:"default"}},i.createElement("div",{className:(0,n.css)(k.optionStatusContainer)},this.renderOptionStatus()),i.createElement("div",null,this.props.content))),this.props.showRationale&&i.createElement("div",{className:E,"data-test-id":`perseus-radio-rationale-content-${this.props.pos}`},this.props.rationale)))))}}C.propTypes={apiOptions:a.default.shape({satStyling:a.default.bool,isMobile:a.default.bool,styling:a.default.shape({radioStyleVersion:a.default.oneOf(["intermediate","final"]),primaryProductColor:a.default.string}),readOnly:a.default.bool}),checked:a.default.bool,className:a.default.string,rationale:a.default.node,content:a.default.node,correct:a.default.bool,deselectEnabled:a.default.bool,disabled:a.default.bool,editMode:a.default.bool,groupName:a.default.string,isLastChoice:a.default.bool,pos:a.default.number,reviewMode:a.default.bool,showRationale:a.default.bool,showCorrectness:a.default.bool,type:a.default.string,crossedOut:a.default.bool,previouslyAnswered:a.default.bool,onChange:a.default.func,goToPrevChoice:a.default.func.isRequired,goToNextChoice:a.default.func.isRequired},C.defaultProps={apiOptions:{styling:{}},checked:!1,classSet:{},correct:!1,disabled:!1,editMode:!1,onChange:function(){},showRationale:!1,type:"radio",pos:0,previouslyAnswered:!1};const k=n.StyleSheet.create({description:{display:"inline-block",width:"100%"},satDescription:{display:"block",position:"relative",boxSizing:"border-box",cursor:"pointer",marginLeft:0,padding:"17px 14px"},satDescriptionInputFocused:(0,s.default)({},v,{display:"block"}),satDescriptionInputActive:(0,s.default)({},v,{backgroundColor:p.satActiveBackgroundColor}),satDescriptionCorrect:{color:p.satCorrectColor},satDescriptionCorrectChecked:{backgroundColor:p.satCorrectBackgroundColor},satDescriptionIncorrectChecked:{color:p.satIncorrectColor,backgroundColor:p.satIncorrectBackgroundColor},input:{display:"inline-block",width:20,margin:3,marginLeft:-20,marginRight:0,float:"none"},satReviewInput:{pointerEvents:"none"},satRadioOptionContent:{userSelect:"text",display:"block",marginLeft:45,cursor:"inherit"},satReviewRadioOptionContent:{fontWeight:"bold"},satCheckboxOptionContent:{position:"absolute",display:"block",top:"50%",margin:"-16px 0 0 0",width:"auto"},choiceIconWrapper:{display:"flex",marginRight:12,flexShrink:0},optionStatusContainer:{display:"block"},rationale:{display:"block"},nonSatRationale:{padding:O,paddingTop:0,marginLeft:44,[d.default.smOrSmaller]:{padding:w,paddingTop:0}},satReviewRationale:{marginTop:13,marginLeft:45},label:{display:"block",transition:"opacity 0.2s ease-out"},responsiveLabel:{WebkitTapHighlightColor:"transparent",display:"flex",alignItems:"stretch"},satLabel:{cursor:"pointer"},intermediateResponsiveCheckbox:{display:"flex",alignItems:"center",padding:O,[d.default.smOrSmaller]:{padding:w}},intermediateResponsiveCheckboxReview:{alignItems:"flex-start"}});var _=C;t.default=_},"OJf/":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildMapper=function(){return new s(i,i,i)};var o=r("4PhQ");class s{constructor(e,t,r){this.content=e,this.hint=t,this.tags=r,this.array=i}setContentMapper(e){return new s(e,this.hint,this.tags)}setHintMapper(e){return new s(this.content,e,this.tags)}setTagsMapper(e){return new s(this.content,this.hint,e)}setArrayMapper(e){return new n(this.content,this.hint,this.tags,e)}mapTree(e,t){return a(e,t,[],this)}}class n{constructor(e,t,r,o){this.content=e,this.hint=t,this.tags=r,this.array=o}setArrayMapper(e){return new n(this.content,this.hint,this.tags,e)}mapTree(e,t){return a(e,t,[],this)}}function i(e){return e}function a(e,t,r,s){if("content"===t.type){const o=e;return s.content(o,t,r)}if("hint"===t.type){const o=e;return s.hint(o,t,r)}if("tags"===t.type){const o=e;return s.tags(o,t,r)}if("array"===t.type){const n=e;if(!Array.isArray(n))throw new o.KAError(`Invalid object of type "${typeof n}" found at path ${["<root>"].concat(r).join(".")}. Expected array.`,o.Errors.Internal);const i=t.elementShape,l=n.map(((e,t)=>a(e,i,r.concat(t),s)));return s.array(l,n,t,r)}if("object"===t.type){const n=e;if(n&&"object"!=typeof n)throw new o.KAError(`Invalid object of type "${typeof n}" found at path ${["<root>"].concat(r).join(".")}. Expected "object" type.`,o.Errors.Internal);const i=t.shape;if(!i)throw new o.KAError(`Unexpected shape ${JSON.stringify(t)} at path ${["<root>"].concat(r).join(".")}.`,o.Errors.Internal);const l={};return Object.keys(i).forEach((e=>{if(!(e in n))throw new o.KAError(`Key "${e}" is missing from shape at path ${["<root>"].concat(r).join(".")}.`,o.Errors.Internal);l[e]=a(n[e],i[e],r.concat(e),s)})),l}throw new o.KAError(`unexpected shape type ${t.type}`,o.Errors.Internal)}},Ogi5:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={apiVersion:{major:11,minor:0},itemDataVersion:{major:0,minor:1}}},Pnbu:function(e,t,r){"use strict";var o=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=o(r("96rG")),n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var o={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var a=s?Object.getOwnPropertyDescriptor(e,n):null;a&&(a.get||a.set)?Object.defineProperty(o,n,a):o[n]=e[n]}o.default=e,r&&r.set(e,o);return o}(r("4Zwh"));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}var a=function(e){const t=e.skipMathJax,o=void 0===e.loadExtraWidgets||e.loadExtraWidgets,i=s.default.Deferred();(e.extraWidgets?Promise.resolve(e.extraWidgets):o?Promise.all([r.e("3Fde"),r.e("ACiX"),r.e("1Peh")]).then(r.t.bind(null,"bxxM",7)).then((e=>e.default)):Promise.resolve(null)).then((e=>{e&&n.registerWidgets(e),i.resolve()}));const a=s.default.Deferred();return t?a.resolve():(MathJax.Hub.Config({messageStyle:"none",skipStartupTypeset:"none","HTML-CSS":{availableFonts:["TeX"],imageFont:null,scale:100,showMathMenu:!1}}),MathJax.Hub.Configured(),MathJax.Hub.Queue(a.resolve)),i.then((()=>a))};t.default=a},Q08l:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const o={type:"hint"},s=e=>({type:"array",elementShape:e});var n={content:{type:"content"},hint:o,hints:s(o),tags:{type:"tags"},arrayOf:s,shape:e=>({type:"object",shape:e})};t.default=n},R6Bf:function(e,t,r){"use strict";var o=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=o(r("pVnL")),n=f(r("q1tI")),i=o(r("5pch")),a=f(r("HEOz")),l=o(r("Atlv")),u=o(r("z875")),c=o(r("uBl0")),p=o(r("DUcE")),d=r("zahm");function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}function f(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var o={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var i=s?Object.getOwnPropertyDescriptor(e,n):null;i&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n]}return o.default=e,r&&r.set(e,o),o}class m extends n.Component{constructor(...e){super(...e),this._renderRenderer=e=>{let t=1;const r={},o=(e=e||"").replace(/\{\{passage-ref (\d+) (\d+)(?: "([^"]*)")?\}\}/g,((e,o,s,n)=>{const i="passage-ref "+t;return t++,r[i]={type:"passage-ref",graded:!1,options:{passageNumber:parseInt(o),referenceNumber:parseInt(s),summaryText:n},version:u.default.version},"[["+c.default.snowman+" "+i+"]]"}));return n.createElement(l.default,{key:"choiceContentRenderer",content:o,widgets:r,findExternalWidgets:this.props.findWidgets,alwaysUpdate:!0,linterContext:(0,s.default)({},this.props.linterContext,{blockHighlight:!0})})},this.focus=e=>this.refs.baseRadio.focus(e),this.updateChoices=e=>{const{choiceStates:t,choices:r}=this.props;let o;o=t?t.map((e=>(0,s.default)({},e))):r.map((()=>({selected:!1,crossedOut:!1,highlighted:!1,rationaleShown:!1,correctnessShown:!1,previouslyAnswered:!1,readOnly:!1}))),o.forEach(((t,r)=>{t.selected=e.checked[r],t.crossedOut=e.crossedOut[r]})),this.props.onChange({choiceStates:o}),this.props.trackInteraction()},this.getUserInput=()=>m.getUserInputFromProps(this.props),this.simpleValidate=e=>m.validate(this.getUserInput(),e),this.showRationalesForCurrentlySelectedChoices=e=>{const{choiceStates:t}=this.props;if(t){const r=this.simpleValidate(e),o="points"===r.type&&r.total===r.earned,n=t.map((e=>(0,s.default)({},e,{highlighted:e.selected,rationaleShown:e.selected||e.rationaleShown||o,readOnly:e.selected||e.readOnly||o,correctnessShown:e.selected||e.correctnessShown,previouslyAnswered:e.previouslyAnswered||e.selected})));this.props.onChange({choiceStates:n},null,!0)}},this.deselectIncorrectSelectedChoices=()=>{if(this.props.choiceStates){const e=this.props.choiceStates.map(((e,t)=>(0,s.default)({},e,{selected:e.selected&&!!this.props.choices[t].correct,highlighted:!1})));this.props.onChange({choiceStates:e},null,!1)}}}render(){let e,t=this.props.choices;return e=this.props.static?i.default.map(t,(e=>({selected:e.correct,crossedOut:e.crossedOut,readOnly:!0,highlighted:!1,rationaleShown:!0,correctnessShown:!0,previouslyAnswered:!1}))):this.props.choiceStates?this.props.choiceStates:this.props.values?i.default.map(this.props.values,(e=>({selected:e,crossedOut:!1,readOnly:!1,highlighted:!1,rationaleShown:!1,correctnessShown:!1,previouslyAnswered:!1}))):i.default.map(t,(()=>({selected:!1,crossedOut:!1,readOnly:!1,highlighted:!1,rationaleShown:!1,correctnessShown:!1,previouslyAnswered:!1}))),t=i.default.map(t,((t,r)=>{const o=t.isNoneOfTheAbove&&!t.content?a._("None of the above"):t.content,{selected:s,crossedOut:n,rationaleShown:i,correctnessShown:l,readOnly:u,highlighted:c,previouslyAnswered:p}=e[r],d=this.props.reviewModeRubric&&this.props.reviewModeRubric.choices[r];return{content:this._renderRenderer(o),checked:s,correct:void 0===t.correct?!!d&&d.correct:t.correct,disabled:u,hasRationale:!!t.clue,rationale:this._renderRenderer(t.clue),showRationale:i,showCorrectness:l,isNoneOfTheAbove:t.isNoneOfTheAbove,revealNoneOfTheAbove:this.props.questionCompleted&&s,crossedOut:n,highlighted:c,previouslyAnswered:p}})),n.createElement(p.default,{ref:"baseRadio",labelWrap:!0,multipleSelect:this.props.multipleSelect,countChoices:this.props.countChoices,numCorrect:this.props.numCorrect,choices:t,onChange:this.updateChoices,reviewModeRubric:this.props.reviewModeRubric,deselectEnabled:this.props.deselectEnabled,apiOptions:this.props.apiOptions,isLastUsedWidget:this.props.isLastUsedWidget})}static validate(e,t){const r=i.default.reduce(e.choicesSelected,((e,t)=>e+(t?1:0)),0);if(0===r)return{type:"invalid",message:null};if(e.numCorrect>1&&r!==e.numCorrect)return{type:"invalid",message:a._("Please choose the correct number of answers.")};if(e.noneOfTheAboveSelected&&r>1)return{type:"invalid",message:a._("'None of the above' may not be selected when other answers are selected.")};return{type:"points",earned:i.default.all(e.choicesSelected,((r,o)=>{let s;return s=e.noneOfTheAboveIndex===o?i.default.all(t.choices,((e,t)=>o===t||!e.correct)):!!t.choices[o].correct,s===r}))?1:0,total:1,message:null}}static getUserInputFromProps(e){if(e.choiceStates){let t=null,r=!1;const o=e.choiceStates,s=o.map((()=>!1)),n=e.countChoices,i=e.numCorrect;for(let n=0;n<s.length;n++){const i=e.choices[n].originalIndex;s[i]=o[n].selected,e.choices[n].isNoneOfTheAbove&&(t=i,s[n]&&(r=!0))}return{countChoices:n,choicesSelected:s,numCorrect:i,noneOfTheAboveIndex:t,noneOfTheAboveSelected:r}}if(e.values){let t=null,r=!1;const o=e.values.slice(),s=e.countChoices,n=e.numCorrect;for(let s=0;s<e.values.length;s++){const n=e.choices[s].originalIndex;o[n]=e.values[s],e.choices[s].isNoneOfTheAbove&&(t=n,o[s]&&(r=!0))}return{choicesSelected:o,noneOfTheAboveIndex:t,noneOfTheAboveSelected:r,countChoices:s,numCorrect:n}}return{choicesSelected:i.default.map(e.choices,(()=>!1))}}}m.defaultProps={choices:[{}],displayCount:null,multipleSelect:!1,countChoices:!1,deselectEnabled:!1,linterContext:d.linterContextDefault};var g=m;t.default=g},SoFn:function(e,t,r){"use strict";var o=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.buildEmptyItemForShape=function(e){return c(a(e))},t.buildEmptyItemTreeForShape=a,t.findContentNodesInItem=function(e,t,r){const o=u(e);(0,n.buildMapper)().setContentMapper(r).mapTree(o,t)},t.findHintNodesInItem=function(e,t,r){const o=u(e);(0,n.buildMapper)().setHintMapper(r).mapTree(o,t)},t.inferItemShape=function(e){return l(u(e))},t.itemToTree=u,t.treeToItem=c;var s=r("4PhQ"),n=r("OJf/"),i=o(r("Q08l"));function a(e){if("content"===e.type)return{__type:"content",content:"",images:{},widgets:{}};if("hint"===e.type)return{__type:"hint",replace:!1,content:"",images:{},widgets:{}};if("tags"===e.type)return[];if("array"===e.type)return[];if("object"===e.type){const t=e.shape,r={};return Object.keys(t).forEach((e=>{r[e]=a(t[e])})),r}throw new s.KAError(`unexpected shape type ${e.type}`,s.Errors.Internal)}function l(e){if(Array.isArray(e))return e.length?"string"==typeof e[0]?i.default.tags:i.default.arrayOf(l(e[0])):i.default.arrayOf(i.default.content);if("object"==typeof e&&("content"===e.__type||"item"===e.__type))return i.default.content;if("object"==typeof e&&"hint"===e.__type)return i.default.hint;if("object"==typeof e){const t={};return Object.keys(e).forEach((r=>{t[r]=l(e[r])})),i.default.shape(t)}throw new s.KAError(`unexpected multi-item node ${JSON.stringify(e)}`,s.Errors.Internal)}function u(e){return e._multi}function c(e){return{_multi:e}}},TOec:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=l(r("q1tI")),s=r("mR6N"),n=l(r("HEOz")),i=l(r("UcaO"));function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}function l(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a(t);if(r&&r.has(e))return r.get(e);var o={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var i=s?Object.getOwnPropertyDescriptor(e,n):null;i&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n]}return o.default=e,r&&r.set(e,o),o}class u extends o.Component{_renderText(){const{checked:e,correct:t,crossedOut:r}=this.props;return t?e?n._("Correct (selected)"):r?n._("Correct (but you crossed it out)"):n._("Correct"):e?n._("Incorrect (selected)"):n._("Incorrect")}render(){const{checked:e,correct:t,previouslyAnswered:r}=this.props;let n;return n=t?c.correct:e||r?c.incorrectAnswered:c.incorrect,o.createElement("div",{className:(0,s.css)(c.text,n)},this._renderText())}}const c=s.StyleSheet.create({text:{alignItems:"center",display:"flex",fontSize:12,height:32,textTransform:"uppercase"},correct:{color:i.kaGreen},incorrectAnswered:{color:i.warning1},incorrect:{color:i.gray68}});var p=u;t.default=p},WZBl:function(e,t,r){"use strict";var o=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=u(r("q1tI")),n=o(r("17x9")),i=o(r("5pch")),a=u(r("HEOz"));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(l=function(e){return e?r:t})(e)}function u(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=l(t);if(r&&r.has(e))return r.get(e);var o={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var i=s?Object.getOwnPropertyDescriptor(e,n):null;i&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n]}return o.default=e,r&&r.set(e,o),o}class c extends s.Component{render(){const e=i.default.uniq(this.props.answers),t=i.default.map(e,(e=>s.createElement("dd",{key:e},e)));return s.createElement("dl",{className:"perseus-possible-answers"},s.createElement("dt",null,a.doNotTranslate("Correct Answer")),t)}}c.propTypes={answers:n.default.arrayOf(n.default.string)};var p=c;t.default=p},Yw3Q:function(e,t,r){"use strict";var o=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=l(t);if(r&&r.has(e))return r.get(e);var o={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var i=s?Object.getOwnPropertyDescriptor(e,n):null;i&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n]}o.default=e,r&&r.set(e,o);return o}(r("q1tI")),n=o(r("i8i4")),i=o(r("fhzG")),a=o(r("17x9"));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(l=function(e){return e?r:t})(e)}const u=(0,i.default)({displayName:"Triangle",propTypes:{color:a.default.string.isRequired,left:a.default.number.isRequired,top:a.default.number.isRequired,width:a.default.number.isRequired,height:a.default.number.isRequired,horizontalDirection:a.default.oneOf(["left","right"]).isRequired,verticalDirection:a.default.oneOf(["top","bottom"]).isRequired},render:function(){let e,t,r,o;const n=`${this.props.width}px solid transparent`;"right"===this.props.horizontalDirection?e=n:t=n;const i=`${this.props.height}px solid ${this.props.color}`;return"top"===this.props.verticalDirection?r=i:o=i,s.createElement("div",{style:{display:"block",height:0,width:0,position:"absolute",left:this.props.left,top:this.props.top,borderLeft:e,borderRight:t,borderTop:r,borderBottom:o}})}}),c=(0,i.default)({displayName:"TooltipArrow",propTypes:{position:a.default.string,visibility:a.default.string,left:a.default.number,top:a.default.number,color:a.default.string.isRequired,border:a.default.string.isRequired,width:a.default.number.isRequired,height:a.default.number.isRequired,horizontalDirection:a.default.oneOf(["left","right"]).isRequired,verticalDirection:a.default.oneOf(["top","bottom"]).isRequired},getDefaultProps:function(){return{position:"relative",visibility:"visible",left:0,top:0}},render:function(){const e="top"===this.props.verticalDirection,t=e?0:1,r=e?0:-1;return s.createElement("div",{style:{display:"block",position:this.props.position,visibility:this.props.visibility,left:this.props.left,top:this.props.top,width:this.props.width+2,height:this.props.height+1,marginTop:-1,marginBottom:-2,zIndex:10}},s.createElement(u,{horizontalDirection:this.props.horizontalDirection,verticalDirection:this.props.verticalDirection,color:this.props.border,left:0,top:r,width:this.props.width+2,height:this.props.height+2}),s.createElement(u,{horizontalDirection:this.props.horizontalDirection,verticalDirection:this.props.verticalDirection,color:this.props.color,left:1,top:t,width:this.props.width,height:this.props.height}))}}),p={top:{top:"-100%"},bottom:{top:0}},d={left:{targetLeft:0},right:{targetLeft:"100%"}},h={left:{tooltipLeft:0,arrowLeft:e=>0},right:{tooltipLeft:"-100%",arrowLeft:e=>-e-2}};var f=(0,i.default)({displayName:"Tooltip",propTypes:{show:a.default.bool.isRequired,className:a.default.string,arrowSize:a.default.number,borderColor:a.default.string,verticalPosition:a.default.oneOf(Object.keys(p)),horizontalPosition:a.default.oneOf(Object.keys(d)),horizontalAlign:a.default.oneOf(Object.keys(h)),children:a.default.arrayOf(a.default.element).isRequired,targetContainerStyle:a.default.any},getDefaultProps:function(){return{className:"",arrowSize:10,borderColor:"#ccc",verticalPosition:"bottom",horizontalPosition:"left",horizontalAlign:"left",targetContainerStyle:{}}},getInitialState:function(){return{height:null}},componentDidMount:function(){this._updateHeight()},UNSAFE_componentWillReceiveProps:function(){this.setState({height:null})},componentDidUpdate:function(){this._updateHeight()},_renderToolTipDiv:function(e){const t=Object.assign({},d[this.props.horizontalPosition],h[this.props.horizontalAlign],p[this.props.verticalPosition]);let r,o;return e?(r=s.createElement(c,{verticalDirection:"top",horizontalDirection:this.props.horizontalAlign,position:"absolute",color:"white",border:this.props.borderColor,left:t.arrowLeft(this.props.arrowSize),top:2-this.props.arrowSize,width:this.props.arrowSize,height:this.props.arrowSize,zIndex:10}),o=s.createElement(c,{verticalDirection:"top",horizontalDirection:this.props.horizontalAlign,visibility:"hidden",color:"white",border:this.props.borderColor,left:t.arrowLeft(this.props.arrowSize),top:-1,width:this.props.arrowSize,height:this.props.arrowSize,zIndex:10})):(r=s.createElement(c,{verticalDirection:"bottom",horizontalDirection:this.props.horizontalAlign,color:"white",border:this.props.borderColor,left:t.arrowLeft(this.props.arrowSize),top:-1,width:this.props.arrowSize,height:this.props.arrowSize,zIndex:10}),o=null),s.createElement("div",{style:{position:"relative",height:0,display:this.props.show?"block":"none"}},s.createElement("div",{ref:"tooltipContainer",className:"tooltipContainer",style:{position:"absolute",height:this.state.height||void 0,left:t.targetLeft}},r,s.createElement("div",{className:this.props.className,ref:"tooltipContent",style:{position:"relative",top:t.top,left:t.tooltipLeft,border:"1px solid "+this.props.borderColor,WebkitBoxShadow:"0 1px 3px "+this.props.borderColor,MozBoxShadow:"0 1px 3px "+this.props.borderColor,boxShadow:"0 1px 3px "+this.props.borderColor,zIndex:9}},this.props.children.slice(1)),o))},_updateHeight:function(){const e=n.default.findDOMNode(this.refs.tooltipContainer).offsetHeight;e!==this.state.height&&this.setState({height:e})},render:function(){const e="top"===this.props.verticalPosition;return s.createElement("span",null,e&&this._renderToolTipDiv(e),s.createElement("div",{style:this.props.targetContainerStyle},this.props.children[0]),!e&&this._renderToolTipDiv())}});t.default=f},b5JB:function(e,t,r){"use strict";var o=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=o(r("5pch")),n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=l(t);if(r&&r.has(e))return r.get(e);var o={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var i=s?Object.getOwnPropertyDescriptor(e,n):null;i&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n]}o.default=e,r&&r.set(e,o);return o}(r("HEOz")),i=o(r("uBl0")),a=o(r("R6Bf"));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(l=function(e){return e?r:t})(e)}const{shuffle:u,random:c}=i.default,p=[[n._("False"),n._("True")],[n._("No"),n._("Yes")]],d=(e,t)=>{const r=((e,t)=>{let r=e.choices.slice();return r=s.default.map(r,((e,t)=>s.default.extend({},e,{originalIndex:t,correct:Boolean(e.correct)}))),function(e){let t=null;const r=s.default.reject(e,(function(e,r){if(e.isNoneOfTheAbove)return t=e,!0}));return t&&r.push(t),r}((e=>{const t=e.map((e=>e.content));return p.some((e=>s.default.isEqual(t,e)))?[e[1],e[0]]:e})(function(r){const o=void 0===t?c:t;return e.randomize?u(r,null!=o?o:0):r}(r)))})(e,t),o=s.default.reduce(e.choices,(function(e,t){return t.correct?e+1:e}),0),{hasNoneOfTheAbove:n,multipleSelect:i,countChoices:a,deselectEnabled:l}=e;return{numCorrect:o,hasNoneOfTheAbove:n,multipleSelect:i,countChoices:a,deselectEnabled:l,choices:r,selectedChoices:s.default.pluck(r,"correct")}},h={1:e=>{let t,r;if(e.noneOfTheAbove)throw new Error("radio widget v0 no longer supports auto noneOfTheAbove");return t=e.choices,r=!1,s.default.extend(s.default.omit(e,"noneOfTheAbove"),{choices:t,hasNoneOfTheAbove:r})}};var f={name:"radio",displayName:"Multiple choice",accessible:!0,widget:a.default,transform:d,staticTransform:d,version:{major:1,minor:0},propUpgrades:h,isLintable:!0};t.default=f},bGTE:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getChoiceLetter=function(e){const t=o._("A B C D E F G H I J K L M N O P Q R S T U V W X Y Z").split(" ");if(e<t.length)return t[e];return" "};var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=n?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(o,i,a):o[i]=e[i]}o.default=e,r&&r.set(e,o);return o}(r("HEOz"));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}},"e04/":function(e,t,r){"use strict";var o=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.unionAnswerForms=t.maybeParsePercentInput=t.default=t.NumericInput=void 0;var s=o(r("TSYQ")),n=y(r("q1tI")),i=o(r("5pch")),a=o(r("l+pH")),l=o(r("eMwK")),u=o(r("7gXX")),c=o(r("WZBl")),p=r("j8wP"),d=o(r("7BBF")),h=o(r("XwLL")),f=r("zahm"),m=y(r("HEOz"));function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(g=function(e){return e?r:t})(e)}function y(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=g(t);if(r&&r.has(e))return r.get(e);var o={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var i=s?Object.getOwnPropertyDescriptor(e,n):null;i&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n]}return o.default=e,r&&r.set(e,o),o}const b=u.default.parseTex,v=[{title:"Integers",value:"integer",content:"6"},{title:"Decimals",value:"decimal",content:"0.75"},{title:"Proper fractions",value:"proper",content:"⅗"},{title:"Improper fractions",value:"improper",content:"⁷⁄₄"},{title:"Mixed numbers",value:"mixed",content:"1¾"},{title:"Numbers with π",value:"pi",content:"π"}],O={integer:()=>m._("an integer, like $6$"),proper:e=>"optional"===e.simplify?m._("a *proper* fraction, like $1/2$ or $6/10$"):m._("a *simplified proper* fraction, like $3/5$"),improper:e=>"optional"===e.simplify?m._("an *improper* fraction, like $10/7$ or $14/8$"):m._("a *simplified improper* fraction, like $7/4$"),mixed:()=>m._("a mixed number, like $1\\ 3/4$"),decimal:()=>m._("an *exact* decimal, like $0.75$"),pi:()=>m._("a multiple of pi, like $12\\ \\text{pi}$ or $2/3\\ \\text{pi}$")};class w extends n.Component{constructor(...e){super(...e),this.state={previousValues:[""]},this.getAnswerBlurb=e=>{let t,r;if(this.props.apiOptions.satStyling&&e){const o=this.simpleValidate(e);if(t="points"===o.type&&o.earned===o.total,!t){const t=i.default.filter(e.answers,(e=>"correct"===e.status)),o=i.default.map(t,(e=>{let t="decimal";e.answerForms&&e.answerForms[0]&&(t=e.answerForms[0]);let r=h.default.toNumericString(e.value,t);return e.maxError&&(r+=" ± "+h.default.toNumericString(e.maxError,t)),r}));r=n.createElement(c.default,{answers:o})}}return[r,!!t]},this.getClasses=(e,t)=>{const r={};return r["perseus-input-size-"+this.props.size]=!0,r["perseus-input-right-align"]=this.props.rightAlign,r[p.ClassNames.CORRECT]=t&&e&&this.props.currentValue,r[p.ClassNames.INCORRECT]=t&&!e&&this.props.currentValue,r[p.ClassNames.UNANSWERED]=t&&!this.props.currentValue,r},this.examples=()=>{var e;const t=0!==(null==(e=this.props.answerForms)?void 0:e.length)?this.props.answerForms:i.default.map(i.default.keys(O),(e=>({name:e,simplify:"required"})));let r=i.default.map(t,(e=>O[e.name](e)));return r=i.default.uniq(r),[m._("**Your answer should be** ")].concat(r)},this.shouldShowExamples=()=>{var e,t;const r=0===(null==(e=this.props.answerForms)?void 0:e.length),o=i.default.uniq(null==(t=this.props.answerForms)?void 0:t.map((e=>e.name))).length>=i.default.size(O);return!r&&!o},this.simpleValidate=e=>w.validate(this.getUserInput(),e),this.focus=()=>(this.refs.input.focus(),!0),this.focusInputPath=e=>{this.refs.input.focus()},this.blurInputPath=e=>{this.refs.input.blur()},this.getInputPaths=()=>[[]],this.getGrammarTypeForPath=e=>"number",this.setInputValue=(e,t,r)=>{this.props.onChange({currentValue:t},r)},this.getUserInput=()=>w.getUserInputFromProps(this.props),this.handleChange=(e,t)=>{this.props.onChange({currentValue:e},t),this.props.trackInteraction()},this._getInputType=()=>this.props.apiOptions.staticRender?"tex":"text",this._handleFocus=()=>{this.props.onFocus([]);const{interactionCallback:e}=this.props.apiOptions;e&&e()},this._handleBlur=()=>{this.props.onBlur([])}}static getUserInputFromProps(e){return{currentValue:e.currentValue}}static getOneCorrectAnswerFromRubric(e){const t=i.default.filter(e.answers,(e=>"correct"===e.status)),r=i.default.map(t,(e=>{let t="decimal";e.answerForms&&e.answerForms[0]&&(t=e.answerForms[0]);let r=h.default.toNumericString(e.value,t);return e.maxError&&(r+=" ± "+h.default.toNumericString(e.maxError,t)),r}));if(0!==r.length)return r[0]}static validate(e,t){const r=i.default.pluck(v,"value"),o=e=>d.default.number.createValidatorFunctional(e.value,{message:e.message,simplify:"correct"===e.status?e.simplify:"optional",inexact:!0,maxError:e.maxError,forms:e.strict&&e.answerForms&&0!==e.answerForms.length?e.answerForms:r}),s=b(e.currentValue),n=i.default.where(t.answers,{status:"correct"}),a=n.every((e=>Math.abs(e.value)<=1));let l=i.default.find(i.default.map(n,(e=>{let r=s;t.coefficient&&(r?"-"===r&&(r=-1):r=1);return o(e)(k(r,a))})),(e=>e.correct||e.empty));if(!l){const e=[].concat(i.default.where(t.answers,{status:"ungraded"}),i.default.where(t.answers,{status:"wrong"})),r=i.default.find(e,(e=>o(e)(k(s,a)).correct));l={empty:!!r&&"ungraded"===r.status,correct:!!r&&"correct"===r.status,message:r?r.message:null,guess:s}}return l.empty?{type:"invalid",message:l.message}:{type:"points",earned:l.correct?1:0,total:1,message:l.message}}render(){const e=this.props.reviewModeRubric,t=this.getAnswerBlurb(e),r=t[0],o=t[1],i=this.getClasses(o,e);let u=this.props.labelText;null!=u&&""!==u||(u=m._("Your answer:"));const c=e=>this.props.rightAlign?n.createElement("div",{className:"perseus-input-right-align"},e):e;if(this.props.apiOptions.customKeypad)return c(n.createElement(l.default,{ref:"input",value:this.props.currentValue,keypadElement:this.props.keypadElement,onChange:this.handleChange,onFocus:this._handleFocus,onBlur:this._handleBlur}));const p=n.createElement(a.default,{ref:"input",value:this.props.currentValue,onChange:this.handleChange,className:(0,s.default)(i),labelText:u,type:this._getInputType(),examples:this.examples(),shouldShowExamples:this.shouldShowExamples(),onFocus:this._handleFocus,onBlur:this._handleBlur,id:this.props.widgetId,disabled:this.props.apiOptions.readOnly,highlightLint:this.props.highlightLint});return r?n.createElement("span",{className:"perseus-input-with-answer-blurb"},p,r):this.props.apiOptions.satStyling?n.createElement("label",{className:"perseus-input-with-label","aria-hidden":"true"},n.createElement("span",{className:"perseus-input-label"},m.doNotTranslate("Answer:")),p):n.createElement("div",null,p)}}t.NumericInput=w,w.defaultProps={currentValue:"",size:"normal",rightAlign:!1,apiOptions:p.ApiOptions.defaults,coefficient:!1,answerForms:[],labelText:"",linterContext:f.linterContextDefault,multipleNumberInput:!1};const C=function(e){const t=i.default.flatten(e),r=(o=t,s=i.default.isEqual,i.default.reduce(o,((e,t)=>i.default.find(e,s.bind(null,t))?e:e.concat([t])),[]));var o,s;return i.default.sortBy(r,(e=>i.default.keys(O).indexOf(e.name)))};t.unionAnswerForms=C;const k=(e,t)=>{if("string"!=typeof e||!e.endsWith("%"))return e;const r=parseFloat(e.slice(0,-1));return isNaN(r)?e:t?r/100:r};t.maybeParsePercentInput=k;var _={name:"numeric-input",displayName:"Number text box",defaultAlignment:"inline-block",accessible:!0,widget:w,transform:function(e){return i.default.extend(i.default.omit(e,"answers"),{answerForms:C(i.default.map(e.answers,(e=>i.default.map(e.answerForms,(t=>({simplify:e.simplify,name:t}))))))})},isLintable:!0};t.default=_},fiwv:function(e,t,r){"use strict";var o=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r("SoFn"),n=o(r("sGBi")),i=r("rVh6"),a=o(r("Q08l")),l={MultiRenderer:n.default,shapes:a.default,buildPropTypeForShape:i.buildPropTypeForShape,buildEmptyItemForShape:s.buildEmptyItemForShape,findContentNodesInItem:s.findContentNodesInItem,findHintNodesInItem:s.findHintNodesInItem,inferItemShape:s.inferItemShape};t.default=l},gP8R:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(r("q1tI")),s=r("mR6N"),n=a(r("UcaO"));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function a(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var o={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var a=s?Object.getOwnPropertyDescriptor(e,n):null;a&&(a.get||a.set)?Object.defineProperty(o,n,a):o[n]=e[n]}return o.default=e,r&&r.set(e,o),o}class l extends o.Component{render(){const e={borderColor:this.props.visible?this.props.color:"transparent"};return o.createElement("span",{className:(0,s.css)(u.ring),style:e},this.props.children)}}l.defaultProps={visible:!0,color:n.kaGreen};const u=s.StyleSheet.create({ring:{margin:"auto",display:"inline-block",borderRadius:"50%",borderWidth:2,padding:2,borderStyle:"solid"}});var c=l;t.default=c},hxS7:function(e,t,r){"use strict";var o=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=o(r("TSYQ")),n=g(r("q1tI")),i=o(r("5pch")),a=g(r("HEOz")),l=o(r("l+pH")),u=o(r("eMwK")),c=o(r("7gXX")),p=o(r("WZBl")),d=o(r("7BBF")),h=r("zahm"),f=r("j8wP");function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(m=function(e){return e?r:t})(e)}function g(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=m(t);if(r&&r.has(e))return r.get(e);var o={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var i=s?Object.getOwnPropertyDescriptor(e,n):null;i&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n]}return o.default=e,r&&r.set(e,o),o}const y=c.default.parseTex,b={number:{name:"Numbers",forms:"integer, decimal, proper, improper, mixed"},decimal:{name:"Decimals",forms:"decimal"},integer:{name:"Integers",forms:"integer"},rational:{name:"Fractions and mixed numbers",forms:"integer, proper, improper, mixed"},improper:{name:"Improper numbers (no mixed)",forms:"integer, proper, improper"},mixed:{name:"Mixed numbers (no improper)",forms:"integer, proper, mixed"},percent:{name:"Numbers or percents",forms:"integer, decimal, proper, improper, mixed, percent"},pi:{name:"Numbers with pi",forms:"pi"}},v={integer:function(e){return a._("an integer, like $6$")},proper:function(e){return"optional"===e.simplify?a._("a *proper* fraction, like $1/2$ or $6/10$"):a._("a *simplified proper* fraction, like $3/5$")},improper:function(e){return"optional"===e.simplify?a._("an *improper* fraction, like $10/7$ or $14/8$"):a._("a *simplified improper* fraction, like $7/4$")},mixed:function(e){return a._("a mixed number, like $1\\ 3/4$")},decimal:function(e){return a._("an *exact* decimal, like $0.75$")},percent:function(e){return a._("a percent, like $12.34\\%$")},pi:function(e){return a._("a multiple of pi, like $12\\ \\text{pi}$ or $2/3\\ \\text{pi}$")}};class O extends n.Component{constructor(...e){super(...e),this.shouldShowExamples=()=>"number"!==this.props.answerType&&!this.props.apiOptions.staticRender,this.handleChange=(e,t)=>{this.props.onChange({currentValue:e},t)},this._getInputType=()=>this.props.apiOptions.staticRender?"tex":"text",this._handleFocus=()=>{this.props.onFocus([]);const{interactionCallback:e}=this.props.apiOptions;e&&e()},this._handleBlur=()=>{this.props.onBlur([])},this.focus=()=>(this.refs.input.focus(),!0),this.focusInputPath=e=>{this.refs.input.focus()},this.blurInputPath=e=>{this.refs.input.blur()},this.getInputPaths=()=>[[]],this.getGrammarTypeForPath=e=>"number",this.setInputValue=(e,t,r)=>{this.props.onChange({currentValue:t},r)},this.getUserInput=()=>O.getUserInputFromProps(this.props),this.simpleValidate=(e,t)=>(t=t||function(){},O.validate(this.getUserInput(),e,t)),this.examples=()=>{const e=this.props.answerType,t=b[e].forms.split(/\s*,\s*/),r=i.default.map(t,(function(e){return v[e](this.props)}),this);return[a._("**Your answer should be** ")].concat(r)}}render(){if(this.props.apiOptions.customKeypad){const e=n.createElement(u.default,{ref:"input",value:this.props.currentValue,keypadElement:this.props.keypadElement,onChange:this.handleChange,onFocus:this._handleFocus,onBlur:this._handleBlur});return this.props.rightAlign?n.createElement("div",{className:"perseus-input-right-align"},e):e}const e=this.props.reviewModeRubric;let t=null,r=null;if(this.props.apiOptions.satStyling&&e){const o=this.simpleValidate(e);if(t="points"===o.type&&o.earned===o.total,!t){let t=String(e.value);e.inexact&&e.maxError&&(t+=" ± "+e.maxError);const o=[t];r=n.createElement(p.default,{answers:o})}}const o={};o["perseus-input-size-"+this.props.size]=!0,o["perseus-input-right-align"]=this.props.rightAlign,o[f.ClassNames.CORRECT]=e&&t&&this.props.currentValue,o[f.ClassNames.INCORRECT]=e&&!t&&this.props.currentValue,o[f.ClassNames.UNANSWERED]=e&&!this.props.currentValue;const i=n.createElement(l.default,{ref:"input",value:this.props.currentValue,onChange:this.handleChange,className:(0,s.default)(o),type:this._getInputType(),examples:this.examples(),shouldShowExamples:this.shouldShowExamples(),onFocus:this._handleFocus,onBlur:this._handleBlur,id:this.props.widgetId,disabled:this.props.apiOptions.readOnly,linterContext:this.props.linterContext});return r?n.createElement("span",{className:"perseus-input-with-answer-blurb"},i,r):i}static validate(e,t,r=(()=>{})){null==t.answerType&&(t.answerType="number");const o=d.default.number.createValidatorFunctional(t.value,{simplify:t.simplify,inexact:t.inexact||void 0,maxError:t.maxError,forms:b[t.answerType].forms})(y(e.currentValue));if(o.empty){return{type:"invalid",message:!1===(null==r?void 0:r(null,e.currentValue,o.message))?null:o.message}}return{type:"points",earned:o.correct?1:0,total:1,message:o.message}}static getUserInputFromProps(e){return{currentValue:e.currentValue}}static getOneCorrectAnswerFromRubric(e){if(null==e.value)return;let t=String(e.value);return e.inexact&&e.maxError&&(t+=" ± "+e.maxError),t}}O.defaultProps={currentValue:"",size:"normal",answerType:"number",rightAlign:!1,apiOptions:f.ApiOptions.defaults,linterContext:h.linterContextDefault};var w={name:"input-number",displayName:"Number text box (old)",defaultAlignment:"inline-block",hidden:!0,widget:O,transform:e=>{const{simplify:t,size:r,answerType:o,rightAlign:s}=e;return{simplify:t,size:r,answerType:o,rightAlign:s}},isLintable:!0};t.default=w},jskG:function(e,t,r){"use strict";var o=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=c(r("q1tI")),n=o(r("17x9")),i=o(r("5pch")),a=o(r("brIp")),l=c(r("HEOz"));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}function c(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var o={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var i=s?Object.getOwnPropertyDescriptor(e,n):null;i&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n]}return o.default=e,r&&r.set(e,o),o}const p={fontSize:"150%"},d={fontSize:"120%"},h={fontSize:"130%"},f=[()=>[s.createElement("span",{key:"plus",style:d},"+"),"+"],()=>[s.createElement("span",{key:"minus",style:p},"-"),"-"],e=>e.convertDotToTimes?[s.createElement(a.default,{key:"times",style:p},l.doNotTranslate("\\times")),"\\times"]:[s.createElement(a.default,{key:"times",style:p},l.doNotTranslate("\\cdot")),"\\cdot"],()=>[s.createElement(a.default,{key:"frac",style:p},l.doNotTranslate("\\frac{x}{y}")),e=>{const t=e.latex();e.typedText("/"),e.latex()===t&&e.cmd("\\frac")}]],m={basic:f,"basic+div":f.concat([()=>[s.createElement(a.default,{key:"div"},l.doNotTranslate("\\div")),"\\div"]]),trig:[()=>[s.createElement(a.default,{key:"sin"},l.doNotTranslate("\\sin")),"\\sin"],()=>[s.createElement(a.default,{key:"cos"},l.doNotTranslate("\\cos")),"\\cos"],()=>[s.createElement(a.default,{key:"tan"},l.doNotTranslate("\\tan")),"\\tan"],()=>[s.createElement(a.default,{key:"theta",style:h},l.doNotTranslate("\\theta")),"\\theta"],()=>[s.createElement("span",{key:"phi"},s.createElement("span",{className:"perseus-sr-only"},l.doNotTranslate("phi")),s.createElement(a.default,{key:"pi",style:h},l.doNotTranslate("\\phi"))),"\\phi"]],prealgebra:[()=>[s.createElement(a.default,{key:"sqrt"},l.doNotTranslate("\\sqrt{x}")),"\\sqrt"],()=>[s.createElement(a.default,{key:"nthroot"},l.doNotTranslate("\\sqrt[3]{x}")),e=>{e.typedText("nthroot3"),e.keystroke("Right")}],()=>[s.createElement(a.default,{key:"pow",style:d},l.doNotTranslate("a^b")),e=>{const t=e.latex();e.typedText("^"),e.latex()===t&&e.typedText("a^b")}],()=>[s.createElement(a.default,{key:"pi",style:d},l.doNotTranslate("\\pi")),"\\pi"]],logarithms:[()=>[s.createElement(a.default,{key:"log"},l.doNotTranslate("\\log")),"\\log"],()=>[s.createElement(a.default,{key:"ln"},l.doNotTranslate("\\ln")),"\\ln"],()=>[s.createElement(a.default,{key:"log_b"},l.doNotTranslate("\\log_b")),e=>{e.typedText("log_"),e.keystroke("Right"),e.typedText("("),e.keystroke("Left"),e.keystroke("Left")}]],"basic relations":[()=>[s.createElement(a.default,{key:"eq"},"="),"="],()=>[s.createElement(a.default,{key:"lt"},l.doNotTranslate("\\lt")),"\\lt"],()=>[s.createElement(a.default,{key:"gt"},l.doNotTranslate("\\gt")),"\\gt"]],"advanced relations":[()=>[s.createElement(a.default,{key:"neq"},l.doNotTranslate("\\neq")),"\\neq"],()=>[s.createElement(a.default,{key:"leq"},l.doNotTranslate("\\leq")),"\\leq"],()=>[s.createElement(a.default,{key:"geq"},l.doNotTranslate("\\geq")),"\\geq"]]},g=n.default.arrayOf(n.default.oneOf((0,i.default)(m).keys()));class y extends s.Component{render(){const e=i.default.sortBy(this.props.sets,(e=>i.default.keys(m).indexOf(e))),t=(0,i.default)(e).map((e=>m[e])),r=(0,i.default)(t).map((e=>e.map((e=>{const t=e(this.props);return s.createElement("button",{onClick:()=>this.props.onInsert(t[1]),className:"tex-button",key:t[0].key,type:"button"},t[0])})))),o=(0,i.default)(r).map(((e,t)=>s.createElement("div",{className:"clearfix tex-button-row",key:this.props.sets[t]},e)));return s.createElement("div",{className:`${this.props.className||""} preview-measure`},o)}}y.propTypes={sets:g.isRequired,onInsert:n.default.func.isRequired,className:n.default.string},y.buttonSets=m,y.buttonSetsType=g;var b=y;t.default=b},"l+pH":function(e,t,r){"use strict";var o=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=g(t);if(r&&r.has(e))return r.get(e);var o={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var i=s?Object.getOwnPropertyDescriptor(e,n):null;i&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n]}o.default=e,r&&r.set(e,o);return o}(r("q1tI")),n=o(r("17x9")),i=o(r("Yw3Q")),a=o(r("5pch")),l=r("j8wP"),u=o(r("16F6")),c=o(r("Atlv")),p=o(r("G6Ta")),d=o(r("7xiW")),h=o(r("Boyy")),f=r("zahm"),m=o(r("uBl0"));function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(g=function(e){return e?r:t})(e)}const{captureScratchpadTouchStart:y}=m.default,b="math",v="text",O="tex";class w extends s.Component{constructor(...e){super(...e),this.state={focused:!1,showExamples:!1},this._getUniqueId=()=>`input-with-examples-${btoa(this.props.id).replace(/=/g,"")}`,this._getInputClassName=()=>{if(this.props.type===O)return this.props.className;let e=l.ClassNames.INPUT+" "+l.ClassNames.INTERACTIVE;return this.state.focused&&(e+=" "+l.ClassNames.FOCUSED),this.props.className&&(e+=" "+this.props.className),e},this._getPropsForInputType=()=>{const e={"aria-describedby":this._getUniqueId(),ref:"input",className:this._getInputClassName(),labelText:this.props.labelText,value:this.props.value,onFocus:this._handleFocus,onBlur:this._handleBlur,disabled:this.props.disabled};return this.props.type===O?e:(a.default.extend(e,{onChange:this.props.onChange,onTouchStart:y}),this.props.type===b?a.default.extend({buttonSet:this.props.buttonSet,buttonsVisible:this.props.buttonsVisible,convertDotToTimes:this.props.convertDotToTimes},e):this.props.type===v?a.default.extend({autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",spellCheck:"false"},e):void 0)},this._getComponentForInputType=()=>{switch(this.props.type){case O:return d.default;case b:return u.default;case v:return p.default;default:return null}},this._renderInput=()=>{const e=this._getPropsForInputType(),t=this._getComponentForInputType();return s.createElement(t,e)},this._handleFocus=()=>{this.props.onFocus(),this.setState({focused:!0,showExamples:!0})},this.show=()=>{this.setState({showExamples:!0})},this.hide=()=>{this.setState({showExamples:!1})},this._handleBlur=()=>{this.props.onBlur(),this.setState({focused:!1,showExamples:!1})},this.focus=()=>{this.refs.input.focus()},this.blur=()=>{this.refs.input.blur()},this.handleChange=e=>{this.props.onChange(e.target.value)}}render(){const e=this._renderInput();if(this.props.type===O)return e;const t=a.default.map(this.props.examples,(e=>"- "+e)).join("\n"),r=this.props.shouldShowExamples&&this.state.showExamples;return s.createElement(i.default,{ref:"tooltip",className:"perseus-formats-tooltip preview-measure",horizontalPosition:"left",horizontalAlign:"left",verticalPosition:"bottom",arrowSize:10,borderColor:"#ccc",show:r},e,s.createElement("div",{id:this._getUniqueId()},s.createElement(c.default,{content:t,linterContext:h.default.pushContextStack(this.props.linterContext,"input-with-examples")})))}}w.propTypes={type:n.default.oneOf([b,v,O]),value:n.default.string,onChange:n.default.func.isRequired,className:n.default.string,examples:n.default.arrayOf(n.default.string).isRequired,shouldShowExamples:n.default.bool,convertDotToTimes:n.default.bool,buttonSet:n.default.string,buttonsVisible:n.default.oneOf(["always","never","focused"]),labelText:n.default.string,onFocus:n.default.func,onBlur:n.default.func,disabled:n.default.bool,id:n.default.string.isRequired,linterContext:f.linterContextProps},w.defaultProps={type:v,shouldShowExamples:!0,onFocus:function(){},onBlur:function(){},disabled:!1,linterContext:f.linterContextDefault};var C=w;t.default=C},lCk0:function(e,t,r){"use strict";var o=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=o(r("pVnL")),n=m(r("q1tI")),i=r("mR6N"),a=o(r("Pwnf")),l=m(r("HEOz")),u=o(r("6wxr")),c=o(r("TBZ3")),p=o(r("Bkj0")),d=o(r("G4Rg")),h=r("bGTE");function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}function m(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var o={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var i=s?Object.getOwnPropertyDescriptor(e,n):null;i&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n]}return o.default=e,r&&r.set(e,o),o}const g={path:"M27.218 6.82l0 13.578q0 2.852-1.984 4.836t-4.836 1.984l-13.578 0q-2.852 0-4.836-1.984t-1.984-4.836l0-13.578q0-2.852 1.984-4.836t4.836-1.984l13.578 0q2.852 0 4.836 1.984t1.984 4.836zm36.27 0l0 13.578q0 2.852-1.984 4.836t-4.836 1.984l-13.578 0q-2.852 0-4.836-1.984t-1.984-4.836l0-13.578q0-2.852 1.984-4.836t4.836-1.984l13.578 0q2.852 0 4.836 1.984t1.984 4.836zm36.27 0l0 13.578q0 2.852-1.984 4.836t-4.836 1.984l-13.578 0q-2.852 0-4.836-1.984t-1.984-4.836l0-13.578q0-2.852 1.984-4.836t4.836-1.984l13.578 0q2.852 0 4.836 1.984t1.984 4.836z",width:100,height:27.284};class y extends n.PureComponent{constructor(...e){super(...e),this.state={hovered:!1,opened:!1,slidePanelCovered:!0,usingKeyboardFocus:!1,wasCrossedOutOnLastOpen:!1},this._openMenu=()=>{const e=null!=this._menu&&this._menu.contains(document.activeElement);this.setState({opened:!0,usingKeyboardFocus:e,wasCrossedOutOnLastOpen:this.props.crossedOut})},this._closeMenu=()=>{this._crossOutButtonIsFocused&&this._menuButton&&this._menuButton.focus(),this.setState({opened:!1,slidePanelCovered:!0})},this._handleMenuClick=(e,t)=>{t?this._openMenu():this._closeMenu(),e.preventDefault()},this._handleCrossedOutButtonClick=e=>{this.props.onCrossedOutChange(e),this._closeMenu()},this._handleSlideTransitionEnd=()=>{this.state.opened&&this.setState({slidePanelCovered:!1})}}UNSAFE_componentWillReceiveProps(e){e.enabled||this._closeMenu()}_getButtonProps(e){const t=this.state.wasCrossedOutOnLastOpen;return{onClick:()=>{this._handleCrossedOutButtonClick(!t)},onFocus:()=>{this._crossOutButtonIsFocused=!0},onBlur:()=>{this._crossOutButtonIsFocused=!1},crossedOut:t,pos:this.props.pos,primaryProductColor:this.props.primaryProductColor,usingKeyboardFocus:this.state.usingKeyboardFocus,theme:e}}_getMenuIconColor(){return this.state.opened?this.props.primaryProductColor:this.state.hovered?a.default.offBlack:a.default.offBlack50}_renderMenu(){const{pos:e,isSatProduct:t}=this.props,{opened:r}=this.state,o=(0,i.css)(b.menu,t&&b.spacing);return n.createElement("div",{ref:e=>this._menu=e,className:o,onClick:e=>this._handleMenuClick(e,!r),onMouseEnter:()=>this.setState({hovered:!0}),onMouseLeave:()=>this.setState({hovered:!1})},n.createElement(d.default,{dismissed:!this.state.opened,onDismiss:this._closeMenu,buttonProps:this._getButtonProps("day")},n.createElement("button",{type:"button","aria-label":l._("Open menu for Choice %(letter)s",{letter:(0,h.getChoiceLetter)(e)}),className:(0,i.css)([b.menuButton]),onClick:e=>this._handleMenuClick(e,!r),onMouseDown:e=>e.preventDefault(),ref:e=>this._menuButton=e},n.createElement(u.default,{className:(0,i.css)(b.menuIcon),icon:g,size:3,color:this._getMenuIconColor()}))))}_renderSlidePanel(){const e=this._getButtonProps("night"),{slidePanelCovered:t}=this.state;return n.createElement("div",{className:(0,i.css)(b.slidePanel,t&&b.slidePanelCovered),onClick:e.onClick,"aria-hidden":t},n.createElement(p.default,(0,s.default)({},e,{disabled:t,tabFocusable:!t})))}render(){const{enabled:e}=this.props,{opened:t}=this.state;return n.createElement("div",{className:(0,i.css)(b.wrapper)},n.createElement("div",{className:(0,i.css)(b.slidingContent,e&&b.slidingContentEnabled,t&&b.slidingContentOpen),onTransitionEnd:this._handleSlideTransitionEnd},n.createElement("div",{className:(0,i.css)(b.content)},this.props.children),e&&this._renderMenu()),e&&this._renderSlidePanel())}}t.default=y;const b=i.StyleSheet.create({wrapper:{display:"block",position:"relative"},slidingContent:{display:"flex",flexDirection:"row",alignItems:"stretch"},slidingContentEnabled:{[c.default.smOrSmaller]:{transition:"transform 0.2s ease-out",backgroundColor:a.default.white}},slidingContentOpen:{[c.default.smOrSmaller]:{transform:"translateX(-96px)"}},content:{display:"block",flex:"1 1 0"},menu:{cursor:"pointer",boxSizing:"border-box",width:32,display:"flex",flexDirection:"column",alignItems:"flex-end",justifyContent:"center",[c.default.smOrSmaller]:{paddingRight:8}},menuButton:{background:"none",border:"none",font:"inherit",padding:0,textAlign:"inherit",cursor:"pointer",display:"flex",flexDirection:"column",justifyContent:"center",height:16},menuIcon:{display:"block"},slidePanel:{position:"absolute",top:0,right:0,boxSizing:"border-box",width:96,height:"100%",paddingLeft:8,paddingRight:8,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",background:a.default.offBlack50,cursor:"pointer",[c.default.mdOrLarger]:{display:"none"}},spacing:{paddingRight:12},slidePanelCovered:{zIndex:-1}})},rVh6:function(e,t,r){"use strict";var o=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.buildPropTypeForShape=function(e){return s.default.oneOfType([s.default.shape({_multi:i(e)}),s.default.oneOf([null,void 0])])},t.shapePropType=function e(...t){return s.default.oneOfType([s.default.shape({type:s.default.oneOf(["content"]).isRequired}).isRequired,s.default.shape({type:s.default.oneOf(["hint"]).isRequired}).isRequired,s.default.shape({type:s.default.oneOf(["tags"]).isRequired}).isRequired,s.default.shape({type:s.default.oneOf(["object"]).isRequired,shape:s.default.objectOf(e)}).isRequired,s.default.shape({type:s.default.oneOf(["array"]).isRequired,elementShape:e}).isRequired]).apply(void 0,t)};var s=o(r("17x9")),n=r("4PhQ");function i(e){if("content"===e.type)return s.default.shape({__type:s.default.oneOf(["content","item"]).isRequired,content:s.default.string,images:s.default.objectOf(s.default.any),widgets:s.default.objectOf(s.default.any)});if("hint"===e.type)return s.default.shape({__type:s.default.oneOf(["hint"]).isRequired,content:s.default.string,images:s.default.objectOf(s.default.any),widgets:s.default.objectOf(s.default.any),replace:s.default.bool});if("tags"===e.type)return s.default.arrayOf(s.default.string.isRequired);if("array"===e.type){const t=i(e.elementShape);return s.default.arrayOf(t.isRequired)}if("object"===e.type){const t=e.shape,r={};return Object.keys(t).forEach((e=>{r[e]=i(t[e]).isRequired})),s.default.shape(r)}throw new n.KAError(`unexpected shape type ${e.type}`,n.Errors.Internal)}},sGBi:function(e,t,r){"use strict";var o=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=o(r("pVnL")),n=o(r("8OQS")),i=r("mR6N"),a=o(r("gmVs")),l=b(r("q1tI")),u=r("SoFn"),c=b(r("4PhQ")),p=o(r("YH1v")),d=o(r("Atlv")),h=r("OJf/"),f=o(r("uBl0")),m=b(r("HEOz"));const g=["item","children","shape","serializedState","onSerializedStateUpdated"];function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(y=function(e){return e?r:t})(e)}function b(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=y(t);if(r&&r.has(e))return r.get(e);var o={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var i=s?Object.getOwnPropertyDescriptor(e,n):null;i&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n]}return o.default=e,r&&r.set(e,o),o}class v extends l.Component{constructor(e){super(e),this._handleSerializedStateUpdated=(e,t)=>{const{onSerializedStateUpdated:r}=this.props;if(r){const o=this._getSerializedState(this.props.serializedState);r((0,a.default)(o).set(e,t).freeze())}},this.rendererDataTreeMapper=(0,h.buildMapper)().setContentMapper(((e,t,r)=>this._makeContentRendererData(e,r))).setHintMapper((e=>this._makeHintRendererData(e))).setTagsMapper((e=>null)),this.getRenderersMapper=(0,h.buildMapper)().setContentMapper((e=>e.makeRenderer())).setHintMapper((e=>e.makeRenderer())).setArrayMapper(((e,t,r)=>this._annotateRendererArray(e,t,r))),this.state=this._tryMakeRendererState(this.props)}UNSAFE_componentWillReceiveProps(e){e.item!==this.props.item&&this.setState(this._tryMakeRendererState(e))}_tryMakeRendererState(e){try{return{rendererDataTree:this._makeRendererDataTree(e.item,e.shape),renderError:null}}catch(e){return c.default.error("Error building tree state",c.Errors.Internal,e),{rendererDataTree:null,renderError:e}}}_getRendererProps(){const e=this.props;return(0,n.default)(e,g)}_makeContentRendererData(e,t){const r={ref:null,makeRenderer:null},o=e=>r.ref=e,n=e=>this._findWidgets(r,e),i=e=>this._handleSerializedStateUpdated(t,e);return r.makeRenderer=()=>l.createElement(d.default,(0,s.default)({},this._getRendererProps(),e,{ref:o,findExternalWidgets:n,serializedState:this.props.serializedState?(0,a.default)(this.props.serializedState).get(t):null,onSerializedStateUpdated:i})),r}_makeHintRendererData(e){const t=e=>this._findWidgets({},e);return{hint:e,findExternalWidgets:t,ref:null,makeRenderer:()=>l.createElement(p.default,(0,s.default)({},this._getRendererProps(),{findExternalWidgets:t,hints:[e]}))}}_makeRendererDataTree(e,t){const r=(0,u.itemToTree)(e);return this.rendererDataTreeMapper.mapTree(r,t)}_findWidgets(e,t){const r=[];return this._mapRenderers((o=>{e!==o&&o.ref&&r.push.apply(r,o.ref.findInternalWidgets(t))})),r}_mapRenderers(e){const{rendererDataTree:t}=this.state;if(!t)return null;return(0,h.buildMapper)().setContentMapper(e).setHintMapper(e).mapTree(t,this.props.shape)}_scoreFromRef(e){if(!e)return null;const[t,r]=e.guessAndScore();let o;return e.getSerializedState&&(o=e.getSerializedState()),f.default.keScoreFromPerseusScore(r,t,o)}getScores(){return this._mapRenderers((e=>this._scoreFromRef(e.ref)))}score(){const e=[],t=[],r=this._mapRenderers((r=>{var o;return r.ref?(r.ref.getSerializedState&&t.push(r.ref.getSerializedState()),e.push(r.ref.score()),null==(o=r.ref)?void 0:o.getUserInput()):null})),o=e.reduce(f.default.combineScores);return f.default.keScoreFromPerseusScore(o,r,t)}_getSerializedState(e){return this._mapRenderers(((t,r,o)=>t.ref?t.ref.getSerializedState():e?(0,a.default)(e).get(o):null))}restoreSerializedState(e,t){let r=0;const o=()=>{r--,t&&0===r&&t()};this._mapRenderers(((t,s,n)=>{var i;if(!t.ref)return;const l=(0,a.default)(e).get(n);l&&(r++,null==(i=t.ref)||i.restoreSerializedState(l,o))}))}_annotateRendererArray(e,t,r){if("hint"===r.elementShape.type){const r=t;(e=[].concat(e)).firstN=e=>l.createElement(p.default,(0,s.default)({},this._getRendererProps(),{findExternalWidgets:r[0]?r[0].findExternalWidgets:void 0,hints:r.map((e=>e.hint)),hintsVisible:e}))}return e}_getRenderers(){return this.getRenderersMapper.mapTree(this.state.rendererDataTree,this.props.shape)}render(){return this.state.renderError?l.createElement("div",{className:(0,i.css)(O.error)},m.$_("Error rendering: %(error)s",{error:String(this.state.renderError)})):this.props.children({renderers:this._getRenderers()})}}const O=i.StyleSheet.create({error:{color:"red"}});var w=v;t.default=w}}]);
//# sourceMappingURL=../../sourcemaps/en/2MwD.9ba6a2bb009e2a72ac26.js.map